!function(){"use strict";angular.module("core",["ngAnimate","ngAria","ngMaterial","ngMessages","ngSanitize","toastr","ui.router","angular.filter","pascalprecht.translate","angularTranslateApp","oc.lazyLoad"]),angular.module("cgConsole",["core","guest","member"]),angular.module("guest",["core"]),angular.module("member",["core"])}(),function(){"use strict";function appRouterConfig($stateProvider,$urlRouterProvider,$locationProvider,viewPath){$urlRouterProvider.otherwise("login"),$locationProvider.html5Mode(!0)}angular.module("cgConsole").config(["$stateProvider","$urlRouterProvider","$locationProvider","viewPath",appRouterConfig])}(),function(){"use strict";function AppController($mdSidenav,$mdDialog,$mdMedia,viewPath,$timeout,$translate,$translatePartialLoader,consoleApiSvc,clusterSvc,$rootScope,toastrSvc,$mdMenu,$scope,apiEndPoint,$http,$compile,$q,commonSvc,operationSvc,$window,cloudBotSvc,$state,applicationSvc,memberSvc,accountSvc,analyticsSvc,announcementSvc,$injector,$filter,userActivitySvc,gdprConsentSvc,viralloopsSvc,cwUservoiceURL){function header_fixed(){$(window).scroll(function(){var top_offset=$(window).scrollTop(),top=parseInt($("body").css("top").replace("px",""));isNaN(top)&&(top_offset>60?$("body").addClass("hdr-mini"):$("body").removeClass("hdr-mini"))})}function querySearch(query){if($(".hdr-search-list-container").length||(vm.selectedIndex=-1),vm.searchResult=[],query&&query.length>=3){var searchResult,server_result_count,results={},serverData={},apps={},appData={},a=0,clusterData={};angular.forEach(vm.repos,function(server,k){if(serverData={server_id:server.id,server_label:server.label,server_html:server.label},searchResult=searchInString(query,serverData.server_label)){serverData.server_html=searchResult,results[a]=serverData,a++;var b=0}if(searchResult=searchInString(query,server.public_ip)){serverData.public_ip=searchResult,results[a]=serverData,a++;var b=0}if(server.apps){var c=0;if(results[a]=serverData,a++,angular.forEach(server.apps,function(app){searchResult=searchInString(query,app.label),searchResult||(searchResult=searchInString(query,app.sys_user)),searchResult&&(appData={app_id:app.id,app_label:app.label,app_staging:"1"==app.is_staging,app_html:searchResult},results[a]=appData,a++,c=1)}),0==b||0==c)for(var x in results)if(results[x].server_id===serverData.server_id){delete results[x];break}}server_result_count=k,apps={},b=1}),angular.forEach(clusterSvc.clusters.list,function(cluster,k){if(clusterData={cluster_id:cluster.id,cluster_label:cluster.label,cluster_html:cluster.label},searchResult=searchInString(query,clusterData.cluster_label)){clusterData.cluster_html=searchResult,results[a]=clusterData,a++;var d=0}if(cluster.apps){var e=0;if(results[a]=clusterData,a++,angular.forEach(cluster.apps,function(app){searchResult=searchInString(query,app.label),searchResult||(searchResult=searchInString(query,app.sys_user)),searchResult&&(appData={cluster_app_id:app.id,cluster_app_label:app.label,cluster_app_html:searchResult},results[a]=appData,a++,e=1)}),0==d||0==e)for(var x in results)if(results[x].cluster_id===clusterData.cluster_id){delete results[x];break}}apps={}}),0===Object.keys(results).length?vm.searchResult.push({error:"Server/Apps not found."}):vm.searchResult=$.map(results,function(value){return[value]})}}function selectSearch($event){if("undefined"==typeof vm.selectedIndex&&(vm.selectedIndex=-1),"undefined"!=typeof vm.searchResult){var searchResultKeyCode=parseInt($event.keyCode);40===searchResultKeyCode&&($event.preventDefault(),vm.selectedIndex<vm.searchResult.length-1&&(vm.selectedIndex++,vm.selectedIndex>1&&$(".hdr-search-list-container").animate({scrollTop:"+=22px"},0))),38===searchResultKeyCode&&($event.preventDefault(),vm.selectedIndex>0&&(vm.selectedIndex--,$(".hdr-search-list-container").animate({scrollTop:"-=22px"},0))),13===searchResultKeyCode&&vm.selectedIndex<vm.searchResult.length&&($event.preventDefault(),void 0!=vm.searchResult[vm.selectedIndex]&&(vm.searchResult[vm.selectedIndex].app_id?"apps"==$state.current.child&&$state.params.id==vm.searchResult[vm.selectedIndex].app_id?(vm.searchText="",$(".hdr-search-list-container").remove()):($state.go("app_detail_access",{id:vm.searchResult[vm.selectedIndex].app_id}),vm.setItemName(vm.searchResult[vm.selectedIndex].app_label)):vm.searchResult[vm.selectedIndex].server_id?"server"==$state.current.child&&$state.params.id==vm.searchResult[vm.selectedIndex].server_id?(vm.searchText="",$(".hdr-search-list-container").remove()):($state.go("server_detail_access",{id:vm.searchResult[vm.selectedIndex].server_id}),vm.setItemName(vm.searchResult[vm.selectedIndex].server_label)):vm.searchResult[vm.selectedIndex].cluster_id?"cluster"==$state.current.child&&$state.params.id==vm.searchResult[vm.selectedIndex].cluster_id?(vm.searchText="",$(".hdr-search-list-container").remove()):($state.go("cluster_detail.access",{id:vm.searchResult[vm.selectedIndex].cluster_id}),vm.setItemName(vm.searchResult[vm.selectedIndex].cluster_label)):vm.searchResult[vm.selectedIndex].cluster_app_id&&("app"==$state.current.child&&$state.params.id==vm.searchResult[vm.selectedIndex].cluster_id?(vm.searchText="",$(".hdr-search-list-container").remove()):($state.go("cluster_app_detail.access",{id:vm.searchResult[vm.selectedIndex].cluster_app_id}),vm.setItemName(vm.searchResult[vm.selectedIndex].cluster_label)))))}}function searchInString(query,str){var regex,result,strUpdated=str;for(regex=query.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),regex=new RegExp(regex,"gi");result=regex.exec(str);)strUpdated=strUpdated.replace(result[0],'<span class="hdr-search-text">'+result[0]+"</span>");return strUpdated===str?!1:strUpdated}function showAdminImpersonationMessage(){window.PubSub.subscribe("servers-fetched",function(msg,data){consoleApiSvc.user.userDetails.admin_loggedin&&commonSvc.adminImpersonation&&(commonSvc.adminImpersonation=!1,$timeout(function(ev){$mdDialog.show({controller:adminImpersonationIndicatorController,controllerAs:"vm",templateUrl:viewPath+"partials/admin-impersonation-indicator.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1})},1e3),$("body").addClass("md-dialog-fixed"))})}function adminImpersonationIndicatorController($mdDialog){var vm=this;vm.userName=consoleApiSvc.user.userDetails.name,vm.cancel=function(){$mdDialog.hide(),$("body").removeClass("md-dialog-fixed")}}function userNotification(){var user=consoleApiSvc.user;if(user&&angular.isObject(user)&&angular.isObject(user.userDetails)&&user.userDetails.notifications&&user.userDetails.notifications.length){var notifications=angular.copy(user.userDetails.notifications);consoleApiSvc.user.userDetails.notifications=!1,setTimeout(function(){angular.forEach(notifications,function(v){v.status?toastrSvc.success(v.message,{timeOut:2e4}):toastrSvc.error(v.message,{timeOut:2e4})})},1e3)}}function redirectUserToLastAccessUrl(){var user=consoleApiSvc.user;user&&angular.isObject(user)&&angular.isObject(user.userDetails)&&user.userDetails.last_access_url&&user.userDetails.last_access_url.length>0&&user.userDetails.last_access_url.indexOf("api/v1")&&(window.location=user.userDetails.last_access_url)}var vm=this;vm.SASReferral=!1,vm.is_secondary_user=!1,$translatePartialLoader.addPart("main"),$translate.refresh(),showAdminImpersonationMessage(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&angular.element("html").addClass("ismobile"),vm.customFullscreen=$mdMedia("xs")||$mdMedia("sm"),vm.active_nav="",vm.cwUservoiceURL=cwUservoiceURL,$scope.$watch("consoleApiSvc.user.userDetails.image",function(){if(consoleApiSvc.user.userDetails.image&&(vm.user_image=consoleApiSvc.user.userDetails.image||!1),angular.isDefined(consoleApiSvc.user.userDetails.memberAccounts)&&(vm.memberAccounts=consoleApiSvc.user.userDetails.memberAccounts,vm.getParent()),angular.isDefined(consoleApiSvc.user.userDetails.type)&&"primary"!==consoleApiSvc.user.userDetails.type&&(vm.is_secondary_user=!0),angular.isDefined(consoleApiSvc.user.userDetails.FirstTimeLogin)&&(commonSvc.gtmEventTrack(consoleApiSvc.user.userDetails.id,"userTracking","Activation",consoleApiSvc.user.userDetails.FirstTimeLogin),commonSvc.gtmEventTrack(consoleApiSvc.user.userDetails.id,"signUpAccountActivated",!1,consoleApiSvc.user.userDetails.FirstTimeLogin),commonSvc.gtmEventTrack(consoleApiSvc.user.userDetails.id,"account_signup","Signup","Signup Success"),delete consoleApiSvc.user.userDetails.FirstTimeLogin,cookieConsent.isServiceEnabled("performance")&&angular.isDefined(consoleApiSvc.user.userDetails.id)))try{angular.isDefined(__adroll_loaded)&&__adroll_loaded&&(window.adroll_custom_data={USER_ID:consoleApiSvc.user.userDetails.id},__adroll.record_user({adroll_segments:"a5d3db69"})),angular.isDefined(_mktz)&&(console.log("mktz"),_mktz.push(["_Goal","enable-signups",consoleApiSvc.user.userDetails.id]))}catch(err){}}),vm.toggleInvite=function(page){viralloopsSvc.changePageVL(page);var mp_data={event_name:"vl_tab_changed",tab:0==page?"Invite":"Reward"};analyticsSvc.addAnalytics(mp_data)},vm.closeVLModal=function(){viralloopsSvc.hideVL()},window.PubSub.subscribe("showVLHeartIcon",function(msg,data){$(".invite-frnd-icon-refer").show(),window.PubSub.unsubscribe("showVLHeartIcon")}),vm.inviteFriend=function(ev){viralloopsSvc.viralLoopOpen("header")},vm.loggedParent={name:"",email:""},vm.getParent=function(){if(angular.isDefined(vm.memberAccounts)){var member=$filter("filter")(vm.memberAccounts,{id:consoleApiSvc.user.userDetails.mapping_id})[0];angular.isDefined(member.name)&&(vm.loggedParent.name=member.name,vm.loggedParent.email=member.email)}},vm.isActiveMemberAccountsDropdown=function(){return angular.isDefined(vm.memberAccounts)&&vm.memberAccounts.length>1},$timeout(function(){$(".glb-summary-mob").closest("div.md-open-menu-container").addClass("glb-summary-mob-wrap")},0),$("#member_switch").unbind().click(function(){$(this).siblings("ul").slideToggle("slow")}),header_fixed(),userNotification(),window.PubSub.subscribe("cwUserLoggedIn",function(msg,data){redirectUserToLastAccessUrl()}),window.innerWidth<960?vm.search=!1:vm.search=!0,vm.openSearch=function(){window.innerWidth<960?vm.search?(vm.search=!1,vm.searchText="",$(".hdr-icon-search .mdi").removeClass("mdi-close").addClass("mdi-magnify")):($timeout(function(){$("#search #input-0").focus()},0),vm.search=!0,$(".hdr-icon-search .mdi").removeClass("mdi-magnify").addClass("mdi-close")):(vm.search=!0,vm.searchText="")},vm.isDisabled=!1,vm.noCache=!0,$timeout(function(){vm.repos=consoleApiSvc.server.serverData,vm.querySearch=querySearch,vm.selectSearch=selectSearch},4e3),vm.redirectIfAccountActive=function(route){consoleApiSvc.user.account_console_disabled||$state.go(route)},vm.resetSearch=function(){vm.searchResult=[]},vm.setItemName=function(name){vm.searchText=name,vm.searchResult=[]},$("*").click(function(e){if(angular.isDefined(vm.searchText)&&""!==vm.searchText){if($(e.target).closest(".show-animate").length)return;vm.searchText="",$(".hdr-search-list-container").remove(),$scope.$apply(function(){vm.searchResult=[],vm.searchText=""})}}),vm.getItemName=function(){return vm.searchItemName},$rootScope.$on("$stateChangeSuccess",function(ev,current,toParams,from,fromParams){vm.searchText="",$(".hdr-icon-search .mdi").removeClass("mdi-close").addClass("mdi-magnify"),window.innerWidth<960?vm.search=!1:vm.search=!0,$(".hdr-loader").hide()}),vm.sendShareGiftEmail=function(email){if(vm.processing||void 0==vm.processing){vm.preloader=!0,vm.message=operationSvc.getOperationLessMessage("controller","sendShareGiftEmail"),vm.processing=!0;var data={email:email},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.inviteFriend,data);result.then(function(response){vm.processing=!1,vm.preloader=!1,vm.message="",$mdDialog.hide(),toastrSvc.success("Share Gift has been sent successfully.")},function(response){vm.processing=!1,vm.preloader=!1,vm.message="",toastrSvc.error("Unable to send Share Gift.")})}},vm.cancel=function(){$mdDialog.cancel()},setTimeout(function(){$("#input-0").on("keydown",function(e){27===e.keyCode&&$scope.$apply(function(){commonSvc.removeContentDeactivator(),vm.searchText=""})}),$("md-fab-speed-dial").on("keydown",function(e){27===e.keyCode&&commonSvc.removeContentDeactivator()})},0),$(document).on("keydown",function(e){27===e.keyCode&&($mdMenu.hide(),commonSvc.removeContentDeactivator(),$scope.$apply(function(){vm.searchText="",vm.searchResult=[]}))}),$scope.uploadFile=function(files){$(".hdr-loader").show();var fd=new FormData;fd.append("image",files[0]),$http.post(apiEndPoint+"api/v1/user/image",fd,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(response){$(".hdr-loader").hide(),vm.user_image=response.data.image_name,consoleApiSvc.user.userDetails.image=response.data.image_name,toastrSvc.success("User image has been uploaded successfully.")},function(response){$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})},vm.changeUserPhoto=function(elemId){$("#"+elemId).click()},vm.serverSections=[{sref:"server_detail_access",label:"Master Credentials",prmId:"server-access",altText:"Access master credentials for SFTP and SSH access to your Server."},{sref:"server_detail_monitor",label:"Monitoring",prmId:"server-monitor",altText:"View performance graphs on various aspects of your Server."},{sref:"server_detail_services",label:"Manage Services",prmId:"server-service",altText:"Control Core services on your Server."},{sref:"server_detail_settings",label:"Settings & Packages",prmId:"server-setting",altText:"Manage various Server-level settings and packages."},{sref:"server_detail_security",label:"Security",prmId:"server-security",altText:"Manage your Application and Server security. "},{sref:"server_detail_scaling",label:"Vertical Scaling",prmId:"server-scale",altText:"Increase the size of your Server."},{sref:"server_detail_backup",label:"Backups",prmId:"server-backup",altText:"Manage your Backup preferences."},{sref:"server_detail_smtp",label:"SMTP",prmId:"server-addon",altText:"Enable or disable Server-level add-ons."},{sref:"server_detail_debian_migration",label:"Migration",prmId:"server-debian",altText:"Debian Migration",isAllowed:function(server){var ACLUsersBool=!1;return angular.isDefined(consoleApiSvc.user.ACLUsers)&&angular.isDefined(consoleApiSvc.user.userDetails.admin_id)&&-1!==consoleApiSvc.user.ACLUsers.indexOf(parseInt(consoleApiSvc.user.userDetails.admin_id))&&-1===["debian7"].indexOf(server.platform)&&(ACLUsersBool=!0),ACLUsersBool}}],vm.goToAdmin=function(id){"trial"===consoleApiSvc.user.userDetails.customer_type?commonSvc.consoleSso(id):commonSvc.consoleSso(1)},vm.accounts=function(){commonSvc.consoleSso(1)},vm.billing=function(){commonSvc.consoleSso(2)},vm.oldConsole=function(){commonSvc.consoleSso(1,!0)},vm.loadChat=function(){if(cookieConsent.isServiceEnabled("functional")){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style"),$("body #chat-widget-container").show();try{parent.LC_API.open_chat_window(),parent.LC_API.on_chat_window_minimized=function(){$("body #chat-widget-container").hide()}}catch(err){console.log("Live chat Error: "+err)}}},vm.suggestNewFeature=function(){analyticsSvc.addAnalytics({event_name:"Suggest_New_Feature"})},vm.kbNavClose=function(){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")},$("body").on("click",".md-sidenav-backdrop",function(){$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")}),vm["goto"]=function(){consoleApiSvc.alerts.processing=!0,$state.transitionTo("alert_list","",{reload:!0,inherit:!1,notify:!0}),analyticsSvc.addAnalytics({event_name:"unread_notifications",count:consoleApiSvc.alerts.unread_count,action:"shows_notifications_list"})},vm.isOldUser=function(){if(angular.isDefined(consoleApiSvc.user.userDetails.date)){var date=consoleApiSvc.user.userDetails.date.split(" "),userDate=new Date(date[0]),limit_date=new Date("2016-08-10");if(userDate.getTime()<=limit_date.getTime())return!0}return!1},vm.create_ticket=function(navDirection){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&commonSvc.createTicket()},vm.openKBSideNav=function(navDirection,$mdOpenMenu,$event){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$mdOpenMenu($event):(cookieConsent.isServiceEnabled("functional")&&angular.isDefined(parent.LC_API)&&angular.isDefined(parent.LC_API.chat_window_maximized())&&parent.LC_API.chat_window_maximized()&&LC_API.minimize_chat_window(),$mdSidenav(navDirection).open(),$("body").addClass("remove-body-scroll"),$("html").css("overflow-y","scroll"),$rootScope.publish("KbSIdNaveOpened"),commonSvc.active_side_nav="cw_kb_nav"),analyticsSvc.addAnalytics({event_name:"help_and_support"})},vm.addApp=function($event){consoleApiSvc.user.account_console_disabled||(analyticsSvc.addAnalytics({event_name:"Add Navigation Menu",action:"Add Application"}),applicationSvc.addApp($event))},$scope.announcementSvc=$injector.get("announcementSvc"),vm.cwAnnouncementOpen=function(navDirection,position,$mdOpenMenu,$event){announcementSvc.showCWAnnouncement(navDirection,$mdOpenMenu,$event),analyticsSvc.addAnalytics({event_name:"new_feature",position:position})},vm.switchMember=function(mapping_id){memberSvc.switchMember(mapping_id)},vm.isBtnDisable=function(){return consoleApiSvc.user.account_console_disabled?!0:!(!angular.isDefined(consoleApiSvc.user.userDetails.is_verified)||consoleApiSvc.user.userDetails.is_verified||!consoleApiSvc.user.userDetails.is_sms_verify_pending&&!consoleApiSvc.user.userDetails.is_email_verify_pending)},vm.redirectToTargetedPage=function(target,action,page){consoleApiSvc.user.userDetails.is_verified?$state.go(page):$state.go("member"===target?"team":"projects"),analyticsSvc.addAnalytics({event_name:"Add Navigation Menu",action:action})},vm.isAllowedSection=function(isAllowed,server){return"undefined"!=typeof isAllowed?isAllowed(server):!0}}angular.module("cgConsole").controller("AppController",["$mdSidenav","$mdDialog","$mdMedia","viewPath","$timeout","$translate","$translatePartialLoader","consoleApiSvc","clusterSvc","$rootScope","toastrSvc","$mdMenu","$scope","apiEndPoint","$http","$compile","$q","commonSvc","operationSvc","$window","cloudBotSvc","$state","applicationSvc","memberSvc","accountSvc","analyticsSvc","announcementSvc","$injector","$filter","userActivitySvc","gdprConsentSvc","viralloopsSvc","cwUservoiceURL",AppController])}(),function(){"use strict";function config($logProvider,toastrConfig,$httpProvider,$mdThemingProvider,$ocLazyLoadProvider){toastrConfig.allowHtml=!0,toastrConfig.closeButton=!0,toastrConfig.timeOut=1e4,toastrConfig.tapToDismiss=!1,toastrConfig.newestOnTop=!0,toastrConfig.positionClass="toast-top-right",toastrConfig.preventDuplicates=!1,toastrConfig.iconClasses={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},toastrConfig.position={top:!0,right:!0},$httpProvider.useApplyAsync(!0),$mdThemingProvider.theme("default").primaryPalette("indigo").accentPalette("indigo"),$httpProvider.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",$httpProvider.defaults.headers["delete"]={"Content-Type":"application/json"},$httpProvider.interceptors.push(["$q","$rootScope",function($q,$rootScope){return{request:function(request){return"directives/toast/toast.html"!==request.url&&"directives/progressbar/progressbar.html"!==request.url&&".html"==request.url.substr(-5)&&(request.params={v:$rootScope.tplVer}),$q.resolve(request)}}}])}angular.module("cgConsole").config(["$logProvider","toastrConfig","$httpProvider","$mdThemingProvider","$ocLazyLoadProvider",config])}(),function(){"use strict";angular.module("cgConsole").constant("staticTitle"," :: Cloudways Platform").constant("apiEndPoint",document.getElementsByTagName("base")[0].href).constant("polingDelay",15e3).constant("stagingSyncPolingDelay",1e4).constant("member_url","http://cloudways.com/en/member/")}(),function(){"use strict";angular.module("cgConsole").constant("viewPath","js/app/views/").constant("appMonitoringKB","http://www.cloudways.com/blog/introducing-new-relic-apm-addon/").constant("appMonitoringPath","http://localhost/cloudways/console/prototype/console_new_ui/public/server/1/access_detail").constant("welcomeVideoLimit",4).constant("deleteTrialServerMsg","<b>Alert:</b> During the trial period only one server is allowed. Deleting this server will completely end your Trial period. Hence, you would need to upgrade your account if you want to launch another server.").constant("deleteClusterMessage","<b>Alert:</b> Please be sure before deleting your cluster as all your cluster data can be lost. The process is irreversible.").constant("alertsDelay",12e5).constant("apiDocLink","https://developers.cloudways.com/docs/").constant("websiteLink","https://www.cloudways.com/en/").constant("apiPlaygroundLink","https://developers.cloudways.com/play/").constant("allowedUsers",["meerzohaib@gmail.com"]).constant("chatBotGroup",10).constant("livechatPriorityGroup",12).constant("livechatHighValueGroup",18).constant("paymentProvider",{ADYEN_TYPE:1,WIRECARD_TYPE:2,EXTERNAL_TYPE:3}).constant("magentoVersions",{version1:"1.9.3.4",version2:"2.1.7",cache_plugin:"https://support.cloudways.com/cache-solutions-for-magento-performance-improvement/"}).constant("cwUservoiceURL",{baseUrl:"http://cloudways.uservoice.com/",KbLinks:"https://cloudways.uservoice.com/forums/203824-service-improvement"}).constant("regex",{email:/^(?!.*\.{2})([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-]+([\.][A-Za-z0-9!#$%&'*+\/=?^_`{|}~-]+)*)@((([\-]?[A-Za-z0-9]){2,}[\.])*(([A-Za-z0-9-][\-]?))+).(([\.]([A-Za-z0-9]?){2,}([A-Za-z0-9])*)+)$/,rackspace_username:/^(?!.*\.{2})([A-Za-z0-9_]+([\.\-=][A-Za-z0-9_]+)*)$/,rackspace_email:/^(?!.*\.{2})([A-Za-z0-9!#$%&'*\/=?^_`{|}~-]+([\.][A-Za-z0-9!#$%&'*\/=?^_`{|}~-]+)*)@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$/,password:/(?!^0+$)(^\S{6,})/,password_new:/^\S*$/,rackspace_mailbox_password:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(.{8,})$/,domain:/^((www|\*)\.)?[a-zA-Z0-9-\.]+\.([a-z]{0,20})(\.[a-z]{0,5})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,phone_number_close_io:/^(\+)?\d+$/,phone_num:/^[0-9]{7,30}$/,phone_verify:/^[0-9]{7,30}$/,sms_verify:/^[0-9]{2,50}$/,sms_code:/^[0-9]{0,6}$/,cname_url:/^([a-zA-Z0-9\-\*\.]+[\.]{1,}[a-zA-Z0-9\-\*]{1,})$/,"delete":/^delete/i,malicious_input:/^(?!.*\<script)^(?!.*\<\?xml)([^ ]*)$/i,standard_fqdn:/^(?!\-)(?:[a-zA-Z\d\-]{0,62}[a-zA-Z\d]\.){1,15}(?!\d+)[a-zA-Z\d]{1,63}$/,standard_fqdn_wildcard:/^(?!\-)(\*\.)?(?:[a-zA-Z\d\-]{0,62}[a-zA-Z\d]\.){1,15}(?!\d+)[a-zA-Z\d]{1,63}$/,le_url:/^([a-zA-Z0-9-.]+[\.]{1,}[a-zA-Z0-9-]{1,})$/,wc_url:/^(\*[.]{0,1}[a-zA-Z0-9-]+[\.]{1,}[a-zA-Z0-9-]{1,})$/,git_ssh_url:/^[a-zA-Z0-9*\-\_]{1,200}\@([a-zA-Z0-9*\-\_\.\/\=\:\;]{1,300})[\/]([a-zA-Z0-9*\-\_\.\/\=\:\;]{1,300})$/,git_deploy_path:/^(?![\/])([a-zA-Z0-9\_\-\/\.]+)([\/])$/,csr_domain:/^([a-zA-Z0-9\-\*\.]+[\.]{1,}[a-zA-Z0-9\-\*]{1,})$/,cron_duration:/^[\s*\S.*]{1,300}$/,cron_script_path:/^[a-zA-Z0-9\-\_\.\/\$]{1,1000}\.(php|PHP)((\?|\#)[a-zA-Z0-9\-\_\.\/\$\#\=\&]{0,1000})?$/,cron_script_type:/^http[s]?:\/\/(www\.)?([a-z0-9-]{2,50})?([a-zA-Z0-9-_\/.?=&\s]{2,150})$/,block_special_chars:/^[a-z\d\-_#()\s]+$/i,ip_address:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,sys_username:/^([a-z0-9\_\-\@\.]){4,}$/,symLink:/^[a-z0-9_]{1,}$/,webroot_path:/^([\/]{1})?([a-z0-9]{1,})([\/]{1})?([a-z0-9]{1,})(([\/]{1}?[a-z0-9]{1,}){0,1})?([\/]{1})?$/,subsiteUrl:/^([\/]{1})?([a-z0-9]{1,})(([\/]{1}?[a-z0-9]{1,}){0,9})?([\/]{1})?$/,srv_app_label_special_chars:/^[a-z\d\-_*.#()\s]+$/i,login_special_chars:/^[a-z\d\-_*.#@\+]+$/i,team_special_chars:/^[a-z\d\-_*.#@()\s]+$/i,account_special_chars:/^[a-z\d\-_*.,:#@()\s]+$/i,url_with_port:/^http[s]?:\/\/?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,range_format:/^\d{1,8}\s{0,1}to\s{0,1}\d{1,8}$/i,profile_url:/^http[s]?:\/\/([a-z0-9]*\.)?([a-z0-9]{2,}\.)([a-zA-Z0-9\/\-\_\.\+]{2,})$/i,tfa_code:/^[0-9]{5,20}$/,number:/^[0-9]+$/,fund_amount:/^[1-9][0-9]*(\.[0-9]+)?$/,wirecard_cc_number:/^[0-9]{1,30}$/,wirecard_holder_name:/^[a-zA-Z0-9\_\-\+\"\'\s]{1,50}$/,wirecard_cvc:/^[a-zA-Z0-9]{1,10}$/,wirecard_vat_number:/^[a-zA-Z0-9]{1,50}$/,alpha_spaces:/^[a-zA-Z\s]+$/,alphanumeric_char:/^[0-9a-zA-Z-_.]+$/,affiliate_email:/^([0-9a-z]+([_.-]?[0-9a-z]+)*@[0-9a-z]+[0-9,a-z,.,-]*(.)\S{1}[a-z]{2,4})+$/,affiliate_position:/^[a-zA-Z0-9\_\-\,\=\+\s]{1,200}$/,port:/^[0-9]{1,6}$/,ipv4_subnet:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})(\/([1-2]?[0-9]$|[3]?[0-2]))?$/,appVersion:/^[A-Za-z0-9\.\_]+$/,time:/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s{1}[0-9]{2}:[0-9]{2}:[0-9]{2}/,supervisor_timeout:/^(([0-9])|([0-9][0-9])|[0-9][0-9][0-9])$/,supervisor_time:/^(([0-9])|([0-9][0-9])|[0-9])$/,supervisor_tries:/^(([1-2][0-5])|([0-9])|[1-9])$/,supervisor_processes:/^(([1-2][0-5])|(1[0-9])|[1-9])$/,supervisor_env:/^[a-zA-Z]+$/,cdn_url:/^http[s]?:[\/]{2,2}(www\.)?([a-zA-Z0-9\-\_\*]+[.\/]{1})+([a-zA-Z0-9\-\*]+[\/]{0,1}){0,}$/,domain_url:/^(https?\:\/\/)?([0-9a-zA-Z\-]{1,50}\.)?[0-9a-zA-Z\-]+(\.[0-9a-zA-Z]{1,30}){1,4}$/,artisan_path:/^[a-zA-Z0-9\-\_\.\/\$]{1,1000}((\?|\#)[a-zA-Z0-9\-\_\.\/\$\#\=\&]{0,1000})?$/,app_creds_username:/^[0-9a-z\-@~._+]+$/,serverAccess:/^server-/,skype_id:/^([a-zA-Z0-9\.\,\_\-]){0,}$/,unicode_char:/^[\x00-\x7F]*$/,standard_url:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-zA-Z0-9]+([\-\_\.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,16}(:[0-9]{1,5})?(\/.*)?$/}).constant("serverMessages",{server_deleted:"$label$ is deleted $status$.",server_On_Off:"$label$ is already in $status$ state.",server_connection_lost:"There appears to be a problem with your internet connection. Please check and try again.",server_error_400:"400, Bad Request.",server_error_401:"401, Unauthorized.",server_error_402:"402, Payment Required.",server_error_403:"You are not authorized to perform this action",server_error_404:"404, Page Not Found.",server_error_408:"408, Request Timeout.",server_label_updated:"$label$ updated $status$.",server_no_response:"Unfortunately, operation failed due to unexpected error.",operation_in_progress:"An operation is already in progress for this server.",app_label_updated:"$label$ updated $status$.",cert_install_success:"Certificate installed successfully.",custom_cert_install_success:"Custom SSL has been installed."}),angular.module("member").constant("serverViewPath","js/app/modules/member/views/")}(),function(){"use strict";function runBlock($rootScope,consoleApiSvc,$state,$location,operationSvc,memberSvc,commonSvc,analyticsSvc,wirecardSvc,clusterSvc,$templateCache,accountSvc,stagingSvc,diskUsageSvc,ocLazyloadSvc,platformPollingSvc,userVerificationSvc,toastrSvc,appAnalyticsSvc){$rootScope.consoleApiSvc=consoleApiSvc,$rootScope.operationSvc=operationSvc,$rootScope.memberSvc=memberSvc,$rootScope.commonSvc=commonSvc,$rootScope.analyticsSvc=analyticsSvc,$rootScope.clusterSvc=clusterSvc,$rootScope.accountSvc=accountSvc,$rootScope.stagingSvc=stagingSvc,$rootScope.diskUsageSvc=diskUsageSvc,$rootScope.platformPollingSvc=platformPollingSvc,$rootScope.userVerificationSvc=userVerificationSvc,$rootScope.cookieConsent=cookieConsent,$rootScope.appAnalyticsSvc=appAnalyticsSvc,$rootScope.tplVer=(new Date).getTime(),$templateCache.put("toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()"><div ng-switch on="allowHtml"><div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}" ng-bind-html="title"></div>        <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}" ng-bind-html="message"></div>        <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>        <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div></div></div>'),$templateCache.put("agencyTemplate",'<div flex="100" ng-if="!vm.showAgencySectionWP"><h2 class="text-center" flex>Take your first website live with Cloudways in 2 simple steps</h2><div class="agn-top-cont" layout="row" layout-wrap><div class="agn-top-inr" flex="100" flex-gt-xs="33"><b>1</b><span>Step 1:</span><p>Launch Your Free Trial Server</p></div><div class="agn-top-inr" flex="100" flex-gt-xs="33"><b>2</b><span>Step 2:</span><p>Migrate Your First Website to Cloudways</p></div><div class="agn-top-inr" flex="100" flex-gt-xs="33"><b>3</b><span>Step 3:</span><p>Take Your Website Live and Install a FREE SSL Certificate</p></div><div flex="100" flex-gt-xs="100"><div class="agn-top-inr-btn text-center"><md-button class="md-raised md-button md-primary glb-btn-spacing" ng-click="vm.sendMixpanelKbEvent(\'agency\')" aria-label="App Action Buttons"> Quick Guide to get started </md-button></div></div></div></div><div class="agn-wp-top" ng-if="vm.showAgencySectionWP" flex="100" layout-gt-sm="row" ><div class="agn-wp-top-lft" flex="50" flex-sm="100" flex-xs="100"><h2>Take Your First Website Live with Cloudways in 2 Simple Steps</h2><ul class="agn-wp-top-list"><li><span class="mdi mdi-check list-item"></span><small>Step 1</small><h3>Launch Your Free Trial <br class="hide-xs hide-sm"> Server</h3></li><li><span class="list-item">2</span><small>Step 2</small><h3>Migrate Your First eCommerce <br class="hide-xs hide-sm"> Store to Cloudways </h3></li><li><span class="list-item">3</span><small>Step 3</small><h3>Take Your eCommerce Store Live <br class="hide-xs hide-sm"> & Install a FREE SSL Certificate</h3></li></ul><div class="agn-wp-top-lft-cta"><md-button class="md-primary md-raised md-button glb-btn-spacing" ng-click="vm.sendMixpanelKbEvent(\'agency\')" aria-label="Quick Guide to get started"> Quick Guide to get started </md-button></div></div><div class="agn-wp-top-rt" flex="50" flex-sm="100" flex-xs="100"><h2>You Can Migrate Your First Website to Cloudways Within a Few Clicks</h2><div class="iframe-wrap" flex><div class="wistia_responsive_padding wistia_wp-migrator" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="//fast.wistia.net/embed/iframe/qwojx5jlrl?videoFoam=true" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="100%" height="100%"></iframe></div></div><script src="//fast.wistia.net/assets/external/E-v1.js" async></script></div></div></div><article flex flex="100" class="agn-wrap-art"><h2>Features to Help you Grow your Digital Agency on top of Cloudways</h2><p>Cloudways promises to save your time, shielding you from all the worries and hassles of cloud hosting, enabling you to focus solely on your digital agency’s business front, eventually empowering you to make more money.</p></article><div class="agn-sec2" layout-gt-xs="row" layout-wrap><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img"></div><b>Unlimited websites or traffic per server</b><p>You can deploy unlimited client websites on a single server, and there is no limitation on number of traffic per server. And the best part is we charge per server, not per website.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/how-to-add-an-application-to-an-existing-server/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Unlimited websites or traffic per server\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img8"></div><b>Transfer servers and billing to your clients</b><p>You can simply transfer a server and its billing to your client when you hand over the project to your client. From the moment you transfer the server, the billing of that server will also be transferred.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/how-to-transfer-server-to-another-account/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Transfer servers and billing to your clients\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img2"></div><b>Seamless Team Collaboration</b><p>You can add your team members/clients to your servers/applications with a very fine-grained level of control in your hand.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/cloudways-collaboration-features/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Seamless Team Collaboration\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img3"></div><b>Organize your clients in a smarter way</b><p>The Projects section allows you to map your applications with different projects. This makes clients’ site handling, sorting and distribution easy and hassle-free.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/create-new-project/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Organize your clients in a smarter way\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img4"></div><b>24/7 expert human support </b><p>Cloudways, in literal sense, goes out of the way to help its customers. Our expert engineers are here for you 24/7 to assist you with whatever query you have, either via Live Chat or Tickets.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/create-support-ticket/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'24/7 expert human support\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img5"></div><b>Real-time performance insights via CloudwaysBot</b><p>CloudwaysBot keeps you updated on the real-time performance of your clients’ websites, along with recommending you tips & tricks for optimization. You can receive these insights on your preferred channels like email, Slack etc.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/category/cloudwaysbot/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Real-time performance insights via CloudwaysBot\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img6"></div><b>Flexibility to upscale/downscale anytime</b><p>You can upscale/downscale your servers in just a few clicks to take care of the load on your clients’ websites.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/how-to-increase-server-resources/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Flexibility to upscale/downscale anytime\', null)">Read more</a></div><div class="agn-sec2-cont" flex="25" flex-xs="100" flex-gt-sm="33" flex-sm="50"><div class="agn-sec2-cont-img agn-sec2-cont-img7"></div><b>Free SSL certificates</b><p>No matter how many websites you’ve hosted on Cloudways, we’ve got Free SSL certificates for all your websites.</p><a class=\'glb-margin-top glb-link\' target="_blank" href="https://support.cloudways.com/how-to-install-letsencrypt-free-ssl-certificate/" ng-click="vm.mpEventAgencyPlatformKbLinks(\'agency\',\'Free SSL certificates\', null)">Read more</a></div></div>'),
$rootScope.goBack=function(){window.history.back()},$rootScope.http_refferrer=window.http_referrer,window._mfq=window._mfq||[],$rootScope.$on("$stateChangeSuccess",function(ev,current,toParams,from,fromParams){function setMetaTag(){var metaTitle="Cloudways Next-Generation Cloud Hosting Platform",metaDesc="Cloudways Cloud Hosting Platform allows you to deploy speedy web apps on fully managed cloud servers without any hassle.";angular.isDefined(current.name)&&"login"==current.name&&(metaTitle="Cloudways Login | Next-Gen Cloud Hosting Platform",metaDesc="Login to your Cloudways account and experience the modern cloud hosting platform to manage cloud servers without sys-admin headaches."),$("head title").html(metaTitle),$('head meta[name="description"]').attr("content",metaDesc)}setMetaTag();var newURL=memberSvc.getServerURLForMember(current.url,toParams,current.name,!0);newURL===current.name||angular.isObject(newURL)?angular.isObject(newURL)&&$state.go(newURL.state,{id:newURL.id}):$state.go(newURL,toParams),analyticsSvc.sendAnalyticsToEventService(),window.scrollTo(0,0),$rootScope.previousState=$state.href(from,fromParams),$rootScope.title=angular.isDefined(current.title)?current.title:"",platformPollingSvc.operation.stateTracking&&(platformPollingSvc.operation.cancelPolling=!0,platformPollingSvc.startPlatformPolling(null,null,null)),consoleApiSvc.user.isUserLoggedIn?consoleApiSvc.user.isUserLoggedIn&&($("body").attr("class",""),$("body").addClass("page-member"),$("body").addClass($rootScope.title.replace(/\s/g,"-").toLowerCase()),$("body").addClass(current.child)):($("body").attr("class",""),$("body").addClass("page-guest"),$("body").addClass($rootScope.title.replace(/\s/g,"-").toLowerCase())),"secondary"===consoleApiSvc.user.userDetails.type?$("body").addClass("member_secondary"):$("body").removeClass("member_secondary"),!$.isEmptyObject(current)&&-1===current.url.indexOf("account")&&consoleApiSvc.user.account_console_disabled&&("account_closed_status"===consoleApiSvc.user.userDetails.is_account_console_disabled?toastrSvc.error("Your account is closed, Please activate your account."):toastrSvc.error("Access restricted"),ocLazyloadSvc.isModuleLoaded("server").then(function(){ocLazyloadSvc.isModuleLoaded("cluster"),$("#cw-app_loader").hide(),$("#angular-app").show(),$state.go("account_detail")})),"get-started"===consoleApiSvc.current.name?$("#robots-disallow").attr("content","noindex, nofollow"):$("#robots-disallow").remove()}),$rootScope.$on("$stateChangeStart",function(ev,current,toParams,from,fromParams){"undefined"!=typeof mouseflow&&angular.isDefined(mouseflow.newPageView)&&mouseflow.newPageView(current.url),commonSvc.removeContentDeactivator();var newURL=memberSvc.getServerURLForMember(current.url,toParams,current.name);newURL===current.name||angular.isObject(newURL)?angular.isObject(newURL)&&$state.go(newURL.state,{id:newURL.id}):$state.go(newURL,toParams),consoleApiSvc.current=current,consoleApiSvc.from=from,consoleApiSvc.toParams=toParams,consoleApiSvc.fromParams=fromParams,_preventNavigation?ev.preventDefault():$rootScope.allowNavigation(),$("html").attr("style",""),$("body").removeClass("campaign_design"),clearTimeout(commonSvc.alertBotAnimation),wirecardSvc.resetCCAuthProcess()}),$rootScope.publish=function(msg,data){window.PubSub.publish(msg,data)},$rootScope.unsubscribe=function(key){window.PubSub.unsubscribe(key)},$rootScope.subscribe=function(key,callBack){window.PubSub.subscribe(key,callBack)},$rootScope.broadcast=function(msg,data){$rootScope.$broadcast(msg,data)};var _preventNavigation=!1,_preventNavigationUrl=null;$rootScope.allowNavigation=function(){_preventNavigation=!1},$rootScope.preventNavigation=function(){_preventNavigation=!0,_preventNavigationUrl=$location.absUrl()},$rootScope.$on("$locationChangeStart",function(event,newUrl,oldUrl){_preventNavigation?event.preventDefault():$rootScope.allowNavigation()})}angular.module("cgConsole").run(["$rootScope","consoleApiSvc","$state","$location","operationSvc","memberSvc","commonSvc","analyticsSvc","wirecardSvc","clusterSvc","$templateCache","accountSvc","stagingSvc","diskUsageSvc","ocLazyloadSvc","platformPollingSvc","userVerificationSvc","toastrSvc","appAnalyticsSvc",runBlock])}(),angular.module("angularTranslateApp",["pascalprecht.translate"]).config(function($translateProvider,$translatePartialLoaderProvider){$translateProvider.useLoader("$translatePartialLoader",{urlTemplate:"js/app/translations/{lang}/{part}.json?v1=162"}),$translateProvider.useSanitizeValueStrategy("sanitize"),$translateProvider.preferredLanguage("en-US"),$translateProvider.useLoaderCache(!0)}),function(){"use strict";function chatFeedback(consoleApiSvc,$rootScope,commonSvc,$filter,livechatSvc){var directive={restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{loadChatPlugin:"="},link:function(scope,element,attr){document.getElementsByTagName("head")[0],"https:"==document.location.protocol?"https://":"http://";window.PubSub.subscribe("cwUserLoggedIn",function(msg,data){var lastInvoiceAmount=null!=consoleApiSvc.user.userDetails.last_invoice?parseFloat(consoleApiSvc.user.userDetails.last_invoice.amount):0,supportScope=consoleApiSvc.user.userDetails.support_scope,signupPricing=consoleApiSvc.user.userDetails.signup_pricing;if(livechatSvc.setGroup(),window.__lc.params.push({name:"last_invoice_amount",value:lastInvoiceAmount}),window.__lc.params.push({name:"signup_pricing",value:signupPricing}),window.__lc.params.push({name:"support_scope",value:supportScope}),window.__lc.visitor={name:consoleApiSvc.user.userDetails.name,email:consoleApiSvc.user.userDetails.email},angular.isDefined(consoleApiSvc.user.userDetails.mapping_id)){var member=$filter("filter")(consoleApiSvc.user.userDetails.memberAccounts,{id:consoleApiSvc.user.userDetails.mapping_id})[0];window.__lc.params=window.__lc.params.concat([{name:"parent_email",value:member.email}])}if(""!==commonSvc.getCookie("member_switched_to")){var memberSwitchedFrom=commonSvc.getCookie("member_switched_from"),memberSwitchedTo=commonSvc.getCookie("member_switched_to");window.__lc.params=window.__lc.params.concat([{name:"Member switched from",value:memberSwitchedFrom},{name:"Member switched to",value:memberSwitchedTo}])}livechatSvc.load(),$rootScope.unsubscribe("cwUserLoggedIn")}),window.PubSub.subscribe("cwNotUserLoggedIn",function(msg,data){livechatSvc.load(),$rootScope.unsubscribe("cwNotUserLoggedIn")}),scope.template="js/app/views/chatFeedback.html"}};return directive}angular.module("cgConsole").directive("chatFeedback",["consoleApiSvc","$rootScope","commonSvc","$filter","livechatSvc",chatFeedback])}(),function(){"use strict";function cwAddMoreFields(consoleApiSvc,commonSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{fieldObj:"=",fieldValidationType:"=",fieldValidationRegex:"=",fieldForm:"=",fieldElm:"@"},link:function(scope,element,attr){scope.addMore=function(){scope.fieldObj.push("")},scope.removeField=function(index){scope.fieldObj.splice(index,1)},scope.template="js/app/views/cwAddMoreFields.html"}}}angular.module("cgConsole").directive("cwAddMoreFields",["consoleApiSvc","commonSvc",cwAddMoreFields])}(),function(){"use strict";function cwAdminImpersonation(consoleApiSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){consoleApiSvc.user.userDetails.admin_loggedin&&(scope.userName=consoleApiSvc.user.userDetails.name,scope.template="js/app/views/admin-impersonation-banner.html")}}}angular.module("cgConsole").directive("cwAdminImpersonation",["consoleApiSvc",cwAdminImpersonation])}(),function(){"use strict";function cwAnnouncement(announcementSvc,$mdSidenav,analyticsSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){scope.annoucement=announcementSvc.announcement,scope.cwloadMoreEnable=!0,scope.annoucementClose=function(){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")},scope.getUTCTime=function(date){var format="YYYY-MM-DD HH:mm:ss",reqFormat="DD MMMM, YYYY",UTCTime=moment.tz(date,format,"Europe/Madrid").utc().format(reqFormat);return UTCTime},scope.cwAnnouncementLoadMore=function(){scope.preloader=!0,scope.message="Loading announcements... please wait",announcementSvc.cwAnnouncementLoadMore().then(function(response){scope.preloader=!1,scope.message="",scope.annoucement=announcementSvc.announcement},function(response){scope.preloader=!1,scope.message=""})},scope.sendMixpanelEvent=function(announcement){analyticsSvc.addAnalytics({event_name:"new_feature_see_more",heading:announcement.heading,read_more_link:announcement.read_more_link})},scope.template="js/app/views/cwAnnouncement.html"}}}angular.module("cgConsole").directive("cwAnnouncement",["announcementSvc","$mdSidenav","analyticsSvc",cwAnnouncement])}(),function(){"use strict";function cwAppActions(consoleApiSvc,$rootScope,$mdDialog,$state,applicationSvc,memberSvc,toastrSvc,clusterSvc,stagingSvc,commonSvc,$timeout,platformPollingSvc,diskUsageSvc,serverConfigsSvc,$sce,analyticsSvc){var directive={restrict:"E",templateUrl:"js/app/views/appActions.html",scope:{app:"="},link:function(scope,element){scope.parent_id,scope.$watchGroup(["app"],function(){function showSelectServerDialog(appId,server_id,$event){$rootScope.preventNavigation();var disabledOptions=[];memberSvc.isSectionPermitted(server_id,"app-add")||disabledOptions.push("same"),memberSvc.isSectionPermitted(null,"server-add")||disabledOptions.push("new");for(var i in consoleApiSvc.server.serverData)memberSvc.isSectionPermitted(i,"app-add")||disabledOptions.push(i);$mdDialog.show({controller:CloneDialogController,controllerAs:"vm",templateUrl:"js/app/views/partials/select-server.html",parent:angular.element(document.body),targetEvent:$event,clickOutsideToClose:!1,locals:{servers:consoleApiSvc.server.serverData,app_id:appId,server_id:server_id,disabledOptions:disabledOptions,userType:scope.customer_type,isTrialUserExpired:consoleApiSvc.isTrialUserExpired}}).then(function(data){var stagingEnv=data.staging?data.staging:!1;$rootScope.allowNavigation(),"new"===data.option?angular.isDefined(stagingEnv)&&stagingEnv?$state.go("server_clone_staging",{id:data.server_id,appId:data.app_id}):$state.go("server_clone",{id:data.server_id,appId:data.app_id}):"same"===data.option?applicationSvc.clone_app(data.app_id,data.server_id,stagingEnv):applicationSvc.clone_app_on_other_server(data.app_id,data.server_id,data.option,stagingEnv)},function(){$rootScope.allowNavigation()})}function CloneDialogController($mdDialog,servers,app_id,server_id,disabledOptions,userType,isTrialUserExpired){function addEventToMixPanel(action,event){event.event_name="server_clone_action",event.action=action,analyticsSvc.addAnalytics(event)}function onSubmitServer(destinationType,$mdDialog,data){vm.errors={},vm.loaderMessage="CLONE_DISK_USAGE_LOADER",vm.showNotificationIcon=!1,vm.showloader=!0,vm.isAvailable=!1,vm.proceedAnyway=!1,vm.isBtnDisabled=!1;var errorState={proceedAnyway:!1,isBtnDisabled:!1,packages:[]},sourceCheck="same"!==destinationType&&"new"!==destinationType;applicationSvc.checkPackageVersions(vm.serverId,destinationType).then(function(response){response.status||(errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0,vm.errors=response.message,errorState.packages=response.packages,angular.isDefined(response.isPHPWarning)&&response.isPHPWarning?(errorState.proceedAnyway=response.isPHPWarning,errorState.isBtnDisabled=!1):(errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0)),$rootScope.publish("packageVersionsValidated")},function(){errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0,$rootScope.publish("packageVersionsValidated")}),window.PubSub.subscribe("packageVersionsValidated",function(){applicationSvc.checkDiskUsage(vm.appId,vm.serverId,destinationType).then(function(response){angular.isDefined(response.status)&&response.status&&angular.isDefined(response.operation_id)?(response.data=response,scope.fetchExistingServerDiskUsage=!1,angular.isDefined(response.data.operation_id)&&response.data.operation_id?(scope.destinationServerBool=sourceCheck,platformPollingSvc.startPlatformPolling(vm.serverId,response.data.operation_id,1,"ansible"),window.PubSub.subscribe("platform_operation-"+response.data.operation_id,function(msg,isSuccess){var messageParams=platformPollingSvc.operation.parameters[vm.serverId];responseAfterOperationSuccess(isSuccess,destinationType,$mdDialog,data,response,errorState,messageParams)})):(vm.showNotificationIcon=!0,vm.isAvailable=response.isAvailable,vm.errors={},vm.errors.diskUsage=null===response.data?"We are unable to check the requirements. Please retry or contact support if the problem persists.":response.data.message[0],Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1),angular.equals(vm.errors,{})||(vm.hideNoteError=!1),vm.showloader=!1)):(vm.showloader=!1,angular.isDefined(response.message)?toastrSvc.error(message):toastrSvc.error("An unexpected error has occurred"))}),$rootScope.unsubscribe("packageVersionsValidated")})}function responseAfterOperationSuccess(isSuccess,destinationType,$mdDialog,data,response,errorState,messageParams){if(isSuccess){var sourceDiskUsage=diskUsageSvc.calculateDiskUsageFromMiddleware(vm.serverId);diskUsageSvc.fetchDestinationDiskUsage(scope.destinationServerBool,sourceDiskUsage,vm.serverId,destinationType).then(function(message){if(angular.isDefined(message)&&""!==message?(vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors.diskUsage=message,vm.isBlock=!0):angular.isDefined(message)&&""===message&&(vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!0,vm.isBlock=!0,vm.message="Please wait while we are checking the requirements for the Staging/Cloning operation"),vm.mixPanelObject={},vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,0===Object.keys(vm.errors).length)$timeout(function(){$mdDialog.hide(data)},1e3);else if(vm.isBlock){1===Object.keys(vm.errors).length&&vm.proceedAnyway&&angular.isDefined(vm.selectServerForm)?vm.selectServerForm.$setValidity("submitServer",!0):Object.keys(vm.errors).length>1&&angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1);for(var key in vm.errors)if(/unabletoclone|db/.test(key))var dbPackage=key;angular.isDefined(dbPackage)&&(vm.mixPanelObject.application_id=vm.appId,vm.mixPanelObject.source_package=errorState.packages.mysql.source,vm.mixPanelObject.destination_package=errorState.packages.mysql.destination,vm.mixPanelObject.server_id=vm.serverId,vm.mixPanelObject.destination_server_id=destinationType,vm.mixPanelObject.is_staging=angular.isDefined(data.staging)&&data.staging?1:0)}angular.equals(vm.errors,{})||(vm.hideNoteError=!1)},function(message){message.data=message,vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage=angular.isDefined(message.data.message)?message.data.message[0]:"We are unable to check the requirements. Please retry or contact support if the problem persists.",Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)})}else vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage=angular.isDefined(response.data.message)?response.data.message[0]:"We are unable to check the requirements. Please retry or contact support if the problem persists.",angular.isDefined(messageParams)&&angular.isDefined(messageParams.message)&&(vm.errors.diskUsage=messageParams.message),Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)}function onValidatingNewServer($mdDialog,object){vm.errors={},vm.loaderMessage="CLONE_DISK_USAGE_LOADER",vm.showNotificationIcon=!1,vm.showloader=!0,vm.isAvailable=!1,vm.proceedAnyway=!1,vm.isBtnDisabled=!1;var errorState={proceedAnyway:!1,isBtnDisabled:!1};serverConfigsSvc.getServerpackages(vm.serverId).then(function(response){vm.serverPackages=response[vm.serverId];var serverPackage=serverConfigsSvc.packageExist(vm.serverPackages),DBPackage="Mysql 5.5";angular.isDefined(serverPackage.name)&&null!=serverPackage.name&&(DBPackage=serverPackage.name.charAt(0).toUpperCase()+serverPackage.name.slice(1),DBPackage=DBPackage+" "+vm.serverPackages[serverPackage.name]),angular.isDefined(serverPackage.status)&&serverPackage.status?(vm.proceedAnyway=!0,vm.errors[serverPackage.name]="Please note that the new server will use MariaDB 10.1 as database engine, instead of "+DBPackage+" used in the current one. More information <a class='glb-error-msg' href='https://support.cloudways.com/mariadb-the-cloudways-choice-for-the-database/' target='_blank'>here</a>",angular.isDefined(object.staging)&&object.staging&&(vm.errors[serverPackage.name]="Note that the new server will have a database (Mariadb 10.1) that doesn't support direct migration from the current server one ("+DBPackage+"). To be able to perform the operation, please change the database on this server to Mariadb 10.1 following this <a class='glb-error-msg' href='https://support.cloudways.com/upgrade-mysql-database-to-mariadb/' target='_blank'>process</a>.",vm.proceedAnyway=!1,vm.isBtnDisabled=!0),vm.mixPanelObject.message=vm.errors[serverPackage.name],vm.mixPanelObject.application_id=vm.appId,vm.mixPanelObject["package"]=DBPackage,vm.mixPanelObject.server_id=vm.serverId,vm.mixPanelObject.is_staging=angular.isDefined(object.staging)&&object.staging?1:0,vm.showloader=!1,serverConfigsSvc.packageVersionValidated=!0):$mdDialog.hide(object)},function(){vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage="We are unable to check the requirements. Please retry or contact support if the problem persists.",Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)})}var vm=this;vm.server="",vm.disabledOptions=disabledOptions,vm.servers=angular.copy(servers),vm.isServerCloneEnabled=!0,vm.stagingActivate="",vm.appId=parseInt(app_id),vm.serverId=parseInt(server_id),vm.currentServer={},vm.isBtnDisabled=!1,vm.errors="",vm.hideNoteError=!0,"trial"===userType&&(isTrialUserExpired||Object.keys(vm.servers).length>0)&&(vm.isServerCloneEnabled=!1),angular.forEach(vm.servers,function(server){angular.isDefined(server.apps)&&angular.forEach(server.apps,function(app){parseInt(app.id)===parseInt(app_id)&&angular.isDefined(vm.servers[server.id])&&(vm.currentServer.label=vm.servers[server.id].label,vm.currentServer.cloud=vm.servers[server.id].cloud,delete vm.servers[server.id])})});var data={app_id:vm.appId,server_id:vm.serverId};window.scrollTo(0,0),vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){angular.isDefined(vm.mixPanelObject)&&Object.keys(vm.mixPanelObject).length&&addEventToMixPanel("Cancel",vm.mixPanelObject),$mdDialog.cancel()},vm.selectServer=function(option,stagingEnv,proceedAnyway){return data.option=option,data.staging=stagingEnv,proceedAnyway?(angular.isDefined(vm.mixPanelObject)&&Object.keys(vm.mixPanelObject).length&&addEventToMixPanel("proceed",vm.mixPanelObject),vm.selectServerForm.$setValidity("submitServer",!0),void $mdDialog.hide(data)):void("new"!==option?onSubmitServer(option,$mdDialog,data):onValidatingNewServer($mdDialog,data))},vm.isShowLoader=function(){return!!vm.showloader},vm.isError=function(){return Object.keys(vm.errors).length},vm.onChangeServer=function(){vm.hideNoteError=!0,vm.showNotificationIcon=!1,vm.showloader=!1,vm.message="",vm.errors="",vm.proceedAnyway=!1,vm.isBtnDisabled=!1,vm.selectServerForm.$setValidity("submitServer",!0)},vm.applySanitization=function(error){return $sce.trustAsHtml(error)}}scope.isDisabled=!1,scope.customer_type=consoleApiSvc.user.userDetails.customer_type,scope.isServer=!0,angular.isDefined(scope.app.server_id)&&scope.app.server_id&&0!=parseInt(scope.app.server_id)?(scope.isServer=!0,scope.parent_id=scope.app.server_id,scope.isDisabled="running"!=consoleApiSvc.server.serverData[scope.app.server_id].status,scope.server=consoleApiSvc.server.serverData[scope.app.server_id],scope.deleteApp=function(app_id,server_id){applicationSvc.delete_app(app_id,server_id)},scope.cloneApp=function(app_id,server_id){showSelectServerDialog(app_id,server_id)},scope.isDisableCloneItem=function(is_staging){return!parseInt(is_staging)}):(scope.parent_id=scope.app.cluster_id,scope.isServer=!1,scope.deleteApp=function(app_id,cluster_id){clusterSvc["delete"](cluster_id).then(function(response){$state.go("clusters")},function(response){})})})}};return directive}angular.module("cgConsole").directive("cwAppActions",["consoleApiSvc","$rootScope","$mdDialog","$state","applicationSvc","memberSvc","toastrSvc","clusterSvc","stagingSvc","commonSvc","$timeout","platformPollingSvc","diskUsageSvc","serverConfigsSvc","$sce","analyticsSvc",cwAppActions])}(),function(){"use strict";function cwAppDetailSideNav(consoleApiSvc,analyticsSvc,stagingSvc,$state,$timeout){return{restrict:"E",templateUrl:"js/app/views/cwAppDetailSideNav.html",scope:{app:"=",server:"="},link:function(scope,element,attr){scope.state=$state.current.name,scope.addAnalytics=function(event_name,page,app_label){analyticsSvc.addAnalytics({event_name:event_name,page:page,app:app_label})},scope.isCheckStagingMapped=function(server_id,app_id){return stagingSvc.isCheckStagingMapped(server_id,app_id)},scope.showMagentoPerformanceTool=function(application,app_version){return consoleApiSvc.showMagentoPerformanceTool(application,app_version)},scope.isWordPressApp=function(){var userEmail=consoleApiSvc.user.userDetails.email;if(angular.isDefined(userEmail)&&"cloudways.com"!==userEmail.substring(userEmail.length-13))return!1;var result=!1,wpApps=["wordpress","wordpressmu","woocommerce","wordpressdefault"];return angular.isDefined(scope.app.application)&&-1!==wpApps.indexOf(scope.app.application)&&(result=!0),result},$(".side-nav-list-monitor, .side-nav-list-analytic").click(function(){$(this).siblings().slideToggle("fast"),$(this).toggleClass("activeNav")}),$timeout(function(){$(".md-accordian-nav-body li a").each(function(){$(this).hasClass("active")&&($(this).parent().parent().addClass("active"),$(this).parent().parent().siblings().addClass("activeNav active"),$(this).closest(".side-nav-list-accord-inr").addClass("active"),$(this).closest(".side-nav-list-accord-inr").siblings().addClass("activeNav"))})},200)}}}angular.module("cgConsole").directive("cwAppDetailSideNav",["consoleApiSvc","analyticsSvc","stagingSvc","$state","$timeout",cwAppDetailSideNav])}(),function(){"use strict";function cwAppLaunchDbManager(consoleApiSvc,toastrSvc,applicationSvc){var directive={restrict:"E",templateUrl:"js/app/views/cwAppLaunchDBManager.html",scope:{serverId:"=",app:"="},link:function(scope,element,attr){scope.$watchGroup(["serverId","app"],function(){scope.launchDBManager=function(server_id,app){applicationSvc.launchDBManager(server_id,app)}})}};return directive}angular.module("cgConsole").directive("cwAppLaunchDbManager",["consoleApiSvc","toastrSvc","applicationSvc",cwAppLaunchDbManager])}(),function(){"use strict";function cwApplicationBar(){function ServerBarController(consoleApiSvc,applicationSvc,$stateParams,$state,$timeout,commonSvc,analyticsSvc,$filter,stagingSvc){function prepareAppServerBar(serversObj){that.appBarClass,that.appBar={app:""},that.appBar.app=$stateParams.id,that.appBar_summery="app-bar_summery",that.go=$state.go.bind($state),that.serverBar={},that.app=null,that.server=null;var stateMapping=["setting","deployment","cron_job","staging","access","domain","restore","ssl","monitor","monitor_traffic","monitor_php","monitor_mysql","monitor_cron","monitor_disk","log_access","log_error"],app_id=$stateParams.id;if(that.analyticsSvc=analyticsSvc,angular.forEach(serversObj,function(server){angular.forEach(server.apps,function(app){app.id===app_id&&(that.app=app,that.server=server,that.app.isStaging=stagingSvc.isCheckStagingMapped(that.server.id,that.app.id),that.appsProject=commonSvc.getAppProjectCount(that.app.project_id),that.appMembers=that.app.members?consoleApiSvc.sortServerByName(that.app.members,"name"):[]),app.id===$stateParams.id&&(that.appBar.is_staging=app.is_staging),that.partial="app-detail-summary-mobile",angular.isDefined(that.appBar.is_staging)&&"1"===that.appBar.is_staging&&(that.partial="staging-app-detail-summary-mobile")})}),null===that.app&&null===that.server)return void $state.go("server");that.serverBar.server=that.server.id,that.switchToApp=function(app_id,is_staging){if("*"===app_id)analyticsSvc.addAnalytics({event_name:"application_switch",app:"Application Listing"}),$state.go("apps");else{var state="",app_label=$filter("filter")(consoleApiSvc.server.serverData[that.server.id].apps,{id:app_id})[0].label;if(analyticsSvc.addAnalytics({event_name:"application_switch",app:app_label,app_id:app_id,server_id:that.server.id}),angular.isDefined(that.server)&&angular.forEach(that.server.apps,function(app){app.id===that.appBar.app&&(is_staging=parseInt(app.is_staging))}),!is_staging&&consoleApiSvc.current.name.startsWith("staging")){var mapObj={staging_:"",detail:"detail_"};state=new RegExp(Object.keys(mapObj).join("|"),"gi"),state=consoleApiSvc.current.name.replace(state,function(matched){return mapObj[matched]}).replace(/\./g,""),$state.go(state,{id:app_id})}else if(is_staging&&consoleApiSvc.current.name.startsWith("staging"))$state.go(consoleApiSvc.current.name,{id:app_id});else if(is_staging&&!consoleApiSvc.current.name.startsWith("staging")){if(angular.forEach(stateMapping,function(value){-1!==consoleApiSvc.current.name.indexOf(value)&&(state="staging_app_detail."+value)}),""===state)return void $state.go("staging_app_detail.access",{id:app_id});$state.go(state,{id:app_id})}else $state.go(consoleApiSvc.current.name,{id:app_id})}},that.switchToServersApp=function(){var serverID=that.serverBar.server,state="";if("*"===serverID)$state.go("server"),analyticsSvc.addAnalytics({event_name:"application_page_server_switch",server:"Server Listing"});else if(consoleApiSvc.server.serverData[serverID]&&consoleApiSvc.server.serverData[serverID].apps&&consoleApiSvc.server.serverData[serverID].apps[0]){if(analyticsSvc.addAnalytics({event_name:"application_page_server_switch",server:consoleApiSvc.server.serverData[serverID].label}),"1"===consoleApiSvc.server.serverData[serverID].apps[0].is_staging&&consoleApiSvc.current.name.startsWith("staging"))$state.go(consoleApiSvc.current.name,{id:consoleApiSvc.server.serverData[serverID].apps[0].id});else if("1"!==consoleApiSvc.server.serverData[serverID].apps[0].is_staging||consoleApiSvc.current.name.startsWith("staging")){if(consoleApiSvc.current.name.startsWith("staging")){var mapObj={staging_:"",detail:"detail_"},state=new RegExp(Object.keys(mapObj).join("|"),"gi");return state=consoleApiSvc.current.name.replace(state,function(matched){return mapObj[matched]}).replace(/\./g,""),void $state.go(state,{id:consoleApiSvc.server.serverData[serverID].apps[0].id})}}else{if(angular.forEach(stateMapping,function(value){-1!==consoleApiSvc.current.name.indexOf(value)&&(state="staging_app_detail."+value)}),""===state)return void $state.go("staging_app_detail.access",{id:app_id});$state.go(state,{id:app_id})}$state.go(consoleApiSvc.current.name,{id:consoleApiSvc.server.serverData[serverID].apps[0].id})}else analyticsSvc.addAnalytics({event_name:"application_page_server_switch",server:consoleApiSvc.server.serverData[serverID].label,server_id:serverID}),$state.go("server_detail_access",{id:serverID})},that.apps=prepareAppsObj(),that.servers=prepareServersObj(serversObj),that.app_bar_regex=consoleApiSvc.getRegex("srv_app_label_special_chars"),that.sendSummaryDataToMP=function(event,data){var mpData={};angular.forEach(data,function(val,key){mpData[key]=val}),mpData.event_name=event,analyticsSvc.addAnalytics(mpData)};var wpApps=["wordpress","wordpressmu","woocommerce","wordpressdefault"];that.isWordPressApp=function(){var result=!1;return angular.isDefined(that.app)&&-1!==wpApps.indexOf(that.app.application)&&(result=!0),result}}function prepareAppsObj(){var apps={};return angular.forEach(that.server.apps,function(app){apps[app.id]={id:app.id,label:app.label,appName:app.application,isStaging:1===parseInt(app.is_staging)}}),that.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)},consoleApiSvc.sortServerByName(apps,"label")}function prepareServersObj(serversObj){var servers={};return angular.forEach(serversObj,function(server){servers[server.id]={id:server.id,label:server.label,cloud:server.cloud}}),that.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)},consoleApiSvc.sortServerByName(servers,"label")}var that=this;that.targetMenuPosition=commonSvc.checkScreenSize(),prepareAppServerBar(consoleApiSvc.server.serverData),window.PubSub.subscribe("appDeleted",function(){prepareAppServerBar(consoleApiSvc.server.serverData)}),that.getPartial=function(partial){return"js/app/modules/member/views/partials/"+partial+".html"},that.isMasterUser=function(){return commonSvc.isMasterUser()},that.updateAppLabel=function(label){applicationSvc.update_app_label($stateParams.id,that.server.id,label,that.app).then(function(response){that.apps=prepareAppsObj(),that.app.label=response},function(response){that.apps=prepareAppsObj(),that.app.label=response})},that.isCheckStaging=function(is_staging){return console.log(app),parseInt(is_staging)?parseInt(is_staging):0}}var directive={restrict:"E",replace:!0,scope:{appBarClass:"="},templateUrl:"js/app/views/applicationBar.html",controller:ServerBarController,controllerAs:"that",bindToController:!0};return directive}angular.module("cgConsole").directive("cwApplicationBar",["consoleApiSvc","applicationSvc","$stateParams","$state","$timeout","commonSvc","analyticsSvc","$filter","stagingSvc",cwApplicationBar])}(),function(){"use strict";function cwApplicationMonitorFileList(){function ApplicationMonitorFileListController(consoleApiSvc,$timeout){var vm=this;return vm.dropDownText="webroot folders",vm.dropDownTooltip="See list of top webroot folders consuming the disk space","db"==vm.type&&(vm.dropDownText="database tables",vm.dropDownTooltip="See list of top database tables consuming the disk space"),void 0==vm.files||null==vm.files?void(vm.element={errorTxt:"No data Available, Please try again later"}):void $timeout(function(){$(".app-monitor-disk_"+vm.type).click(function(){$(this).siblings().slideToggle(800),$(this).toggleClass("inactive")})},0)}var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/applicationMonitorFileList.html",controller:ApplicationMonitorFileListController,controllerAs:"vm",bindToController:!0,scope:{files:"=",type:"@"},link:function($scope,element,attrs){$scope.updateMap=function(size){var units=["KB","MB","GB","TB"],i=parseInt(Math.floor(Math.log(size)/Math.log(1024))),val=Math.round(size/Math.pow(1024,0>i?1:i),2)+" "+units[i];return 0>i?"0 KB":val}}};return directive}angular.module("cgConsole").directive("cwApplicationMonitorFileList",["consoleApiSvc","$timeout",cwApplicationMonitorFileList])}(),function(){"use strict";function cwClusterActions(consoleApiSvc,clusterSvc,$state,memberSvc,toastrSvc){
var directive={restrict:"E",templateUrl:"js/app/views/clusterActions.html",scope:{cluster:"=",clusterModel:"=",updateModel:"&"},link:function(scope,element){scope.$watchGroup(["cluster","clusterModel","updateModel"],function(){function subscribeCluster(cluster_id,operation_id){window.PubSub.subscribe("operation-"+operation_id,function(){scope.clusterModel.clusters[cluster_id]=clusterSvc.clusters.list[cluster_id],angular.isDefined(scope.updateModel)&&scope.updateModel()})}function setScopeVars(){scope.isStartStopDisabled=""!==clusterSvc.clusters.list[cluster_id].operation_type,scope.isRestartDisabled="stopped"==clusterSvc.clusters.list[cluster_id].status,scope.isAddAppDisabled="running"!=clusterSvc.clusters.list[cluster_id].status,scope.isCloneDisabled="running"!=clusterSvc.clusters.list[cluster_id].status,scope.isDeleteDisabled=1==clusterSvc.clusters.list[cluster_id].is_terminated||""!==clusterSvc.clusters.list[cluster_id].operation_type}var cluster_id=scope.cluster.id;setScopeVars(),scope.cloneCluster=function(cluster_id,$event){clusterSvc.clone_cluster(cluster_id,$event)},scope.changeClusterState=function(cluster_id,clusterState){$(".hdr-loader").show(),clusterSvc.changeState(cluster_id,clusterState).then(function(response){$(".hdr-loader").hide(),setScopeVars(),subscribeCluster(cluster_id,response.operation_id)},function(response){$(".hdr-loader").hide()})},scope.restartCluster=function(cluster_id){$(".hdr-loader").show(),clusterSvc.restart(cluster_id).then(function(data){$(".hdr-loader").hide(),subscribeCluster(cluster_id,data.operation_id)},function(){$(".hdr-loader").hide()})},scope.disasterRecovery=function(cluster_id){$state.go("disaster_recovery",{id:cluster_id})},scope.deleteCluster=function(cluster_id){$(".hdr-loader").show(),clusterSvc["delete"](cluster_id).then(function(data){$(".hdr-loader").hide(),setScopeVars()},function(){$(".hdr-loader").hide()})},scope.addApp=function(cluster_id){$state.go("add_new_app",{id:cluster_id})},scope.action=function(type,cluster_id,clusterState,event,isDisabled){if(isDisabled)return!1;switch(type){case"changeClusterState":scope.changeClusterState(cluster_id,clusterState);break;case"restartCluster":scope.restartCluster(cluster_id);break;case"addApp":scope.addApp(cluster_id);break;case"cloneCluster":scope.cloneCluster(cluster_id,event);break;case"disasterRecovery":scope.disasterRecovery(cluster_id,event)}}})}};return directive}angular.module("cgConsole").directive("cwClusterActions",["consoleApiSvc","clusterSvc","$state","memberSvc","toastrSvc",cwClusterActions])}(),function(){"use strict";function cwClusterAppBar(){function clusterAppBarController(consoleApiSvc,applicationSvc,$stateParams,$state,$timeout,commonSvc,analyticsSvc,$filter,clusterSvc){function prepareAppClusterBar(clustersObj){that.appBarClass,that.appBar={app:""},that.appBar.app=$stateParams.id,that.appBar_summery="app-bar_summery",that.go=$state.go.bind($state),that.clusterBar={},that.app=null,that.cluster=null;var app_id=$stateParams.id;return that.analyticsSvc=analyticsSvc,angular.forEach(clustersObj,function(cluster){angular.forEach(cluster.apps,function(app){app.id===app_id&&(that.app=app,that.cluster=cluster)})}),null===that.app&&null===that.cluster?void $state.go("clusters"):(that.clusterBar.cluster=that.cluster.id,that.switchToApp=function(app_id){if("*"===app_id)analyticsSvc.addAnalytics({event_name:"application_switch",app:"Application Listing"}),$state.go("apps");else{var app_label=$filter("filter")(consoleApiSvc.clusters.clusterData[that.cluster.id].apps,{id:app_id})[0].label;analyticsSvc.addAnalytics({event_name:"application_switch",app:app_label,app_id:app_id,cluster_id:that.cluster.id}),$state.go(consoleApiSvc.current.name,{id:app_id})}},that.switchToServersApp=function(){var clusterID=that.clusterBar.cluster;"*"===clusterID?($state.go("clusters"),analyticsSvc.addAnalytics({event_name:"application_page_cluster_switch",cluster:"cluster Listing"})):clusterSvc.clusters.list[clusterID]&&clusterSvc.clusters.list[clusterID].apps&&clusterSvc.clusters.list[clusterID].apps[0]?(analyticsSvc.addAnalytics({event_name:"application_page_cluster_switch",cluster:clusterSvc.clusters.list[clusterID].label}),$state.go(consoleApiSvc.current.name,{id:clusterSvc.clusters.list[clusterID].apps[0].id})):(analyticsSvc.addAnalytics({event_name:"application_page_cluster_switch",cluster:clusterSvc.clusters.list[clusterID].label,cluster_id:clusterID}),$state.go("cluster_detail.access",{id:clusterID}))},that.apps=prepareAppsObj(),that.clusters=prepareServersObj(clustersObj),that.app_bar_regex=consoleApiSvc.getRegex("srv_app_label_special_chars"),void(that.sendSummaryDataToMP=function(event,data){var mpData={};angular.forEach(data,function(val,key){mpData[key]=val}),mpData.event_name=event,analyticsSvc.addAnalytics(mpData)}))}function prepareAppsObj(){var apps={};return angular.forEach(that.cluster.apps,function(app){apps[app.id]={id:app.id,label:app.label,appName:app.application}}),that.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)},consoleApiSvc.sortServerByName(apps,"label")}function prepareServersObj(clustersObj){var clusters={};return angular.forEach(clustersObj,function(cluster){clusters[cluster.id]={id:cluster.id,label:cluster.label,cloud:cluster.cloud}}),that.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)},consoleApiSvc.sortServerByName(clusters,"label")}var that=this;prepareAppClusterBar(clusterSvc.clusters.list),window.PubSub.subscribe("appDeleted",function(){prepareAppClusterBar(clusterSvc.clusters.list)}),that.getPartial=function(partial){return"js/app/modules/member/views/partials/"+partial+".html"},that.isMasterUser=function(){return commonSvc.isMasterUser()},that.updateAppLabel=function(label){clusterSvc.update_app_label($stateParams.id,that.cluster.id,label,that.app).then(function(response){that.apps=prepareAppsObj(),that.app.label=response},function(response){that.apps=prepareAppsObj(),that.app.label=response})}}var directive={restrict:"E",replace:!0,scope:{appBarClass:"="},templateUrl:"js/app/views/clusterAppBar.html",controller:clusterAppBarController,controllerAs:"that",bindToController:!0};return directive}angular.module("cgConsole").directive("cwClusterAppBar",["consoleApiSvc","applicationSvc","$stateParams","$state","$timeout","commonSvc","analyticsSvc","$filter","clusterSvc",cwClusterAppBar])}(),function(){"use strict";function cwClusterBar(){function clusterBarController(consoleApiSvc,$stateParams,toastrSvc,$state,$location,commonSvc,$timeout,clusterSvc,analyticsSvc,toastr,$filter){function prepareClusterBar(){clusterBarVm.clusterBar={cluster:""},clusterBarVm.clusterBar.cluster=$stateParams.id,clusterBarVm.clusterObj=prepareClusterObj(),clusterBarVm.cluster_id=$stateParams.id,clusterBarVm.cluster=clusterSvc.clusters.list[$stateParams.id],clusterBarVm.clusterSize=[],clusterBarVm.server_bar_regex=consoleApiSvc.getRegex("srv_app_label_special_chars");var current_location=$location.path().split("/");clusterBarVm.cluster_detail="",clusterBarVm.go=$state.go.bind($state),clusterBarVm.analyticsSvc=analyticsSvc,angular.isDefined(clusterBarVm.cluster)&&(clusterBarVm.getPartial=function(partial){return"js/app/modules/member/views/partials/"+partial+".html"},clusterBarVm.updateClusterLabel=function(label){update_cluster_label($stateParams.id,label)}),angular.isDefined(current_location[1])&&""!=current_location[1]&&"cluster"===current_location[1]&&angular.isDefined(current_location[3])&&""!=current_location[3]&&(clusterBarVm.cluster_detail="glb-submenu-btm-srv"),clusterBarVm.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)}}function prepareClusterObj(){var servers={};return angular.forEach(clusterSvc.clusters.list,function(cluster){servers[cluster.id]={id:cluster.id,label:cluster.label,cloud:cluster.cloud}}),consoleApiSvc.sortServerByName(servers,"label")}function prepareClusterSpecifications(){clusterBarVm.clusterSpecs=clusterSvc.prepareClusterSpecifications(clusterBarVm.cluster)}function update_cluster_label(cluster_id,label){if(label!==clusterSvc.clusters.list[cluster_id].label){$(".hdr-loader").show();var data={cluster_id:cluster_id,label:label},link="<a href='"+$state.href("cluster_detail.access",{id:cluster_id})+"'>"+label+"</a>",result=consoleApiSvc.callAPI("PUT","api/v1/cluster/"+cluster_id,data,"update_cluster_detail_"+cluster_id);result.then(function(data){$(".hdr-loader").hide(),clusterSvc.clusters.list[cluster_id].label=label,clusterSvc.clusters.list[cluster_id].operation_type="",prepareClusterBar(),toastr.success(link+" label updated successfully","Success")},function(response){$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}}var clusterBarVm=this;prepareClusterBar(),prepareClusterSpecifications(),window.PubSub.subscribe("update_server_bar",function(topic,isSuccess){prepareClusterBar(),prepareClusterSpecifications()})}var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/clusterBar.html",controller:clusterBarController,controllerAs:"clusterBarVm",bindToController:!0};return directive}angular.module("cgConsole").directive("cwClusterBar",["consoleApiSvc","$stateParams","toastrSvc","$state","$location","commonSvc","$timeout","clusterSvc","analyticsSvc","toastr","$filter",cwClusterBar])}(),function(){"use strict";function cwConfirmClick($mdDialog,$mdMedia,consoleApiSvc,deleteTrialServerMsg,deleteClusterMessage,commonSvc){function DialogController($scope,$mdDialog,target_label,confirmationSimple,confirmationMessage,confirmationQuestion,confirmationSection,confirmationMessageClass,serverLabel,confirmClickCustom,mappedStagingApps,appMapped){var vm=this;vm.deleteConfirmation="deleteConfirmation",vm.errors={},vm.serverLabel,vm.admin_loggedin=!1,vm.target_label=target_label,vm.confirmationSimple=confirmationSimple,vm.confirmClickCustom=confirmClickCustom,vm.confirmationMessage=confirmationMessage,vm.confirmationQuestion=confirmationQuestion,vm.confirmationSection=confirmationSection,vm.confirmationMessageClass=confirmationMessageClass,vm.mappedStagingApps=mappedStagingApps,vm.appMapped=appMapped,vm.serverLabel=serverLabel,vm.admin_delete_confirm="",vm.delete_confirm="",angular.isDefined(consoleApiSvc.user.userDetails.admin_loggedin)&&(vm.admin_loggedin=consoleApiSvc.user.userDetails.admin_loggedin),vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){$mdDialog.cancel()},vm["delete"]=function(){$mdDialog.hide()},vm.checkDeleteConfirmation=function(){if(!vm.admin_loggedin&&(angular.isUndefined(vm.delete_confirm)||""===vm.delete_confirm))return vm.deleteConfirmation.delete_confirm.$setValidity("delete_confirm",!1),!1;if(vm.admin_loggedin){var error=null;if((angular.isUndefined(vm.delete_confirm)||""===vm.delete_confirm)&&(vm.deleteConfirmation.delete_confirm.$setValidity("delete_confirm",!1),error=!1),(angular.isUndefined(vm.admin_delete_confirm)||""===vm.admin_delete_confirm)&&(vm.deleteConfirmation.admin_delete_confirm.$setValidity("admin_delete_confirm",!1),error=!1),error===!1)return error}var data={delete_confirm:vm.delete_confirm,admin_delete_confirm:vm.admin_delete_confirm},confirmation=commonSvc.checkDeleteConfirmation(data);return angular.isDefined(confirmation)&&""!=confirmation.key&&""!=confirmation.msg?(vm.deleteConfirmation[confirmation.key].$setValidity(confirmation.key,!1),void(vm.errors[confirmation.key]=confirmation.msg)):void $mdDialog.hide()}}return{priority:1,terminal:!0,link:function(scope,element,attr){var clickAction=attr.cwConfirmClick,target_label=attr.cwConfirmClickTargetLabel,confirmationSimple=attr.cwConfirmClickSimple,confirmClickCustom=attr.cwConfirmClickCustom,confirmationMessage=attr.cwConfirmClickMessage,confirmClickServerId=attr.cwConfirmClickServerId,confirmationQuestion=angular.isDefined(attr.cwConfirmClickQuestion)?attr.cwConfirmClickQuestion:"Please type DELETE to remove ",confirmationSection=attr.cwConfirmClickConfirmationSection,confirmationMessageClass=!1,app_id=attr.cwConfirmClickApp,server_id=attr.cwConfirmClickServer,is_staging=attr.cwConfirmClickIsStaging,mappedStagingApps=[],appMapped=!1;element.bind("click",function(event){if(target_label?confirmationSimple=!1:confirmationSimple||confirmClickCustom||(confirmationSimple="Are you sure you want to delete?"),"delete-trial-server"===confirmationMessage&&"trial"===consoleApiSvc.user.userDetails.customer_type?confirmationMessage=deleteTrialServerMsg:"delete-trial-server"===confirmationMessage&&"trial"!==consoleApiSvc.user.userDetails.customer_type&&(confirmationMessage=null),"deleteCluster"!==confirmationMessage&&"delete-trial-cluster"!==confirmationMessage||(confirmationMessage=deleteClusterMessage,confirmationMessageClass="confirmationMessageClass"),angular.isDefined(is_staging)&&"1"!==is_staging){var ServerApps=[],mappedStaging=[],server=angular.copy(consoleApiSvc.server.serverData[server_id]);angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)ServerApps.push(server.apps[objectKey])}),angular.forEach(server.apps,function(stagingApp){angular.forEach(ServerApps,function(mappedApp){parseInt(app_id)===parseInt(stagingApp.id)&&parseInt(stagingApp.id)===parseInt(mappedApp.source_app_id)&&parseInt(mappedApp.is_staging)&&mappedStaging.push(mappedApp)})}),angular.isDefined(mappedStaging)&&mappedStaging.length>0&&(mappedStagingApps=mappedStaging,appMapped=!0)}angular.isDefined(attr.disabled)&&attr.disabled!==!1||$mdDialog.show({controller:DialogController,controllerAs:"vm",templateUrl:"js/app/views/confirmationBox.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!1,locals:{target_label:target_label,confirmationSimple:angular.isDefined(confirmationSimple)?confirmationSimple:!1,confirmClickCustom:angular.isDefined(confirmClickCustom)?confirmClickCustom:!1,confirmationMessage:angular.isDefined(confirmationMessage)?confirmationMessage:!1,confirmationQuestion:confirmationQuestion,confirmationMessageClass:confirmationMessageClass,confirmationSection:confirmationSection,serverLabel:confirmClickServerId?consoleApiSvc.server.serverData[confirmClickServerId].label:null,mappedStagingApps:mappedStagingApps,appMapped:appMapped}}).then(function(data){scope.$eval(clickAction)},function(){})})}}}angular.module("cgConsole").directive("cwConfirmClick",["$mdDialog","$mdMedia","consoleApiSvc","deleteTrialServerMsg","deleteClusterMessage","commonSvc",cwConfirmClick]),angular.module("cgConsole").directive("autoFocus",function($timeout){return{restrict:"AC",link:function(_scope,_element){$timeout(function(){_element[0].focus()},0)}}})}(),function(){"use strict";function cwConsoleDisabled(consoleApiSvc,$timeout,commonSvc,accountSvc,userActivitySvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){if(scope.status=consoleApiSvc.user.userDetails.is_account_console_disabled,scope.console_disable_message=consoleApiSvc.user.userDetails.console_disable_message,"trial"===consoleApiSvc.user.userDetails.customer_type&&"console_disable_tag"===scope.status){var cwBandwidthAbuseTag=userActivitySvc.getUserTag("trial-bw-abuse");angular.isDefined(cwBandwidthAbuseTag)&&"trial-bw-abuse"===cwBandwidthAbuseTag&&(scope.status="cw_bandwidth_abuse")}scope.template="js/app/views/consoleDisabled.html",scope.reactivateAccount=function(){$(".hdr-loader").show(),accountSvc.reactivateAccount().then(function(){},function(){$(".hdr-loader").hide()})},scope.upgradeAccount=function(){accountSvc.upgradeAccount("trial-bandwidth-abuse")}}}}angular.module("cgConsole").directive("cwConsoleDisabled",["consoleApiSvc","$timeout","commonSvc","accountSvc","userActivitySvc",cwConsoleDisabled])}(),function(){"use strict";function cwCustomChameleonModal(consoleApiSvc,$timeout,$mdDialog,userVerificationSvc,commonSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){function showCustomModal(){$mdDialog.show({controller:chameleonModalController,templateUrl:"js/app/views/chameleon-modal.html",controllerAs:"vmc",parent:angular.element(document.body),clickOutsideToClose:!0})}function chameleonModalController($mdDialog){var vmc=this;vmc.cancel=function(){$mdDialog.hide()}}window.PubSub.subscribe("authCheckDone",function(){var user_ui_data=commonSvc.getUserUiData("cwSignupCustomModal"),is_verified=consoleApiSvc.user.userDetails.is_verified;user_ui_data||angular.isDefined(is_verified)&&!is_verified&&-1!==consoleApiSvc.current.name.indexOf("server_create")&&$timeout(function(){showCustomModal(),commonSvc.setUserUiData("cwSignupCustomModal",1)},5e3)})}}}angular.module("cgConsole").directive("cwCustomChameleonModal",["consoleApiSvc","$timeout","$mdDialog","userVerificationSvc","commonSvc",cwCustomChameleonModal])}(),function(){"use strict";function cwEmptyListing(consoleApiSvc,$location,$state,$mdDialog,apiAccessSvc,operationSvc,memberSvc,userVerificationSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{screen:"@",callBack:"&"},link:function(scope,element,attr){function TakeTourController(videoLink,$mdDialog){var vm=this;vm.videoLink=videoLink,vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){$mdDialog.cancel()}}var location=$location.path().split("/"),templateVars={server:{content:"Your Managed servers will be listed here. Let's launch the first one, it's super simple :)",KBlink:"#",videoLink:"",urlText:"launch","class":"cw-action-bar-icon-server",pageLink:"server_create"},clusters:{content:"Your Managed clusters will be listed here. Let's launch the first one, it's super simple :)",KBlink:"#",videoLink:"",urlText:"launch","class":"cw-action-bar-icon-cluster",pageLink:"cluster_create"},apps:{content:"Your super fast Apps will be listed here. Let's Launch the first one, it's super simple :)",KBlink:"#",videoLink:"",urlText:"launch","class":"cw-action-bar-icon-apps",pageLink:"server_create"},projects:{content:"Cloudways offers a way to sort/categorize  your Apps into different Projects/Clients. Your Projects will be listed here",KBlink:"https://support.cloudways.com/create-new-project/",videoLink:"",urlText:"Add New Project","class":"cw-action-bar-icon-projects",pageLink:"create_project"},team:{content:"It ain't fun to work alone. Cloudways make Collaborations super easy, yet highly customizable. Invite your team members and assign different roles on your chosen servers and apps.",KBlink:"https://support.cloudways.com/collaborate-project-with-team-feature/#tab-2",videoLink:"team",urlText:"Add New Team Member","class":"cw-action-bar-icon-team",pageLink:"team_create"},bot:{content:"Notifications allow you to subscribe to get automated notifications for several different events across your servers, applications, and account. With Notifications, you can get notifications on several support channels, such as Slack, emails, etc.",KBlink:"https://support.cloudways.com/collaborate-project-with-team-feature/#tab-2",videoLink:"integration",urlText:"ADD NEW NOTIFICATION","class":"cw-action-bar-icon-integrations",pageLink:"integration_add"},alert:{content:"You will see various alerts, recommendations, and tips generated by CloudwaysBot here. These will be specific to your applications and/or your servers. If you have configured Notifications for these alerts, you will receive updates on various channels as well.",KBlink:"#",videoLink:"",urlText:"","class":"cw-action-bar-icon-integrations",pageLink:""},api:{content:"Cloudways Platform API provides the power, flexibility and ease of use of the Cloudways Platform <br class='hide show-lg'/> through a simple to use API. By generating an API secret key, you can begin using the API.<br class='hide show-lg'/> An interactive, online API playground is also available along with detailed documentation.",KBlink:"#",videoLink:"",urlText:"GENERATE API KEY","class":"cw-action-bar-icon-api-list",pageLink:"generate_api"}},blockedMessage={team:" To add team member(s), you need to verify your account first.",projects:" To add project(s) to your account, you need to verify your account first.",general:"To perform this action, you first need to verify your account"};if(scope.isEmptyApps=!1,scope.disableLaunch=!1,scope.disableLaunchMessage='<i class="mdi mdi-information"></i> ',!memberSvc.isMemberLoggedIn()&&angular.isDefined(consoleApiSvc.user.userDetails.is_verified)&&!consoleApiSvc.user.userDetails.is_verified&&angular.isDefined(scope.screen)&&location[1]==scope.screen&&(scope.disableLaunch=!0,scope.disableLaunchMessage=scope.disableLaunchMessage+(blockedMessage[scope.screen]?blockedMessage[scope.screen]:blockedMessage.general)),angular.isDefined(location[1])&&""!=location[1]&&(scope.viewVars=templateVars[location[1]]),scope.gotoPage=function(page){(!userVerificationSvc.isBtnDisable()||"create_project"!=page&&"team_create"!=page)&&("generate_api"===page?scope.generate_api():$state.go(page))},scope.generate_api=function(){scope.preloader=!0,scope.message=operationSvc.getOperationLessMessage("api","generateApi"),apiAccessSvc.apiKeyFetched=!1,apiAccessSvc.getApiKey("POST",null,"getApiKey_"+consoleApiSvc.user.userDetails.id).then(function(response){$(".hdr-loader").hide(),scope.preloader=!1,scope.message="",scope.callBack()})},scope.video=function(link,$event){var confirm=$mdDialog.confirm({controller:TakeTourController,controllerAs:"vm",templateUrl:"js/app/views/takeTour.html",locals:{videoLink:link},parent:angular.element(document.body),targetEvent:$event,clickOutsideToClose:!0});$mdDialog.show(confirm).then(function(){})},1===Object.keys(consoleApiSvc.server.serverData).length){var server_id=Object.keys(consoleApiSvc.server.serverData)[0];angular.isDefined(consoleApiSvc.server.serverData[server_id].operations)&&"add_server"===consoleApiSvc.server.serverData[server_id].operations[0].type&&"0"===consoleApiSvc.server.serverData[server_id].operations[0].is_completed&&"apps"===consoleApiSvc.current.name&&(templateVars.apps.pageLink="",templateVars.apps.videoLink="",templateVars.apps.KBlink="#",templateVars.apps.content="Your super fast Apps will be listed here after your Server is ready!")}scope.template="js/app/views/cwEmptyListing.html"}}}angular.module("cgConsole").directive("cwEmptyListing",["consoleApiSvc","$location","$state","$mdDialog","apiAccessSvc","operationSvc","memberSvc","userVerificationSvc",cwEmptyListing])}(),function(){"use strict";function cwFabMenu(applicationSvc,$rootScope,consoleApiSvc,$mdDialog,$mdMedia,serverActionsSvc,$state,$compile,memberSvc,$location,commonSvc,clusterSvc,$timeout,$filter,operationSvc,cloudBotSvc,serverFabMenuSvc,analyticsSvc,deleteClusterMessage,deleteTrialServerMsg,stagingSvc,diskUsageSvc,blockStorageSvc,platformPollingSvc,serverConfigsSvc,$sce){var directive={restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{topDirections:"@",bottomDirections:"@",isOpen:"=",availableModes:"@",selectedMode:"@",availableDirections:"@",selectedDirection:"@",addProject:"@",deleteProject:"=",project:"=",addMember:"@",deleteMember:"=",member:"=",addServer:"@",addTeam:"@",serverId:"=",clusterId:"=",serverState:"=",clusterState:"=",appId:"=",addApp:"@",deleteApp:"=",cloneApp:"=",cloneAppToOtherServer:"=",deleteIntegration:"=",integration:"=",startStopServer:"=",restartServer:"@",deleteServer:"@",cloneServer:"@",type:"@",serverTransfer:"@",addCluster:"@",startStopCluster:"=",deleteCluster:"@"},link:function(scope,element,attr){scope.analyticsSvc=analyticsSvc,scope.fabIcon=!1,scope.appMapped=!1;var location=$location.path().split("/"),routes=["apps","server","projects","team"];angular.isDefined(location[1])&&""!=location[1]&&-1!=routes.indexOf(location[1])&&!location[3]?scope.fabIcon=!0:scope.fabIcon=!1;if(angular.isDefined(scope.serverId)&&(scope.server=consoleApiSvc.server.serverData[scope.serverId],scope.server_label=scope.server.label,scope.appId&&angular.forEach(scope.server.apps,function(app){parseInt(app.id)===parseInt(scope.appId)&&(scope.app=app)})),angular.isDefined(scope.app)&&angular.isDefined(scope.app.is_staging)&&"1"!==scope.app.is_staging){var ServerApps=[],mappedStaging=[],server=angular.copy(consoleApiSvc.server.serverData[scope.server.id]);angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)ServerApps.push(server.apps[objectKey])}),angular.forEach(server.apps,function(stagingApp){angular.forEach(ServerApps,function(mappedApp){parseInt(scope.app.id)===parseInt(stagingApp.id)&&parseInt(stagingApp.id)===parseInt(mappedApp.source_app_id)&&parseInt(mappedApp.is_staging)&&mappedStaging.push(mappedApp)})}),angular.isDefined(mappedStaging)&&mappedStaging.length>0&&(scope.mappedStagingApps=mappedStaging,scope.appMapped=!0)}switch(scope.isPrimaryUser=!memberSvc.isMemberLoggedIn(),scope.isChildMemember=memberSvc.isMemberLoggedIn(),scope.isMasterUser=commonSvc.isMasterUser(),scope.isCloneAppItemHide=angular.isDefined(scope.app)?stagingSvc.isDisableCloneItem(scope.app.is_staging):!0,scope.$watchGroup(["topDirections","bottomDirections","isOpen","availableModes","selectedMode","availableDirections","selectedDirection","addProject","deleteProject","project","addMember","deleteMember","member","deleteApp","addCluster","serverId","appId","startStopServer","clusterState","startStopCluster","restartServer","deleteServer","deleteCluster","serverTransfer","cloneServer","serverState","type","deleteIntegration","integration"],function(){function showSelectServerDialog(from_page){$rootScope.preventNavigation();var disabledOptions=[];memberSvc.isSectionPermitted(scope.serverId,"app-add")||disabledOptions.push("same"),memberSvc.isSectionPermitted(null,"server-add")||disabledOptions.push("new");for(var i in consoleApiSvc.server.serverData)memberSvc.isSectionPermitted(i,"app-add")||disabledOptions.push(i);$mdDialog.show({controller:CloneDialogController,controllerAs:"vm",templateUrl:"js/app/views/partials/select-server.html",parent:angular.element(document.body),clickOutsideToClose:!1,locals:{servers:consoleApiSvc.server.serverData,app_id:scope.appId,server_id:scope.serverId,disabledOptions:disabledOptions,userType:scope.customer_type,isTrialUserExpired:consoleApiSvc.isTrialUserExpired}}).then(function(response){var serverData=response.serverData,stagingEnv=response.staging?response.staging:!1;$rootScope.allowNavigation();var type=-1!==["new","same"].indexOf(serverData)?serverData:"other",option=stagingEnv?"Clone staging app to "+type+" server":"Clone app to "+type+" server",type=stagingEnv?"staging_app":"app";scope.sendDataToMP(type,{option:option}),"new"===serverData?angular.isDefined(stagingEnv)&&stagingEnv?$state.go("server_clone_staging",{id:scope.serverId,appId:scope.appId}):$state.go("server_clone",{id:scope.serverId,appId:scope.appId}):"same"===serverData?applicationSvc.clone_app(scope.appId,scope.serverId,stagingEnv):applicationSvc.clone_app_on_other_server(scope.appId,scope.serverId,serverData,stagingEnv),sendMixpanelEvent()},function(){$rootScope.allowNavigation()})}function CloneDialogController($mdDialog,servers,app_id,server_id,disabledOptions,userType,isTrialUserExpired){function addEventToMixPanel(action,event){event.event_name="server_clone_action",event.action=action,analyticsSvc.addAnalytics(event)}function onValidatingNewServer($mdDialog,object){vm.errors={},vm.loaderMessage="CLONE_DISK_USAGE_LOADER",vm.showNotificationIcon=!1,vm.showloader=!0,vm.isAvailable=!1,vm.proceedAnyway=!1,vm.isBtnDisabled=!1;var errorState={proceedAnyway:!1,isBtnDisabled:!1};serverConfigsSvc.getServerpackages(vm.serverId).then(function(response){vm.serverPackages=response[vm.serverId];var serverPackage=serverConfigsSvc.packageExist(vm.serverPackages),DBPackage="Mysql 5.5";angular.isDefined(serverPackage.name)&&null!=serverPackage.name&&(DBPackage=serverPackage.name.charAt(0).toUpperCase()+serverPackage.name.slice(1),DBPackage=DBPackage+" "+vm.serverPackages[serverPackage.name]),angular.isDefined(serverPackage.status)&&serverPackage.status?(vm.mixPanelObject={},vm.proceedAnyway=!0,vm.errors[serverPackage.name]="Please note that the new server will use MariaDB 10.1 as database engine, instead of "+DBPackage+" used in the current one. More information <a class='glb-error-msg' href='https://support.cloudways.com/mariadb-the-cloudways-choice-for-the-database/' target='_blank'>here</a>",angular.isDefined(object.staging)&&object.staging&&(vm.errors[serverPackage.name]="Note that the new server will have a database (Mariadb 10.1) that doesn't support direct migration from the current server one ("+DBPackage+"). To be able to perform the operation, please change the database on this server to Mariadb 10.1 following this <a class='glb-error-msg' href='https://support.cloudways.com/upgrade-mysql-database-to-mariadb/' target='_blank'>process</a>.",vm.proceedAnyway=!1,vm.isBtnDisabled=!0),vm.mixPanelObject.message=vm.errors[serverPackage.name],vm.mixPanelObject.application_id=vm.appId,vm.mixPanelObject["package"]=DBPackage,vm.mixPanelObject.server_id=vm.serverId,vm.mixPanelObject.is_staging=angular.isDefined(object.staging)&&object.staging?1:0,vm.showloader=!1,serverConfigsSvc.packageVersionValidated=!0):$mdDialog.hide(object)},function(){vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage="We are unable to check the requirements. Please retry or contact support if the problem persists.",Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)})}function onSubmitServer(destinationType,$mdDialog,object){vm.errors={},vm.loaderMessage="CLONE_DISK_USAGE_LOADER",vm.showNotificationIcon=!1,vm.showloader=!0,vm.isAvailable=!1,vm.proceedAnyway=!1,vm.isBtnDisabled=!1;var errorState={proceedAnyway:!1,isBtnDisabled:!1,packages:[]},sourceCheck="same"!==destinationType&&"new"!==destinationType;applicationSvc.checkPackageVersions(scope.serverId,destinationType).then(function(response){errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0,response.status||(vm.errors=response.message,errorState.packages=response.packages,angular.isDefined(response.isPHPWarning)&&response.isPHPWarning?(errorState.proceedAnyway=response.isPHPWarning,errorState.isBtnDisabled=!1):(errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0)),$rootScope.publish("packageVersionsValidated")},function(){errorState.proceedAnyway=!1,errorState.isBtnDisabled=!0,$rootScope.publish("packageVersionsValidated")}),window.PubSub.subscribe("packageVersionsValidated",function(){applicationSvc.checkDiskUsage(scope.appId,scope.serverId,destinationType).then(function(response){angular.isDefined(response.status)&&response.status&&angular.isDefined(response.operation_id)?(response.data=response,scope.fetchExistingServerDiskUsage=!1,angular.isDefined(response.data.operation_id)&&response.data.operation_id?(scope.fetchExistingServerDiskUsage=sourceCheck,platformPollingSvc.startPlatformPolling(scope.serverId,response.data.operation_id,1,"ansible"),window.PubSub.subscribe("platform_operation-"+response.data.operation_id,function(msg,isSuccess){var messageParams=platformPollingSvc.operation.parameters[scope.serverId];responseAfterOperationSuccess(isSuccess,destinationType,$mdDialog,object,response,errorState,messageParams)})):(vm.showNotificationIcon=!0,vm.isAvailable=response.isAvailable,vm.errors={},vm.errors.diskUsage=null===response.data?"We are unable to check the requirements. Please retry or contact support if the problem persists.":response.data.message[0],Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,
angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1),angular.equals(vm.errors,{})||(vm.hideNoteError=!1),vm.showloader=!1)):(vm.showloader=!1,angular.isDefined(response.message)?toastrSvc.error(message):toastrSvc.error("An unexpected error has occurred"))}),$rootScope.unsubscribe("packageVersionsValidated")})}function responseAfterOperationSuccess(isSuccess,destinationType,$mdDialog,object,response,errorState,messageParams){if(isSuccess){var sourceDiskUsage=diskUsageSvc.calculateDiskUsageFromMiddleware(scope.serverId);diskUsageSvc.fetchDestinationDiskUsage(scope.fetchExistingServerDiskUsage,sourceDiskUsage,scope.serverId,destinationType).then(function(message){if(angular.isDefined(message)&&""!==message?(vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors.diskUsage=message,vm.isBlock=!0):angular.isDefined(message)&&""===message&&(vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!0,vm.isBlock=!0,vm.message="Please wait while we are checking the requirements for the Staging/Cloning operation"),vm.mixPanelObject={},vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,0===Object.keys(vm.errors).length)$timeout(function(){$mdDialog.hide(object)},1e3);else if(vm.isBlock){1===Object.keys(vm.errors).length&&vm.proceedAnyway&&angular.isDefined(vm.selectServerForm)?vm.selectServerForm.$setValidity("submitServer",!0):Object.keys(vm.errors).length>1&&angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1);for(var key in vm.errors)if(/unabletoclone|db/.test(key))var dbPackage=key;if(angular.isDefined(dbPackage)){$compile(vm.errors[dbPackage]);vm.mixPanelObject.application_id=vm.appId,vm.mixPanelObject.source_package=errorState.packages.mysql.source,vm.mixPanelObject.destination_package=errorState.packages.mysql.destination,vm.mixPanelObject.server_id=vm.serverId,vm.mixPanelObject.destination_server_id=destinationType,vm.mixPanelObject.is_staging=angular.isDefined(object.staging)&&object.staging?1:0}}angular.equals(vm.errors,{})||(vm.hideNoteError=!1)},function(message){vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage=angular.isDefined(message.data.message)?message.data.message[0]:"We are unable to check the requirements. Please retry or contact support if the problem persists.",Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)})}else vm.showNotificationIcon=!0,vm.showloader=!1,vm.isAvailable=!1,vm.errors={},vm.errors.diskUsage=angular.isDefined(response.data.message)?response.data.message[0]:"We are unable to check the requirements. Please retry or contact support if the problem persists.",angular.isDefined(messageParams)&&angular.isDefined(messageParams.message)&&(vm.errors.diskUsage=messageParams.message),Object.keys(vm.errors).length>1&&errorState.proceedAnyway&&(errorState.proceedAnyway=!1),vm.proceedAnyway=errorState.proceedAnyway,vm.isBtnDisabled=errorState.isBtnDisabled,angular.equals(vm.errors,{})||(vm.hideNoteError=!1),angular.isDefined(vm.selectServerForm)&&vm.selectServerForm.$setValidity("submitServer",!1)}var vm=this;vm.server="",vm.disabledOptions=disabledOptions,vm.servers=angular.copy(servers),vm.isServerCloneEnabled=!0,vm.stagingActivate="",vm.appId=app_id,vm.serverId=server_id,vm.currentServer={},vm.isBtnDisabled=!1,vm.errors="",vm.hideNoteError=!0,"trial"===userType&&(isTrialUserExpired||Object.keys(vm.servers).length>0)&&(vm.isServerCloneEnabled=!1),angular.forEach(vm.servers,function(server){angular.isDefined(server.apps)&&angular.forEach(server.apps,function(app){parseInt(app.id)===parseInt(app_id)&&angular.isDefined(vm.servers[server.id])&&(vm.currentServer.label=vm.servers[server.id].label,vm.currentServer.cloud=vm.servers[server.id].cloud,delete vm.servers[server.id])})}),window.scrollTo(0,0),vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){angular.isDefined(vm.mixPanelObject)&&Object.keys(vm.mixPanelObject).length&&addEventToMixPanel("Cancel",vm.mixPanelObject),$mdDialog.cancel()},vm.selectServer=function(data,stagingEnv,proceedAnyway){var object={serverData:data,staging:stagingEnv};return proceedAnyway?(angular.isDefined(vm.mixPanelObject)&&Object.keys(vm.mixPanelObject).length&&addEventToMixPanel("proceed",vm.mixPanelObject),vm.selectServerForm.$setValidity("submitServer",!0),void $mdDialog.hide(object)):void("new"!==data?onSubmitServer(data,$mdDialog,object):onValidatingNewServer($mdDialog,object))},vm.onChangeServer=function(){vm.showNotificationIcon=!1,vm.hideNoteError=!0,vm.showloader=!1,vm.message="",vm.errors="",vm.proceedAnyway=!1,vm.isBtnDisabled=!1,vm.selectServerForm.$setValidity("submitServer",!0)},vm.applySanitization=function(error){return $sce.trustAsHtml(error)},vm.isShowLoader=function(){return!!vm.showloader},vm.isError=function(){return Object.keys(vm.errors).length}}function DialogController($scope,$mdDialog,target_label,confirmationSimple,confirmationQuestion,serverLabel,confirmationMessage,confirmationMessageClass,appMapped,mappedStagingApps,confirmationSection){var vm=this;vm.deleteConfirmation="deleteConfirmation",vm.errors={},vm.delete_confirm="",vm.admin_delete_confirm="",vm.admin_loggedin=!1,vm.target_label=target_label,vm.confirmationSimple=!1,vm.confirmationQuestion=confirmationQuestion,vm.confirmationMessage=confirmationMessage,vm.confirmationMessageClass=confirmationMessageClass,vm.appMapped=appMapped,vm.mappedStagingApps=mappedStagingApps,vm.confirmationSection=confirmationSection,vm.serverLabel=serverLabel,angular.isDefined(consoleApiSvc.user.userDetails.admin_loggedin)&&(vm.admin_loggedin=consoleApiSvc.user.userDetails.admin_loggedin),vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){$mdDialog.cancel()},vm["delete"]=function(){$mdDialog.hide()},vm.checkDeleteConfirmation=function(){if(!vm.admin_loggedin&&(angular.isUndefined(vm.delete_confirm)||""===vm.delete_confirm))return vm.deleteConfirmation.delete_confirm.$setValidity("delete_confirm",!1),!1;if(vm.admin_loggedin){var error=null;if((angular.isUndefined(vm.delete_confirm)||""===vm.delete_confirm)&&(vm.deleteConfirmation.delete_confirm.$setValidity("delete_confirm",!1),error=!1),(angular.isUndefined(vm.admin_delete_confirm)||""===vm.admin_delete_confirm)&&(vm.deleteConfirmation.admin_delete_confirm.$setValidity("admin_delete_confirm",!1),error=!1),error===!1)return error}var data={delete_confirm:vm.delete_confirm,admin_delete_confirm:vm.admin_delete_confirm},confirmation=commonSvc.checkDeleteConfirmation(data);return angular.isDefined(confirmation)&&""!=confirmation.key&&""!=confirmation.msg?(vm.deleteConfirmation[confirmation.key].$setValidity(confirmation.key,!1),void(vm.errors[confirmation.key]=confirmation.msg)):void $mdDialog.hide()}}function sendMixpanelEvent(){angular.equals(scope.mp_obj,{})||(analyticsSvc.addAnalytics(scope.mp_obj),scope.mp_obj={})}scope.isOrientationMobile=!1,scope.selectedDirection=scope.selectedDirection||"up",scope.selectedMode=scope.selectedMode||"md-scale",scope.customer_type=consoleApiSvc.user.userDetails.customer_type,$(window).width()<600&&(scope.isOrientationMobile=!0),scope.isAddServerDisabled=!memberSvc.isSectionPermitted(null,"server-add"),scope.serverId?(scope.isStartStopDisabled=!memberSvc.isSectionPermitted(scope.serverId,"server-actions"),scope.isRestartDisabled=!memberSvc.isSectionPermitted(scope.serverId,"server-actions")||"stopped"==scope.server.status,scope.isAddAppDisabled=!memberSvc.isSectionPermitted(scope.serverId,"app-add")||"running"!=scope.server.status,scope.isCloneServerDisabled=!memberSvc.isSectionPermitted(scope.serverId,"server-clone")||!memberSvc.isSectionPermitted(null,"server-add")||"running"!=scope.server.status||"trial"===scope.customer_type,scope.isDeleteServerDisabled=!memberSvc.isSectionPermitted(scope.serverId,"server-delete")||1==scope.server.is_terminated):scope.clusterId&&(scope.isStartStopDisabled=""!==clusterSvc.clusters.list[scope.clusterId].operation_type,scope.isAddAppDisabled="running"!=clusterSvc.clusters.list[scope.clusterId].status,scope.isCloneDisabled="running"!=clusterSvc.clusters.list[scope.clusterId].status,scope.isDeleteDisabled=1==clusterSvc.clusters.list[scope.clusterId].is_terminated||""!==clusterSvc.clusters.list[scope.clusterId].operation_type),scope.delete_member=function(event){scope.confirmation("delete_member",event,commonSvc.deleteMember,[scope.member.id],scope.member.name)},scope.delete_integration=function(event){scope.confirmation("delete_integration",event,cloudBotSvc.deleteAlert,[scope.integration.id],scope.integration.name)},scope.delete_project=function(event){scope.confirmation("delete_project",event,commonSvc.deleteProject,[scope.project.id],scope.project.name)},scope.delete_app=function(event){scope.confirmation("delete_app",event,applicationSvc.delete_app,[scope.appId,scope.serverId],scope.app.label,scope.appMapped,scope.mappedStagingApps)},scope.clone_app=function(){applicationSvc.clone_app(scope.appId,scope.serverId)},scope.clone_app_to_other_server=function(from_page){showSelectServerDialog(from_page)},scope.clone_staging_app=function(from_page){var staging=!0;showSelectServerDialog(from_page,staging)},scope.start_stop_server=function(){$(".hdr-loader").show(),serverActionsSvc.changeState(scope.serverId,scope.serverState).then(function(){$(".hdr-loader").hide(),sendMixpanelEvent(),$state.go("server")},function(){$(".hdr-loader").hide()})},scope.restart_server=function(){$(".hdr-loader").show(),serverActionsSvc.restart(scope.serverId).then(function(){$(".hdr-loader").hide(),sendMixpanelEvent(),$state.go("server")},function(){$(".hdr-loader").hide()})},scope.delete_server=function($event){"full"===scope.customer_type&&"primary"===consoleApiSvc.user.userDetails.type&&angular.isUndefined(consoleApiSvc.user.userDetails.admin_loggedin)?serverActionsSvc.deleteServerDialog($event,scope.serverId):scope.confirmation("delete_server",event,serverActionsSvc["delete"],[scope.serverId],scope.server_label)},scope.clone_server=function($event){serverActionsSvc.clone_server(scope.serverId,$event),sendMixpanelEvent()},scope.redirectTo=function(target,id){target&&id?$state.go(target,{id:id}):$state.go(target)},scope.sendDataToMP=function(type,data){switch(scope.mp_obj={event_name:type+"_floating_icon",from_page:type+" detail - floating Icon",option:data.option},type){case"application":scope.mp_obj.app_id=scope.appId,scope.clusterId&&!scope.serverId?scope.mp_obj.cluster_id=scope.clusterId:scope.serverId&&!scope.clusterId&&(scope.mp_obj.server_id=scope.serverId);break;case"server":scope.mp_obj.server_id=scope.serverId;break;case"cluster":scope.mp_obj.cluster_id=scope.clusterId}},scope.start_stop_cluster=function(){$(".hdr-loader").show(),clusterSvc.changeState(scope.clusterId,scope.clusterState).then(function(){$(".hdr-loader").hide(),sendMixpanelEvent(),$state.go("clusters")},function(){$(".hdr-loader").hide()})},scope.delete_cluster=function(event){scope.confirmation("delete_cluster",event,clusterSvc["delete"],[scope.clusterId])},scope.isDisableCloneItem=function(is_staging){return!parseInt(is_staging)},scope.actionCall=function(state,state_id){state_id?(sendMixpanelEvent(),$state.go(state,{id:state_id})):(sendMixpanelEvent(),$state.go(state))},scope.serverTransferInit=function(event){serverFabMenuSvc.serverTransferInit(scope.serverId,event),sendMixpanelEvent()},scope.confirmation=function(type,event,callback,args,target_label,appMapped,mappedStagingApps,confirmationSimple){var confirmationQuestion,section={delete_project:"Project",delete_server:"server",delete_app:"Application",delete_member:"Team Member",delete_integration:"Channel",delete_cluster:"Cluster"};target_label?confirmationSimple=!1:confirmationSimple||(confirmationSimple="Are you sure you want to delete?");var serverLabel=null,confirmationMessage=!1,confirmationMessageClass=!1;angular.isDefined(section[type])&&(confirmationQuestion="Please type DELETE to remove your "+section[type],"Cluster"===section[type]&&(confirmationMessage=deleteClusterMessage,confirmationMessageClass="confirmationMessageClass"),"server"===section[type]&&"trial"===consoleApiSvc.user.userDetails.customer_type&&(confirmationMessage=deleteTrialServerMsg),"server"===section[type]&&(serverLabel=consoleApiSvc.server.serverData[parseInt(args)].label)),$mdDialog.show({controller:DialogController,controllerAs:"vm",templateUrl:"js/app/views/confirmationBox.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!1,locals:{target_label:target_label,confirmationSimple:angular.isDefined(confirmationSimple)?confirmationSimple:!1,confirmationQuestion:confirmationQuestion,serverLabel:serverLabel,confirmationMessage:confirmationMessage,confirmationMessageClass:confirmationMessageClass,appMapped:appMapped,mappedStagingApps:mappedStagingApps,confirmationSection:section[type]}}).then(function(data){$(".hdr-loader").show(),callback.apply(this,args).then(function(){"delete_app"===type&&$state.go("server"),"delete_project"===type&&$state.go("projects"),"delete_member"===type&&($(".hdr-loader").hide(),memberSvc.addMembersToServerList(),memberSvc.getMembersToApp(),$state.go("team")),"delete_server"===type&&$state.go("server"),"delete_integration"===type&&$state.go("integration_list"),"delete_cluster"===type&&$state.go("clusters"),sendMixpanelEvent()},function(){$(".hdr-loader").hide()})},function(){$(".hdr-loader").hide()})},scope.addContentDeactivator=function(){return $("body").hasClass("content-deactivator-body")?void commonSvc.removeContentDeactivator():void $timeout(function(){$("md-fab-speed-dial").addClass("content-deactivator-md-fabspeeddial"),$("html").addClass("content-deactivator-html"),$("body").addClass("content-deactivator-body"),$(".glb-fab-dial-1"),$("#content-deactivator").show()},100)},$("#content-deactivator").click(function(){commonSvc.removeContentDeactivator()}),$("md-fab-speed-dial").click(function(){$("md-fab-speed-dial").hasClass("content-deactivator-md-fabspeeddial")&&commonSvc.removeContentDeactivator()})}),scope.type){case"apps":scope.template="js/app/views/fabMenuApp.html";break;case"server":scope.template="js/app/views/fabMenuServer.html";break;case"project":scope.template="js/app/views/fabMenuProject.html";break;case"team":scope.template="js/app/views/fabMenuTeam.html";break;case"integration":scope.template="js/app/views/fabMenuIntegration.html";break;case"cluster":scope.template="js/app/views/fabMenuCluster.html";break;case"clusterApp":scope.template="js/app/views/fabMenuClusterApp.html";break;default:scope.template="js/app/views/fabMenu.html"}}};return directive}angular.module("cgConsole").directive("cwFabMenu",["applicationSvc","$rootScope","consoleApiSvc","$mdDialog","$mdMedia","serverActionsSvc","$state","$compile","memberSvc","$location","commonSvc","clusterSvc","$timeout","$filter","operationSvc","cloudBotSvc","serverFabMenuSvc","analyticsSvc","deleteClusterMessage","deleteTrialServerMsg","stagingSvc","diskUsageSvc","blockStorageSvc","platformPollingSvc","serverConfigsSvc","$sce",cwFabMenu])}(),function(){"use strict";function cwFocusNextInput(){return{restrict:"A",link:function(scope,element,attribute){element.on("input",function(e){if(element.val().length===parseInt(element.attr("maxlength"))){var partsId=attribute.id.match(/focus(\d+)/),currentId=parseInt(partsId[1]),$nextElement=document.querySelector("#focus"+(currentId+1));angular.isDefined(scope.vm.data.sms_code)&&scope.vm.data.sms_code.length>0&&(scope.vm.data.sms_code[currentId-1]=parseInt(element[0].value)),$nextElement&&$nextElement.focus()}})}}}angular.module("cgConsole").directive("cwFocusNextInput",cwFocusNextInput)}(),function(){"use strict";function cwFocusPreviousInput(){return{restrict:"A",link:function(scope,element,attribute){element.on("keydown",function(e){var key=e.keyCode||e.charCode;if("INPUT"==e.target.nodeName){var partsId=attribute.id.match(/focus(\d+)/),currentId=parseInt(partsId[1]);if(8==key||46==key){var $currentElement=document.querySelector("#focus"+currentId),$previousElement=document.querySelector("#focus"+(currentId-1));angular.isDefined(scope.vm.data.sms_code)&&delete scope.vm.data.sms_code[currentId-1],angular.isDefined(scope.vm.data.tfa_code)&&delete scope.vm.data.tfa_code[currentId-1],$previousElement&&($currentElement.value="",$previousElement.focus(),e.preventDefault())}if(39==key){var $nextElement=document.querySelector("#focus"+(currentId+1));$nextElement&&$nextElement.focus()}else if(37==key){var $nextElement=document.querySelector("#focus"+(currentId-1));$nextElement&&$nextElement.focus()}}})}}}angular.module("cgConsole").directive("cwFocusPreviousInput",cwFocusPreviousInput)}(),function(){"use strict";function cwFormError(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ctrl){element.on("blur",function(){scope.$apply(function(){ctrl.$setValidity(attrs.field,!0)})})}}}angular.module("cgConsole").directive("cwFormError",cwFormError)}(),function(){"use strict";function cwFormErrorRemove(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ctrl){element.change(function(){scope.$apply(function(){ctrl.$setValidity(attrs.field,!0)})})}}}angular.module("cgConsole").directive("cwFormErrorRemove",cwFormErrorRemove)}(),function(){"use strict";function cwHelloBar(consoleApiSvc,restrictedFeaturesSvc){var directive={restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{helloBarStatus:"=",isAdminLoggedin:"=",isGuestPage:"="},link:function(scope,element,attr){scope.showHellowBar=!1,window.PubSub.subscribe("appRendered",function(){scope.$watchGroup(["helloBarStatus","isAdminLoggedin"],function(){scope.helloBarStatus&&!scope.isAdminLoggedin&&(scope.showHellowBar=!0,scope.message="Our email provider is currently down for planned maintenance that is estimated to last for up to 10 hours. Visit our Status Page for further updates.",scope.linkTitle="Status Page",scope.linkHref="http://status.cloudways.com/",scope.template="js/app/views/cwHelloBar.html")})}),window.PubSub.subscribe("servers-fetched",function(){if(!scope.helloBarStatus&&!scope.isAdminLoggedin&&consoleApiSvc.restricted_features){var core_service=restrictedFeaturesSvc.isCoreServiceDisabled();angular.equals(core_service,{})||(scope.showHellowBar=!0,scope.message=core_service.message,scope.trialUserClass="trial"===consoleApiSvc.user.userDetails.customer_type?"trial-bar-top-position":"")}scope.template="js/app/views/cwHelloBar.html"}),angular.isDefined(scope.isGuestPage)&&scope.isGuestPage&&(scope.message="Our email provider is currently down for planned maintenance that is estimated to last for up to 10 hours. Please visit our<a href='http://status.cloudways.com/' class='glb-link' target='_blank'>Staus Page</a>for further updates.",scope.template="js/app/views/cwGuestHelloBar.html")}};return directive}angular.module("cgConsole").directive("cwHelloBar",["consoleApiSvc","restrictedFeaturesSvc",cwHelloBar])}(),function(){"use strict";function cwIsStagingOrphan($compile,consoleApiSvc,stagingSvc){var directive={restrict:"E",replace:!0,scope:{server:"=server",serverId:"=",appId:"="},link:function(scope,element,attr){scope.$watch("operation",function(){scope.loaderKeyExists="";var userDetails=consoleApiSvc.user.userDetails;scope.enableLoader=function(){if("secondary"!==userDetails.type)if(scope.appId&&parseInt(scope.userAppId)!==parseInt(scope.appId)&&"cwStagingOrphan"!==scope.loaderKeyExists){var mappedApps=stagingSvc.isStagingOrphan(scope.serverId,scope.appId);if(mappedApps&&mappedApps.length<=0){var message="The Live Application linked to this Staging Application has been deleted.",htmlText='<div flex layout="row" class="strip-dismiss glb-margin-btm10" layout-align="space-between center"> <div flex><i class="mdi mdi-alert"></i>'+message+'</div> <a href="javascript:void(0);"class="glb-link-blue" ng-click="postSyncLoader();">Dismiss</a></div>';element.html(htmlText),$compile(element.contents())(scope)}}else $(element).hide()},scope.getStagingOrphanData=function(){var key="cwStagingOrphan",queryString="?key="+key+"&value="+scope.appId,result=consoleApiSvc.callAPI("GET","api/v1/staging/orphan"+queryString);result.then(function(response){response.length>0&&(scope.userAppId=response[0].value,scope.loaderKeyExists=response[0].key),scope.enableLoader()})},scope.postSyncLoader=function(key){var data={code:"cwStagingOrphan",value:scope.appId},result=consoleApiSvc.callAPI("POST","api/v1/staging/syncLoader",data);result.then(function(response){scope.getStagingOrphanData()})},scope.getStagingOrphanData()})}};return directive}angular.module("cgConsole").directive("cwIsStagingOrphan",["$compile","consoleApiSvc","stagingSvc",cwIsStagingOrphan])}(),function(){"use strict";function cwJoyride($timeout,consoleApiSvc,commonSvc,$rootScope){return function(scope,element,attributes){if(!($(window).width()<900||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){if(!consoleApiSvc.isEnabledCoachMarks())return!1;var cookie_name="";"server_detail_access"===consoleApiSvc.current.name?cookie_name="cwWalkThroughServer":"app_detail_access"===consoleApiSvc.current.name&&(cookie_name="cwWalkThroughApp");var user_ui_data=commonSvc.getUserUiData(cookie_name);return null!==user_ui_data?!1:void $timeout(function(){commonSvc.setUserUiData(cookie_name,1)&&$rootScope.preventNavigation(),$("#"+element[0].id).joyride({autoStart:!0,preRideCallback:function(){$("body").addClass("cw-walkthrough")},postRideCallback:function(){$("body").removeClass("cw-walkthrough"),$rootScope.allowNavigation()},postStepCallback:function(index,tip){setTimeout(function(){$(".joyride-expose-wrapper").removeClass("jr-wrap-step1").removeClass("jr-wrap-step2").removeClass("jr-wrap-step3").removeClass("jr-wrap-step4"),$(".joyride-expose-wrapper").addClass("jr-wrap-step"+index)},0)},preStepCallback:function(index,tip){$(".fab-menu-wrapper").removeClass("fab-menu-show"),2==index&&$(".fab-menu-wrapper").addClass("fab-menu-show")},modal:!0,expose:!0})},2e3)}}}angular.module("cgConsole").directive("cwJoyride",["$timeout","consoleApiSvc","commonSvc","$rootScope",cwJoyride])}(),function(){"use strict";function cwKbIntegration(consoleApiSvc,$timeout,$mdSidenav,commonSvc,analyticsSvc,memberSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){function getKBSearchResults(query){if(query.length>1){scope.isSearching=!0,scope.results=!1,scope.error="Please wait while I load results ...",$(".kb-nav-chat-results").fadeIn();var result=consoleApiSvc.callAPI("GET","api/v1/kb/search?source=platform&kb_title="+query,null,"cwKbIntegration_"+query.length);result.then(function(response){scope.isSearching=!1,parseInt(response.articles_found)>0&&response.articles.length>0?(scope.results=response.articles,$timeout(function(){if(parseInt(response.articles_found)>3){scope.isMoreResults=!0;for(var resultListHeight=0,i=0;3>i;i++){var elem=$(".kb-results li:eq("+i+")");resultListHeight+=elem.height(),resultListHeight+=parseInt(elem.css("marginTop").replace("px"),10),resultListHeight+=parseInt(elem.css("marginBottom").replace("px"),10),resultListHeight+=parseInt(elem.css("paddingBottom").replace("px"),10),resultListHeight+=parseInt(elem.css("paddingTop").replace("px"),10)}}},0),$(".kb-nav-chat-results").fadeIn()):(scope.results=!1,scope.error=noRecordFound,$(".kb-nav-chat-results").fadeIn()),$(".kb-nav-chat-results").fadeIn()},function(response){scope.isSearching=!1,scope.results=!1,scope.error=noRecordFound,$(".kb-nav-chat-results").fadeIn()})}}scope.searchKeyword="",scope.isSearching=!1,scope.FAQs=!1,scope.isResetVisible=!1,scope.isMoreResults=!1,scope.isChatDisabled=function(){var condition1=!cookieConsent.isServiceEnabled("functional")||!consoleApiSvc.user.userDetails.is_verified,condition2=consoleApiSvc.supportScopeIsUpdating;return condition1||condition2},scope.isCreateTicketDisabled=!memberSvc.isUserLevelAllowed("support")||!consoleApiSvc.user.userDetails.is_verified;var noRecordFound="Sorry, I could not find any matching results for you. While I'm improving every day and am generally very helpful, you can talk to our Live chat 24/7 or create a ticket from options given below.",result=consoleApiSvc.callAPI("GET","api/v1/kb/faqs",null,"cwKbIntegration_faqs");result.then(function(response){scope.FAQs=response.faqs},function(response){scope.FAQs=!1}),scope.$on("$stateChangeSuccess",function(ev,current,toParams,from,fromParams){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")}),window.PubSub.subscribe("KbSIdNaveOpened",function(){scope.isResetVisible=!1,scope.results=!1,scope.errors=!1,$(".kb-nav-chat-results").hide(),$(".kb-search-bar").val(""),$timeout(function(){$(".kb-search-bar").focus()},800),$(".md-sidenav-backdrop").click(function(){$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")})}),scope.results=!1;var timer=!1;scope.$watch("consoleApiSvc.user.userDetails.image",function(){consoleApiSvc.user.userDetails.image&&(scope.user_image=consoleApiSvc.user.userDetails.image||!1)}),scope.querySearch=function(query,isEnter){if(query!==scope.searchKeyword){if(""===query)return $timeout.cancel(timer),scope.results=!1,void $(".kb-nav-chat-results").hide();timer&&$timeout.cancel(timer);var isSearched=!1;angular.isDefined(isEnter)?(scope.searchKeyword=query,getKBSearchResults(query),isSearched=!0):timer=$timeout(function(){scope.searchKeyword=query,isSearched||getKBSearchResults(query)},1e3)}},scope.kbNavClose=function(){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style")},scope.createTicket=function(){return scope.isCreateTicketDisabled?!1:void commonSvc.createTicket()},scope.loadChat=function(){if(scope.isChatDisabled())return!1;if(cookieConsent.isServiceEnabled("functional")){$mdSidenav("right").close(),$("body").removeClass("remove-body-scroll"),$("html").removeAttr("style"),$("body #chat-widget-container").show();try{parent.LC_API.open_chat_window(),parent.LC_API.on_chat_window_minimized=function(){$("body #chat-widget-container").hide()}}catch(err){console.log("Live chat Error: "+err)}}},scope.showMoreResults=function(){scope.isMoreResults=!1,$(".kb-results").removeAttr("style"),analyticsSvc.addAnalytics({event_name:"kb_search",search_keyword:scope.searchKeyword})},scope.clearQuery=function(){scope.isSearching=!1,scope.results=!1,scope.errors=!1,$(".kb-nav-chat-results").hide(),$(".kb-search-bar").val(""),scope.isResetVisible=!1,scope.searchKeyword=""},scope.showResetButton=function(query){scope.isResetVisible=query.length>0,0===query.length&&scope.clearQuery()},scope.template="js/app/views/cwKbIntegration.html",scope.sendFaqsEventToMixPanel=function(event){analyticsSvc.addAnalytics({event_name:"more_kb_faqs",faq:event})},scope.sendEventToMixPanel=function(event){analyticsSvc.addAnalytics({event_name:event})}}}}angular.module("cgConsole").directive("cwKbIntegration",["consoleApiSvc","$timeout","$mdSidenav","commonSvc","analyticsSvc","memberSvc",cwKbIntegration])}(),function(){"use strict";function cwLeadScoring(userActivitySvc,$timeout,$state,consoleApiSvc,commonSvc,memberSvc){return{restrict:"E",replace:!0,templateUrl:"js/app/views/cwLeadScoring.html",link:function(scope,element,attr){function leadScoringCardToggle(bool){bool?($(".custom-backdrop.md-scroll-mask").show(),isPageScrolling()||($("html").css("overflow-y","scroll"),$("body").addClass("remove-body-scroll"))):($(".custom-backdrop.md-scroll-mask").hide(),$("html").removeAttr("style"),$("body").removeClass("remove-body-scroll")),$timeout(function(){scope.showLeadScoringCard=bool},100)}function isPageScrolling(){var docHeight=$(document).height(),scroll=$(window).height()+$(window).scrollTop();return docHeight==scroll}scope.isLeadScoringEnabled=!1,scope.showLeadScoringCard=!1,scope.scheduleLaterClicked=!1,window.PubSub.subscribe("appRendered",function(msg,data){var cwLeadScoring=angular.copy(commonSvc.getUserUiData("cwLeadScoring")),manager=userActivitySvc.getLeadScoringManager();return consoleApiSvc.isTrialUserExpired?!1:(null==cwLeadScoring&&manager&&consoleApiSvc.user.userDetails.is_verified&&(scope.isLeadScoringEnabled=!0,scope.managerTemplate=userActivitySvc.managerTemplate[manager]),void window.PubSub.unsubscribe("appRendered"))}),scope.scheduleCall=function($event,user){userActivitySvc.scheduleCall($event,user),leadScoringCardToggle(!1)},scope.openCallScheduleCard=function(){scope.scheduleLaterClicked=!1,leadScoringCardToggle(!0)},scope.closeLeadScoringCard=function(){leadScoringCardToggle(!1)},scope.scheduleCallLater=function(){scope.scheduleLaterClicked=!0},scope.redirectToAccount=function(){scope.scheduleLaterClicked=!1,scope.showLeadScoringCard=!1,leadScoringCardToggle(!1),$state.go("account_call_schedule")},scope.gotIt=function(){scope.scheduleLaterClicked=!1,scope.showLeadScoringCard=!1,leadScoringCardToggle(!1),consoleApiSvc.callAPI("POST","api/v1/disableLeadScoring",null,"disableLeadScoring").then(function(success){scope.isLeadScoringEnabled=!1,consoleApiSvc.isLeadScoringEnabled=!1})},scope.goback=function(){scope.scheduleLaterClicked=!1},$(document).keydown(function(e){var code=e.keyCode||e.which;27===parseInt(code)&&scope.showLeadScoringCard&&leadScoringCardToggle(!1)}),$(".custom-backdrop.md-scroll-mask").on("click",function(){scope.isLeadScoringEnabled&&leadScoringCardToggle(!1)})}}}angular.module("cgConsole").directive("cwLeadScoring",["userActivitySvc","$timeout","$state","consoleApiSvc","commonSvc","memberSvc",cwLeadScoring])}(),function(){"use strict";function cwMembers(consoleApiSvc,$injector){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{app:"=",serverMembers:"=",appMembers:"=",memberLimit:"="},link:function(scope,element,attr){$injector.get("memberSvc");scope.noMembers=!1,scope.members=[],scope.msg="",scope.heading="",scope.memberCount="",scope.showContent=!1,angular.isUndefined(scope.appMembers)&&angular.isDefined(scope.serverMembers)?scope.members=scope.serverMembers:angular.isDefined(scope.appMembers)&&angular.isUndefined(scope.serverMembers)&&(scope.members=scope.appMembers),0===scope.members.length&&("apps"===consoleApiSvc.current.name?scope.noMembers="No team member allowed on this Application. Click to Add":"server"===consoleApiSvc.current.name&&(scope.noMembers="No team member allowed on this Server. Click to Add")),angular.isDefined(scope.app)&&scope.app?(scope.msg="There are no Members allowed on this Application",scope.heading="Members allowed on this Application"):(scope.msg="There are no Members allowed on this Server",scope.heading="Members allowed on this Server"),scope.template="js/app/views/cwMembers.html",scope.memberCount=scope.members.length}}}angular.module("cgConsole").directive("cwMembers",["consoleApiSvc","$injector",cwMembers])}(),function(){"use strict";function cwMonitorBar(){function MonitorBarController(consoleApiSvc){var vm=this;if(vm.element={isDataPresent:!0,isCallFail:!1,barValue:0,showBar:!0,diskInfo:!1,haveIssue:!1,txt:"",lastTxt:"",total:0,calculatedTotal:0,used:0,free:0,cache_memory:0,errorTxt:""},"call_fail"==vm.data.value)return void(vm.element={isDataPresent:!1,isCallFail:!0,errorTxt:"<span>Unable to fetch. Click <b>here </b>to retry</span>"});if(void 0==vm.data.value||null==vm.data.value||vm.data.value<0)return void(vm.element={isDataPresent:!1,isCallFail:!1,errorTxt:"<span>This section is not yet populated. Please recheck in a while.</span>"});if("bw"==vm.data.type&&(void 0==vm.data||null==vm.data.value.datapoint||null==vm.data.value.datapoint[0]||vm.data.value.datapoint<0||vm.data.value.datapoint[0]<0))return void(vm.element={isDataPresent:!1,isCallFail:!1,errorTxt:"<span>This section is not yet populated. Please recheck in a while.</span>"
});var NUMERIC_REGEXP=/[-]{0,1}[\d]*[\.]{0,1}[\d]+/g;if("ram"==vm.data.type)vm.element.total=vm.data.totalRam.match(NUMERIC_REGEXP)[0],vm.element.used=vm.data.value.match(NUMERIC_REGEXP)[0],vm.cache_memory=vm.data.cache_memory.match(NUMERIC_REGEXP)[0],vm.element.used=vm.element.used-vm.cache_memory,vm.element.total=parseFloat(vm.element.total)/1e3/1e3,vm.element.used=parseFloat(vm.element.used)/1e3/1e3,vm.element.free=vm.element.total-vm.element.used,vm.element.barValue=Math.round(vm.element.used/parseFloat(vm.element.total)*100,2),vm.element.barValue>vm.data.problematicNum&&(vm.element.haveIssue=!0),vm.element.txt="<b>"+consoleApiSvc.getSize(vm.element.used,"MB",!0,!0)+"</b> used out of "+consoleApiSvc.getSize(vm.element.total,"MB",!1,!0);else if("cpu"==vm.data.type){var cpu_used=Math.round(vm.data.value.match(NUMERIC_REGEXP)[0]);vm.element.barValue=cpu_used,cpu_used>vm.data.problematicNum&&(vm.element.haveIssue=!0),vm.element.txt="CPU usage is <b>"+Math.round(cpu_used,2)+"%</b>"}else if("bw"==vm.data.type){vm.element.showBar=!1,vm.element.txt="Bandwidth usage this month is <b>"+consoleApiSvc.getSize(vm.data.value.datapoint[0],"MB",!1,!0)+"</b>";var dt=moment(1e3*vm.data.value.datapoint[1]);vm.element.lastTxt="Last Updated: "+dt.tz(moment.tz.guess()).format("DD/MM/YYYY HH:mm z")}else if("disk"==vm.data.type||"db"==vm.data.type){if(vm.element.haveIssue=!1,null==vm.data.value)return void(vm.element={isDataPresent:!1,errorTxt:"<span>This section is not yet populated. Please recheck in  a while.</span>"});vm.element.total=vm.data.totalDisk.match(NUMERIC_REGEXP)[0],vm.element.used=vm.data.value.match(NUMERIC_REGEXP)[0],vm.element.total=parseFloat(vm.element.total)/1024,vm.element.used=parseFloat(vm.element.used)/1024,vm.element.barValue=Math.round(vm.element.used/vm.element.total*100,2),vm.element.barValue>vm.data.problematicNum&&(vm.element.haveIssue=!0),vm.element.extra_txt="<b>"+consoleApiSvc.getSize(vm.element.used,"KB",!0,!0)+"</b> used out of "+consoleApiSvc.getSize(vm.element.total,"KB",!0,!0),vm.element.diskInfo=!0,"db"==vm.data.type?vm.element.txt="Database":"amazon"==vm.data.currentServer.cloud||"gce"==vm.data.currentServer.cloud?vm.element.txt="Application":vm.element.txt=null!=vm.data.currentServer.storage?"Block Storage":""}}var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/monitorBar.html",controller:MonitorBarController,controllerAs:"vm",bindToController:!0,scope:{data:"=",name:"=",callbackFn:"&"},link:function($rootScope,element,attrs){$rootScope.refresh=function(){$rootScope.$emit("reloadPage",$rootScope.vm.data.type)}}};return directive}angular.module("cgConsole").directive("cwMonitorBar",["consoleApiSvc",cwMonitorBar])}(),function(){"use strict";function cwNgEnter(){return function(scope,elm,attrs){elm.bind("keypress",function(event){13===event.keyCode&&(scope.$apply(function(){scope.$eval(attrs.cwNgEnter)}),event.preventDefault())})}}angular.module("cgConsole").directive("cwNgEnter",cwNgEnter)}(),function(){"use strict";function cwNpsMetric(consoleApiSvc,toastrSvc,$timeout,analyticsSvc,commonSvc,viralloopsSvc){function NPSController($scope){var vm=this;vm.showRating=!1,vm.showComment=!1,vm.preloader=!1,vm.npsQuestion2="We are glad to see you happy! What is that one thing, for you, that makes Cloudways stand apart?",vm.data={rating:"",comment:""},window.PubSub.subscribe("cwUserLoggedIn",function(){vm.showRating=consoleApiSvc.user.userDetails.is_nps_visible,consoleApiSvc.user.userDetails.is_nps_visible&&$timeout(function(){$scope.$apply(function(){$(".nps-wrapper").css("height",$(".nps-section").outerHeight())})},3e3)}),vm.updateRating=function(rating){vm.data.rating=rating.toString()},vm.submitRating=function(back){angular.isDefined(back)?(vm.showRating=!0,vm.showComment=!1):(vm.showRating=!1,vm.showComment=!0,vm.data.rating>=1&&vm.data.rating<=6?vm.npsQuestion2="Thanks for your score! Care to tell us how we can improve your experience.":7===parseInt(vm.data.rating)||8===parseInt(vm.data.rating)?vm.npsQuestion2="Thank you for your score! What is that one thing we could do differently to make your experience better?":vm.npsQuestion2="We are glad to see you happy! What is that one thing, for you, that makes Cloudways stand apart?")},vm.npsSubmit=function(is_cancel){var data=vm.data;angular.isDefined(is_cancel)&&is_cancel?(data={},$(".nps-wrapper").css("height",0)):(vm.preloader=!0,vm.message="Submitting survey...");var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.post_npsMetrics,data,"NPS_");result.then(function(response){vm.preloader=!0,vm.message="",angular.isUndefined(response.is_cancel)&&toastrSvc.success("Feedback successfully submitted."),$(".nps-wrapper").css("height",0),"9"!=data.rating&&"10"!=data.rating||!viralloopsSvc.isSegmentededUser()||viralloopsSvc.viralLoopOpen("nps")},function(response){return vm.preloader=!1,vm.message="",vm.submitRating("back"),angular.isDefined(response.data.message)?void toastrSvc.error(response.data.message):void(angular.isDefined(response.data.isAlreadySubmitted)&&response.data.isAlreadySubmitted&&(toastrSvc.warning("You have already submitted NPS."),$(".nps-wrapper").css("height",0)))})}}return{restrict:"E",replace:!0,templateUrl:"js/app/views/cwNpsMetric.html",controller:NPSController,controllerAs:"vm",bindToController:!0}}angular.module("cgConsole").directive("cwNpsMetric",["consoleApiSvc","toastrSvc","$timeout","analyticsSvc","commonSvc","viralloopsSvc",cwNpsMetric])}(),function(){"use strict";function cwOperationLoader(){var directive={restrict:"E",replace:!0,scope:{operation:"@",serverId:"=",clusterId:"="},link:function(scope,element,attr){scope.$watch("operation",function(){if(scope.serverId){if(clearInterval(int),""!=scope.operation)var i="",int=setInterval(function(){3===i.length&&(i=""),i+=".",$(".operation-loader-"+scope.serverId).html(i)},800);else clearInterval(int);var templateClass="operation-loader-"+scope.serverId,htmlText='<span style="width:10px; display:inline-block;"><small class="'+templateClass+'"></small></span>';element.html(htmlText)}else{if(""!=scope.operation)var i="",int=setInterval(function(){3===i.length&&(i=""),i+=".",$(".operation-loader-"+scope.clusterId).html(i)},800);else clearInterval(int);var templateClass="operation-loader-"+scope.clusterId,htmlText='<span style="width:10px; display:inline-block;"><small class="'+templateClass+'"></small></span>';element.html(htmlText)}})}};return directive}angular.module("cgConsole").directive("cwOperationLoader",[cwOperationLoader])}(),function(){"use strict";function cwPageSwitch(){function PageSwitchController($state,$timeout,$mdDialog,$rootScope,consoleApiSvc,applicationSvc,accountSvc,analyticsSvc,memberSvc){var vm=this;switch($state.current.name){case"server":vm.pageSwitch={cb1:!1,app_class:"active",srv_class:""};break;case"apps":vm.pageSwitch={cb1:!0,app_class:"",srv_class:"active"}}vm.onChange=function(cbState){cbState?($timeout(function(){$state.go("apps")},200),analyticsSvc.addAnalytics({event_name:"User Page Switch",page:"Application Listing"})):($timeout(function(){$state.go("server")},200),analyticsSvc.addAnalytics({event_name:"User Page Switch",page:"Servers Listing"}))},vm.addApp=function($event){applicationSvc.addApp($event)},vm.memberSvc=memberSvc}var directive={restrict:"E",templateUrl:"js/app/views/pageSwitch.html",scope:{model:"=",onChange:"&"},controller:PageSwitchController,controllerAs:"vm",bindToController:!0};return directive}angular.module("cgConsole").directive("cwPageSwitch",["$state","$timeout","$mdDialog","$rootScope","applicationSvc","accountSvc","analyticsSvc","memberSvc",cwPageSwitch])}(),function(){"use strict";function personaAgency($templateCache){return{restrict:"E",replace:!1,template:$templateCache.get("agencyTemplate")}}angular.module("cgConsole").directive("personaAgencyTemplate",["$templateCache",personaAgency])}(),function(){"use strict";function cwPreLoader(){var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/preLoader.html",scope:{status:"=",message:"@",callback:"&",showCloudLoader:"=",btnFunc:"="},link:function(scope,element,attr){scope.$watchGroup(["status","message","btnFunc"],function(){scope.status&&scope.status?$(element).show():($(".hdr-loader").hide(),$(element).hide())}),scope.callAction=function(){scope.btnFunc=!1,scope.callback(),scope.showCloudLoader=!1,$(".hdr-loader").show()}}};return directive}angular.module("cgConsole").directive("cwPreLoader",cwPreLoader)}(),function(){"use strict";function cwProjectSubList(){return{restrict:"A",link:function($scope,element,attrs){element.bind("click",function($event){element.parent().children("ul").slideToggle()})}}}angular.module("cgConsole").directive("cwProjectSubList",cwProjectSubList)}(),function(){"use strict";function cwQuickForm(){var QuickFormController=["$scope","consoleApiSvc","$timeout","stringValidatorSvc",function($scope,consoleApiSvc,$timeout,stringValidatorSvc){function showHideForm(that,display){if($(that).attr("q-form")===vm.form){if(vm.data=vm.ngModel,display){"app_webroot"===$(that).attr("q-form")&&$("#fixed-webroot").css("display","flex"),"app_label"===$(that).attr("q-form")&&$(window).width()<600&&$("#app-creation-date").css("display","none");var type;type="input"===vm.formType?" .quick-form-input":" .quick-form-select",$(that).parent().css("display","none"),$("#"+vm.form).css("display","flex"),$("#"+vm.form+type+", #"+vm.form+" .quick-form-save, #"+vm.form+" .quick-form-close").css("display","flex")}else"app_webroot"===$(that).attr("q-form")&&$("#fixed-webroot").css("display","none"),"app_label"===$(that).attr("q-form")&&$(window).width()<600&&$("#app-creation-date").css("display","flex"),$(that).parent().css("display","flex"),$("#"+vm.form).css("display","none"),$("#"+vm.form+" .quick-form-input, #"+vm.form+" .quick-form-select, #"+vm.form+" .quick-form-save, #"+vm.form+" .quick-form-close").css("display","none");vm.data=vm.ngModel}}var vm=this;vm.data=vm.ngModel;var dataCopy=angular.copy(vm.data);vm.formType=vm.type,vm.error=!1,vm.showInput=!1,vm.showSelect=!1,vm.selectOptions=vm.options,vm.maxlength=angular.isUndefined(vm.maxLength)?60:vm.maxLength,vm.minlength=angular.isUndefined(vm.minLength)?3:vm.minLength,vm.input_required=angular.isUndefined(vm.inputRequired)?!0:vm.inputRequired,vm.quickFormRegex=angular.isDefined(vm.qfRegex)?vm.qfRegex:consoleApiSvc.getRegex("block_special_chars"),vm.patternMessage=angular.isDefined(vm.customPatternMessage)?vm.customPatternMessage:"Only lowercase alphanumeric characters are allowed",vm.buttonName=angular.isDefined(vm.buttonName)&&""!=vm.buttonName?vm.buttonName:"SAVE";var that;vm.hasPolicy=angular.isDefined(vm.policyType),vm.hasPolicy&&(vm.policy=stringValidatorSvc.getPolicy(vm.policyType)),$(".show-quick-form").on("click",function($event){vm.error=!1,dataCopy=angular.copy(vm.ngModel),showHideForm(that,!1),that=this,showHideForm(that,!0),vm.hasPolicy&&vm.updateField()}),vm.updateField=function(){(angular.isDefined(vm.data)&&vm.data!==dataCopy||angular.isUndefined(vm.data))&&(vm.error=!1),$timeout(function(){vm.hasPolicy&&(vm.policyValidity=stringValidatorSvc.validatePolicy(vm.data,vm.policy),vm.quickForm.quick_form.$setValidity("pattern",vm.policyValidity.passed))},0)},vm.closeQuickform=function(){vm.data=dataCopy,vm.data=vm.ngModel,vm.showInput=!1,vm.error=!1,showHideForm(that,!1),vm.updateField();try{angular.isFunction(vm.qfClose)&&vm.qfClose()}catch(err){console.log(err.message)}},vm.saveForm=function(data){return"false"!==vm.input_required&&"input"===vm.formType&&angular.isDefined(vm.data)&&vm.data===dataCopy?(vm.error="No changes detected!",!1):(vm.showInput=!1,vm.data=vm.ngModel,showHideForm(that,!1),void vm.saveQuickForm({data:data}))}}],directive={restrict:"E",replace:!0,templateUrl:"js/app/views/quickForm.html",scope:{ngModel:"=",type:"@",saveQuickForm:"&",qfClose:"&",form:"@",options:"=",maxLength:"@",minLength:"@",qfRegex:"=",customPatternMessage:"@",inputRequired:"@",policyType:"@",policyCaption:"@",buttonName:"@"},controller:QuickFormController,controllerAs:"vm",bindToController:!0};return directive}angular.module("cgConsole").directive("cwQuickForm",cwQuickForm)}(),function(){"use strict";function cwScroll($window,appAnalyticsSvc){return{restrict:"AE",link:function(scope,elem,attrs){var raw=elem[0];elem.bind("scroll",function(e){if(raw.scrollTop+raw.offsetHeight+50>=raw.scrollHeight){var resource=attrs.directiveResource;scope.$apply(attrs.cwScroll),appAnalyticsSvc.dynamicDataLoadCount[resource]++}})}}}angular.module("cgConsole").directive("cwScroll",["$window","appAnalyticsSvc",cwScroll])}(),function(){"use strict";function cwSectionBlocker(consoleApiSvc,serverMessages,operationSvc,location,commonSvc){var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/sectionBlocker.html",scope:{status:"=",estimatedTime:"=",operationMessage:"@",appId:"=",controller:"="},link:function(scope,element,attr){scope.$watchGroup(["status","estimatedTime","appId","controller"],function(){if(angular.isDefined(scope.status)&&""!=scope.status){var operationSections=operationSvc.operations[scope.status]?operationSvc.operations[scope.status].sections:"",authAction=commonSvc.getCookie("staging-auth-action");if(authAction=authAction.charAt(0).toUpperCase()+authAction.substr(1),""!=scope.operationMessage?scope.operationShortMessage=scope.operationMessage:(scope.operationShortMessage=operationSvc.getOperationMessageDesc(scope.status,scope.estimatedTime),angular.isDefined(authAction)&&authAction&&(scope.operationShortMessage=scope.operationShortMessage+": "+authAction+" ...")),angular.isDefined(scope.appId)){var path=location.path().split("/");-1!==path.indexOf("cluster")?-1!=operationSections.indexOf(scope.controller)&&parseInt(path[3])===parseInt(scope.appId)?$(element).show():$(element).hide():-1!=operationSections.indexOf(scope.controller)&&parseInt(path[2])===parseInt(scope.appId)?$(element).show():$(element).hide()}else-1!=operationSections.indexOf(scope.controller)?$(element).show():$(element).hide()}else $(element).hide()})}};return directive}angular.module("cgConsole").directive("cwSectionBlocker",["consoleApiSvc","serverMessages","operationSvc","$location","commonSvc",cwSectionBlocker])}(),function(){"use strict";function cwServerActions(consoleApiSvc,serverActionsSvc,$state,memberSvc,toastrSvc,serverFabMenuSvc,commonSvc){var directive={restrict:"E",templateUrl:"js/app/views/serverActions.html",scope:{server:"=",serverModel:"=",updateModel:"&"},link:function(scope,element){scope.$watchGroup(["server","serverModel","updateModel"],function(){function subscribeServer(server_id,operation_id){window.PubSub.subscribe("operation-"+operation_id,function(){scope.serverModel.servers[server_id]=consoleApiSvc.server.serverData[server_id],angular.isDefined(scope.updateModel)&&scope.updateModel()})}var server_id=scope.server.id;scope.customer_type=consoleApiSvc.user.userDetails.customer_type,scope.isMasterUser=commonSvc.isMasterUser(),scope.account_type=consoleApiSvc.user.userDetails.type,scope.isStartStopDisabled=!memberSvc.isSectionPermitted(server_id,"server-actions"),scope.isRestartDisabled=!memberSvc.isSectionPermitted(server_id,"server-actions")||"stopped"==consoleApiSvc.server.serverData[server_id].status,scope.isAddAppDisabled=!memberSvc.isSectionPermitted(server_id,"app-add")||"running"!=consoleApiSvc.server.serverData[server_id].status,scope.isCloneDisabled=!memberSvc.isSectionPermitted(server_id,"server-clone")||!memberSvc.isSectionPermitted(null,"server-add")||"running"!=consoleApiSvc.server.serverData[server_id].status,scope.isDeleteDisabled=!memberSvc.isSectionPermitted(server_id,"server-delete")||1==consoleApiSvc.server.serverData[server_id].is_terminated,scope.cloneServer=function(server_id,$event){serverActionsSvc.clone_server(server_id,$event)},scope.transferServer=function(server_id,event){serverFabMenuSvc.serverTransferInit(server_id,event)},scope.changeServerState=function(server_id,serverState){$(".hdr-loader").show(),serverActionsSvc.changeState(server_id,serverState).then(function(response){$(".hdr-loader").hide(),subscribeServer(server_id,response.operation_id)},function(response){$(".hdr-loader").hide()})},scope.restartServer=function(server_id){$(".hdr-loader").show(),serverActionsSvc.restart(server_id).then(function(data){$(".hdr-loader").hide(),subscribeServer(server_id,data.operation_id)},function(){$(".hdr-loader").hide()})},scope.disasterRecovery=function(server_id){$state.go("disaster_recovery",{id:server_id})},scope.isFullUserPrimaryAccount=!1,"full"===scope.customer_type&&"primary"===scope.account_type&&angular.isUndefined(consoleApiSvc.user.userDetails.admin_loggedin)&&(scope.isFullUserPrimaryAccount=!0),scope.deleteServer=function($event,server_id){scope.isFullUserPrimaryAccount?serverActionsSvc.deleteServerDialog($event,server_id):($(".hdr-loader").show(),serverActionsSvc["delete"](server_id).then(function(data){$(".hdr-loader").hide()},function(){$(".hdr-loader").hide()}))},scope.addApp=function(server_id){$state.go("add_new_app",{id:server_id})},scope.action=function(type,server_id,serverState,event,isDisabled){if(isDisabled)return!1;switch(type){case"changeServerState":scope.changeServerState(server_id,serverState);break;case"restartServer":scope.restartServer(server_id);break;case"addApp":scope.addApp(server_id);break;case"cloneServer":scope.cloneServer(server_id,event);break;case"disasterRecovery":scope.disasterRecovery(server_id,event);break;case"transferServer":scope.transferServer(server_id,event)}}})}};return directive}angular.module("cgConsole").directive("cwServerActions",["consoleApiSvc","serverActionsSvc","$state","memberSvc","toastrSvc","serverFabMenuSvc","commonSvc",cwServerActions])}(),function(){"use strict";function cwServerBar(){function ServerBarController(consoleApiSvc,$stateParams,toastrSvc,serverMessages,$state,$location,commonSvc,$timeout){function prepareServerBar(){that.serverBar={server:""},that.serverBar.server=$stateParams.id,that.servers=prepareServersObj(),that.server_id=$stateParams.id,that.server=consoleApiSvc.server.serverData[$stateParams.id],that.serverSize=[],that.server_bar_regex=consoleApiSvc.getRegex("srv_app_label_special_chars");var current_location=$location.path().split("/");that.server_detail="",that.go=$state.go.bind($state),that.serverApps=commonSvc.serverApps(that.server_id),that.serverProjectsCount=commonSvc.getServerProjectsCount(that.server_id),that.serverMembers=that.server.members?consoleApiSvc.sortServerByName(that.server.members,"name"):[],angular.isDefined(that.server)&&(prepareServerSpecifications(),that.getPartial=function(partial){return"js/app/modules/member/views/partials/"+partial+".html"},that.updateServerLabel=function(label){update_server_label($stateParams.id,label)}),angular.isDefined(current_location[1])&&""!=current_location[1]&&"server"===current_location[1]&&angular.isDefined(current_location[3])&&""!=current_location[3]&&(that.server_detail="glb-submenu-btm-srv"),that.addHeight=function(){$timeout(function(){commonSvc.addOptionHeight()},100)}}function prepareServersObj(){var servers={};return angular.forEach(consoleApiSvc.server.serverData,function(server){servers[server.id]={id:server.id,label:server.label,cloud:server.cloud}}),consoleApiSvc.sortServerByName(servers,"label")}function prepareServerSpecifications(){"do"===that.server.cloud||"vultr"===that.server.cloud||"linode"===that.server.cloud?(that.instanceTypeCheck="Memory",that.serverSize.push({disk:that.server.volume_size+" GB"}),null!==that.server.storage&&(that.serverSize.splice(0,1),that.serverSize.push({storage:that.server.storage+" GB"}))):"kyup"===that.server.cloud?(that.instanceTypeCheck="",that.serverSize.push({memory_size:that.server.memory_size+" GB RAM"}),that.serverSize.push({data:that.server.volume_size+" GB Storage"})):(that.instanceTypeCheck="",that.serverSize.push({data:that.server.data_volume_size+" GB Application"}),that.serverSize.push({db:that.server.db_volume_size+" GB"}))}function update_server_label(server_id,label){if(label!==consoleApiSvc.server.serverData[server_id].label){$(".hdr-loader").show();var data={label:label},result=consoleApiSvc.callAPI("PUT",consoleApiSvc.API.URL.server+"/"+server_id,data,"update_server_detail_"+server_id);result.then(function(data){$(".hdr-loader").hide(),consoleApiSvc.server.serverData[server_id].label=label,consoleApiSvc.server.serverData[server_id].operation_type="",that.servers=prepareServersObj(),toastrSvc.success(serverMessages.server_label_updated,{placeholders:["label",{status:"successfully"}],server_id:server_id})},function(response){$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}}var that=this;prepareServerBar(),that.targetMenuPosition=commonSvc.checkScreenSize(),window.PubSub.subscribe("update_server_bar",function(topic,isSuccess){prepareServerBar()}),that.switchToApp=function(app_id){var is_staging="";angular.isDefined(that.server)&&angular.forEach(that.server.apps,function(app){app.id===app_id&&(is_staging=parseInt(app.is_staging))}),is_staging&&consoleApiSvc.current.name.startsWith("server")?$state.go("staging_app_detail.access",{id:app_id}):!is_staging&&consoleApiSvc.current.name.startsWith("server")?$state.go("app_detail_access",{id:app_id}):$state.go("app_detail_access",{id:app_id})}}var directive={restrict:"E",replace:!0,templateUrl:"js/app/views/serverBar.html",controller:ServerBarController,controllerAs:"that",bindToController:!0};return directive}angular.module("cgConsole").directive("cwServerBar",["consoleApiSvc","$stateParams","toastrSvc","serverMessages","$state","$location","commonSvc","$timeout",cwServerBar])}(),function(){"use strict";function cwServerProjectCount(consoleApiSvc){var directive={restrict:"E",templateUrl:"js/app/views/serverProjectCount.html",scope:{servers:"=",server:"="},link:function(scope,element,attr){scope.$watchGroup(["servers","server"],function(){scope.getServerProjectsCount=function(server_id){var serverProjectCount=0,projectIds=[];return angular.isDefined(scope.servers[server_id].apps)&&angular.forEach(scope.servers[server_id].apps,function(app){angular.isNumber(parseInt(app.project_id))&&parseInt(app.project_id)>0&&-1===projectIds.indexOf(app.project_id)&&(serverProjectCount++,projectIds.push(app.project_id))}),serverProjectCount},scope.getServerProjects=function(server_id){var serverProjects=[],projectIds=[];return angular.isDefined(scope.servers[server_id].apps)&&angular.forEach(consoleApiSvc.projects,function(project){angular.forEach(scope.servers[server_id].apps,function(app){parseInt(app.project_id)===parseInt(project.id)&&-1===projectIds.indexOf(project.id)&&(serverProjects.push(project),projectIds.push(project.id))})}),serverProjects=consoleApiSvc.sortServerByName(serverProjects,"name")}})}};return directive}angular.module("cgConsole").directive("cwServerProjectCount",["consoleApiSvc",cwServerProjectCount])}(),function(){"use strict";function cwSignupFlowStrip(consoleApiSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{message:"@",status:"="},link:function(scope,element,attr){scope.status&&(scope.signupFlowText=scope.message),scope.template="js/app/views/cwSignupFlowStrip.html"}}}angular.module("cgConsole").directive("cwSignupFlowStrip",[cwSignupFlowStrip])}(),function(){"use strict";function cwSignupVerificationBar(consoleApiSvc,$timeout,commonSvc,accountSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){window.PubSub.subscribe("authCheckDone",function(){if(scope.is_verified=angular.isDefined(consoleApiSvc.user.userDetails.is_verified)?consoleApiSvc.user.userDetails.is_verified:"",scope.is_sms_verified_pending=angular.isDefined(consoleApiSvc.user.userDetails.is_sms_verify_pending)?consoleApiSvc.user.userDetails.is_sms_verify_pending:"",scope.is_email_verified_pending=angular.isDefined(consoleApiSvc.user.userDetails.is_email_verify_pending)?consoleApiSvc.user.userDetails.is_email_verify_pending:"","trial"===consoleApiSvc.user.userDetails.customer_type&&!scope.is_verified){var numbersAsString=scope.is_sms_verified_pending.toString()+scope.is_email_verified_pending.toString();switch(numbersAsString){case"10":scope.status="cw_sms_pending";break;case"01":scope.status="cw_email_pending";break;case"11":scope.status="cw_sms_email_pending"}}scope.template="js/app/views/cwSignupVerificationBar.html"}),scope.verifyAccount=function(){accountSvc.verifyAccount(scope.status)}}}}angular.module("cgConsole").directive("cwSignupVerificationBar",["consoleApiSvc","$timeout","commonSvc","accountSvc",cwSignupVerificationBar])}(),function(){"use strict";function cwStagingLoader($compile,consoleApiSvc,stagingSvc,$timeout){var directive={restrict:"E",replace:!0,scope:{operation:"@",sref:"@",server:"=server"},link:function(scope,element,attr){scope.$watch("operation",function(){scope.operations=["staging_sync_create","sync_app"];var getDataFromUsersUI=!1,stagingSref=["app_detail_staging","staging_app_detail.staging"];""!=scope.operation&&-1===stagingSref.indexOf(scope.sref)?(scope.isShowLoader=function(){if(stagingSvc.app.loaderKeyExists.length>0)if(angular.isDefined(scope.operation)&&-1!==scope.operations.indexOf(scope.operation)&&"cwStagingLoader"===stagingSvc.app.loaderKeyExists[0].key&&-1===stagingSref.indexOf(scope.sref)&&0!==parseInt(stagingSvc.app.loaderKeyExists[0].value)){var message="Some operations might not work while the data is being copied between the Staging and the Live Applications.",htmlText='<div flex layout="row" class="strip-dismiss glb-margin-btm10" layout-align="space-between center"> <div flex><i class="mdi mdi-alert"></i>'+message+'</div> <a href="javascript:void(0);"class="glb-link-blue" ng-click="isLoaderDismiss();">Dismiss</a></div>';element.html(htmlText),$compile(element.contents())(scope)}else $(element).hide();else angular.isDefined(consoleApiSvc.users_ui_data)&&consoleApiSvc.users_ui_data.length>0&&(angular.forEach(consoleApiSvc.users_ui_data,function(object){angular.isDefined(object.key)&&"cwStagingLoader"===object.key&&(stagingSvc.app.loaderKeyExists[0]=object,getDataFromUsersUI=!0)}),getDataFromUsersUI&&stagingSvc.app.loaderKeyExists.length>0&&scope.isShowLoader())},scope.isLoaderDismiss=function(){var data={code:"cwStagingLoader",value:0},result=consoleApiSvc.callAPI("POST","api/v1/staging/update/syncLoader",data);result.then(function(response){response.length>0&&(stagingSvc.app.loaderKeyExists=response),$timeout(function(){scope.isShowLoader()},300)})},scope.isShowLoader()):$(element).hide()})}};return directive}angular.module("cgConsole").directive("cwStagingLoader",["$compile","consoleApiSvc","stagingSvc","$timeout",cwStagingLoader])}(),function(){"use strict";function cwStringValidator(){var CheckerCtrl=["$scope","$timeout","consoleApiSvc","stringValidatorSvc",function($scope,$timeout,consoleApiSvc,stringValidatorSvc){var vm=this;vm.policy=stringValidatorSvc.getPolicy(vm.policyType),vm.isSticky=angular.isDefined(vm.sticky)&&1==vm.sticky,vm.customClass=angular.isDefined(vm.customClass)?vm.customClass:"";var inputSelector="form[name='"+vm.form.$name+"'] input[name='"+vm.control.$name+"']";if(vm.isSticky?vm.focus=!0:vm.focus=$(inputSelector).is(":focus"),vm.styles={sectionAlignment:""},angular.isDefined(vm.position))switch(vm.position){case"right":vm.styles.sectionAlignment="left";break;case"bottom":vm.styles.sectionAlignment="top"}$scope.$watch("vm.control.$$rawModelValue",function(){var input=vm.control.$$rawModelValue;input=void 0==input?"":input,vm.policyValidity=stringValidatorSvc.validatePolicy(input,vm.policy),vm.updateControlValidity(vm.policyValidity.passed)}),$scope.$watch("vm.form.$valid",function(){vm.updateControlValidity(vm.policyValidity.passed)}),vm.isSticky||($(inputSelector).on("focus",function(){$timeout(function(){vm.focus=!0},0)}),$(inputSelector).on("blur",function(){$timeout(function(){vm.policyValidity.passed&&(vm.focus=!1)},0)})),vm.updateControlValidity=function(passed){passed=angular.isDefined(passed)?passed:!1,vm.control.$setValidity("pattern",passed)}}],directive={restrict:"E",replace:!0,templateUrl:"js/app/views/StringValidator.html",scope:{control:"=",form:"=",caption:"@",policyType:"@",position:"@",sticky:"=",customClass:"@"},controller:CheckerCtrl,controllerAs:"vm",bindToController:!0};return directive}angular.module("cgConsole").directive("cwStringValidator",cwStringValidator)}(),function(){"use strict";function cwTargetBlank($window){return{link:function(scope,element,attr){element.bind("click",function(){$window.open(attr.cwTargetBlank,"")})}}}angular.module("cgConsole").directive("cwTargetBlank",["$window",cwTargetBlank])}(),function(){"use strict";function cwTeamMemberNotification(consoleApiSvc,commonSvc,memberSvc,$state){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{teamMemberNotification:"="},link:function(scope,element,attr){function showTeamMemberStrip(){return 0===Object.keys(consoleApiSvc.server.serverData).length?void(memberSvc.teamMemberNotification=!1):Object.keys(memberSvc.members).length>0?(scope.teamMemberNotification=!0,teamMemNoti_gotIt||teamMemNoti_learMore||teamMemNoti_addChannel?void(scope.teamMemberNotification=!1):void(scope.teamMemberNotification=!0)):void(scope.teamMemberNotification=!1)}scope.template="js/app/views/cwTeamMemberNotification.html",scope.$watch("teamMemberNotification",function(){scope.teamMemberNotification=memberSvc.teamMemberNotification});var teamMemNoti_gotIt=commonSvc.getUserUiData("teamMemNoti_gotIt"),teamMemNoti_learMore=commonSvc.getUserUiData("teamMemNoti_learMore"),teamMemNoti_addChannel=commonSvc.getUserUiData("teamMemNoti_addChannel");showTeamMemberStrip(),window.PubSub.subscribe("memberUpdated",function(){showTeamMemberStrip()}),scope.action=function(key){commonSvc.setUserUiData(key,1),scope.teamMemberNotification=!1}}}}angular.module("cgConsole").directive("cwTeamMemberNotification",["consoleApiSvc","commonSvc","memberSvc","$state",cwTeamMemberNotification])}(),function(){"use strict";function cwTrialExpired(consoleApiSvc,commonSvc,accountSvc){return{restrict:"E",replace:!0,templateUrl:"js/app/views/cwTrialExpired.html",link:function(scope,element,attr){scope.upgradeTrialAccount=function(){accountSvc.upgradeAccount("trial_expire_page")}}}}angular.module("cgConsole").directive("cwTrialExpired",["consoleApiSvc","commonSvc","accountSvc",cwTrialExpired])}(),function(){"use strict";function cwTrialGreeting(consoleApiSvc,$timeout,commonSvc,$state){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',link:function(scope,element,attr){var trialGreetingTimout,user_id=consoleApiSvc.user.userDetails.id;scope.$on("$stateChangeSuccess",function(event,current,previous){"server_create"===current.name?!$.isEmptyObject(consoleApiSvc.server.serverData)||consoleApiSvc.trialGreetings||consoleApiSvc.isTrialUserExpired||"trial"!==consoleApiSvc.user.userDetails.customer_type||(!angular.isDefined(consoleApiSvc.user.userDetails.is_sms_verify_pending)||!angular.isDefined(consoleApiSvc.user.userDetails.is_email_verify_pending)||consoleApiSvc.user.userDetails.is_email_verify_pending&&consoleApiSvc.user.userDetails.is_sms_verify_pending?(""===commonSvc.getCookie("cng_trial_"+user_id)&&(commonSvc.createCookie("cng_trial_"+user_id,!0,20),$(".sec-greeting").show(),consoleApiSvc.trialGreetings=!0),trialGreetingTimout=$timeout(function(){$(".sec-greeting").fadeOut()},4e3)):($(".sec-greeting").show(),consoleApiSvc.verifiedGreeting=!0)):($(".sec-greeting").hide(),$timeout.cancel(trialGreetingTimout))}),scope.template="js/app/views/trialGreeting.html"}}}angular.module("cgConsole").directive("cwTrialGreeting",["consoleApiSvc","$timeout","commonSvc","$state",cwTrialGreeting])}(),function(){"use strict";angular.module("cgConsole").directive("cwTrialNotice",["consoleApiSvc","$state",function(consoleApiSvc,$state){
return{restrict:"E",templateUrl:"js/app/views/cwTrialNotice.html",scope:{featureName:"@",additionalMessage:"@",customCss:"@",onRedirect:"&"},link:function(scope,element,attrs){scope.isTrialUser="trial"===consoleApiSvc.user.userDetails.customer_type,scope.featureName=angular.isDefined(scope.featureName)?scope.featureName:"This feature",scope.additionalMessage=angular.isDefined(scope.additionalMessage)?scope.additionalMessage:"to continue.",scope.customCss=angular.isDefined(scope.customCss)?scope.customCss:"",scope.redirectToAccount=function(){$state.go("account_credit_card"),scope.onRedirect()}}}}])}(),function(){"use strict";function cwTrialTimer(consoleApiSvc,$timeout,$window,commonSvc,accountSvc){return{restrict:"E",replace:!0,template:'<ng-include src="template"/>',scope:{serverCurrDate:"=",serverExpDate:"="},link:function(scope,element,attr){function trailHandler(current,expiry){var dayIntoSec,trailDeduct,timer,diff={};dayIntoSec=864e5,expiry=new Date(expiry),expiry=expiry.getTime(),expiry=parseInt(expiry)-1,current=new Date(current),current=current.getTime(),diff.ms=expiry-current,diff.minutes=Math.ceil(diff.ms/1e3/60),(trailDeduct=function(){if(diff.minutes-=1,diff.hours=Math.ceil(diff.minutes/60),diff.day=Math.floor(diff.hours/24),diff.hours_display=diff.hours-24*diff.day,0===diff.day&&0===diff.hours&&0===diff.minutes?($timeout.cancel(timer),$window.location.href=""):timer=$timeout(trailDeduct,6e4),scope.html=html,0===diff.day&&0===diff.hours)scope.html=scope.html.replace("*|replaceText|*","in a few minutes");else{var timerText="in ";diff.day&&diff.hours>24&&(timerText+='<span class="label timer-update">'+diff.day+"</span>",timerText+=1===diff.day?"day":"days"),diff.hours<=24&&(diff.hours_display=diff.hours),timerText+='<span class="label timer-update">'+diff.hours_display+"</span>",timerText+=1===diff.hours_display?"hour":"hours",scope.html=scope.html.replace("*|replaceText|*",timerText)}diff.hours<=24&&(consoleApiSvc.user.trialAccountExpire=!0)})()}scope.trialTimerVisibility=!1,scope.createServerHellobar=!1,scope.trialStatus="trial_timer";var html="Your trial will expire *|replaceText|*. Upgrade and claim a free migration";scope.$on("$stateChangeSuccess",function(event,current,previous){"server_create"===current.name?(scope.trialTimerVisibility=!1,scope.createServerHellobar=!0,consoleApiSvc.isTrialUserExpired||1!==parseInt(Object.keys(consoleApiSvc.server.serverData).length)?consoleApiSvc.isTrialUserExpired?(scope.trialStatus="trial_expired_header",scope.createServerHellobarText="Your trial is expired. Upgrade and claim a free migration"):scope.createServerHellobar=!1:scope.createServerHellobarText="You are limited to launching only one server during your trial period."):$.isEmptyObject(consoleApiSvc.server.serverData)&&consoleApiSvc.isTrialUserExpired?(scope.trialTimerVisibility=!0,scope.createServerHellobar=!1,scope.trialStatus="trial_expired_header",scope.html="Your trial is expired. Upgrade and claim a free migration"):$.isEmptyObject(consoleApiSvc.server.serverData)&&!consoleApiSvc.isTrialUserExpired?(scope.trialTimerVisibility=!1,scope.createServerHellobar=!1):(scope.trialTimerVisibility=!0,scope.createServerHellobar=!1)}),scope.$watchGroup(["serverCurrDate","serverExpDate"],function(newVal,oldVal,scope){if(!$.isEmptyObject(consoleApiSvc.server.serverData)){var server_id=Object.keys(consoleApiSvc.server.serverData)[0];trailHandler(consoleApiSvc.server.serverData[server_id].current_date.replace(/-/g,"/"),consoleApiSvc.server.serverData[server_id].expiry_date.replace(/-/g,"/"))}}),scope.upgradeTrialAccount=function(){accountSvc.upgradeAccount(scope.trialStatus)},scope.template="js/app/views/trialTimer.html"}}}angular.module("cgConsole").directive("cwTrialTimer",["consoleApiSvc","$timeout","$window","commonSvc","accountSvc",cwTrialTimer])}(),function(){"use strict";function cwUiSrefIf($compile){return{link:function($scope,$element,$attrs){var uiSrefVal=$attrs.cwUiSrefVal,uiSrefIf=$attrs.cwUiSrefIf;$element.removeAttr("cw-ui-sref-if"),$element.removeAttr("cw-ui-sref-val"),$scope.$watch(function(){return $scope.$eval(uiSrefIf)},function(bool){bool?$element.attr("ui-sref",uiSrefVal):($element.removeAttr("ui-sref"),$element.removeAttr("href")),$compile($element)($scope)})}}}angular.module("cgConsole").directive("cwUiSrefIf",["$compile",cwUiSrefIf])}(),function(){"use strict";function cwWirecardCreditCard(){var cwWirecardCreditCardController=["$scope","$interval","$timeout","$sce","$state","consoleApiSvc","toastrSvc","accountSvc","wirecardSvc",function($scope,$interval,$timeout,$sce,$state,consoleApiSvc,toastrSvc,accountSvc,wirecardSvc){function processCreditCardStorage(){if(!that.creditCardAuthForm.$valid)return void angular.forEach(that.creditCardAuthForm.$error,function(field){angular.forEach(field,function(errorField){errorField.$setTouched()})});if(!that.preloader&&"storage"===that.state){var storage,errors="",errorList=[],post={};that.ccAuthError=!1,that.preloader=!0,that.message="Please wait verifying your credit card information",wcDebug("init storage");try{storage=new WirecardCEE_DataStorage,storage.storeCreditCardInformation(that.cc,function(response){wcDebug("storage callback triggered"),response&&"object"==typeof response?response.getStatus&&"function"==typeof response.getStatus&&response.getErrors&&"function"==typeof response.getErrors?0===response.getStatus()?(wcDebug("storage process successful"),post={billing:{address:that.billing.address,business_type:that.billing.business_type,city:that.billing.city,company:that.billing.company,country:that.countryList[that.billing.country].name,phone:that.billing.phone,ein:!that.billing.gst&&angular.isUndefined(that.billing.gst_number)?that.billing.vat_country+that.billing.vat_number:that.billing.gst_number},dd:that.debug,transaction:that.data.transaction},consoleApiSvc.callAPI("POST",getEndpointUrl(),post,"initWirecardPaymentProcess").then(function(response){that.paymentEndpoint=response.url,initPaymentProcess()},function(response){wcDebug("payment init process failed"),that.defaultError="",angular.isDefined(response.data)&&angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)?that.defaultError+=error.message+"<br/>":that.defaultError=response.data.message})}),cancelProcess(that.defaultError)})):(errorList=response.getErrors(),that.message="",that.preloader=!1,angular.forEach(errorList,function(v){errors+=v.message+"<br />","account_credit_card"===that.data.pageState&&30001===parseInt(v.errorCode)&&(that.ccAuthError=!0,$timeout(function(){$("html, body").animate({scrollTop:$(".wc-cc_auth_error").offset().top},2e3)},100))}),wcDebug("storage got errors - "+errors),toastrSvc.error(errors),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.wirecardCreditCardAuthError,{action:that.data.buttonText,error_list:errorList},"wirecardCCAuthError")):(wcDebug("storage get status or get error data error"),wcDebug("get status type: "+typeof response.getStatus),wcDebug("get errors type: "+typeof response.getErrors),cancelProcess(that.defaultError)):(wcDebug("storage response data not found - "+typeof response),cancelProcess(that.defaultError))})}catch(e){wcDebug("error on storage process - "+e.message),cancelProcess(that.defaultError)}}}function creditCardAuthProviderUpdate(){!that.preloader&&that.ccAuthError&&"storage"===that.state&&(that.preloader=!0,that.message="Please wait for while... processing your request",wcDebug("Changing user provider type to adyen"),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.wirecardCreditCardAuthProviderUpdate,null,"creditCardAuthProviderUpdate").then(function(response){that.preloader=!1,that.message="",response.status?accountSvc.generateFormAndSubmit(response.data):(wcDebug("Provider change status error"),cancelProcess(that.defaultError))},function(){wcDebug("Provider update call failed"),cancelProcess(that.defaultError)}))}function cancelProcess(message){that.cc={},that.data={},that.billing={},that.state=!1,that.preloader=!1,that.message="",that.paymentFormHtml="",that.paymentEndpoint="",wirecardSvc.resetCCAuthProcess(),message&&toastrSvc.error(message),wcDebug("Cancel message: "+message),wcDebugPostData()}function initPaymentProcess(){wcDebug("payment process started and tracking transaction"),wirecardSvc.resetCCAuthProcess(),that.paymentFormHtml=$sce.trustAsHtml('<iframe class="glb-pull-wide" id="wc-paymentForm" flex="100" frameborder="0" allowtransparency="true" src="'+that.paymentEndpoint+'"></iframe>'),that.cc={},that.billing={},that.message="",that.preloader=!1,that.state="payment",trackPaymentTransactionStatus()}function trackPaymentTransactionStatus(){wirecardSvc.pooling.payment=$timeout(function(){wcDebug("calling transaction tracker"),isValidPaymentProcess()&&consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.wirecardTransactionStatus,null,"trackWirecardTransaction").then(function(response){if(isValidPaymentProcess()){if(response&&response.status)switch(response.status){case"pending":return trackPaymentTransactionStatus();case"failed":case"success":return paymentProcessComplete(response.status,response.notification)}wcDebug("tracking transaction failed due to response status"),cancelProcess(that.defaultError)}},function(){isValidPaymentProcess()&&trackPaymentTransactionStatus()})},25e3)}function paymentProcessComplete(status,notification){switch(that.paymentFormHtml="",that.paymentEndpoint="",that.state=status,that.data.pageState){case"account_credit_card":if("success"===status)return window.location="/account/credit_card",!1;cancelProcess()}notification?notification.status?toastrSvc.success(notification.message):toastrSvc.error(notification.message):"success"!==status&&toastrSvc.error(that.defaultError)}function onCountryChange(newVal,oldVal){var iso=that.billing.country;that.countryList[iso]&&angular.isDefined(that.countryList[iso].tax_type)&&"n/a"!=that.countryList[iso].tax_type&&(that.billing[that.countryList[iso].tax_type]=!0),$timeout(function(){!that.isFirstTime&&angular.isDefined(iso)&&angular.isDefined(that.countryList[iso])&&angular.isDefined(that.countryList[iso].phonecode)&&(that.isFirstTime=!1,that.billing.phone="+"+that.countryList[iso].phonecode),console.log(newVal,oldVal),(!that.billing.phone||that.billing.phone&&oldVal)&&(that.isFirstTime=!1,that.billing.phone="+"+that.countryList[iso].phonecode),oldVal&&angular.isDefined(that.billing[that.countryList[oldVal].tax_type])&&(that.isFirstTime=!1,that.billing[that.countryList[oldVal].tax_type]=!1)},200)}function init(){that.countryList={},that.vatCountryList={},that.billingRequired=!1,that.buttonText=that.data.buttonText,that.subHeadingText=that.data.subHeadingText||"Please enter your Credit Card information",that.cancelMessage=that.data.cancelMessage,that.cc={},that.billing={},requireFields=["address","business_type","city","country","phone"],angular.forEach(that.data.billing,function(v,k){that.billing[k]=v}),vatCountry=that.billing.vat_number?that.billing.vat_number.substring(0,2):"",angular.forEach(that.data.countries,function(v){v.in_europe=parseInt(v.in_europe,10),v.in_europe&&(that.vatCountryList[v.iso]=v,vatCountry===v.iso&&(that.billing.vat_country=v.iso,that.billing.vat_number=that.billing.vat_number.replace(v.iso,""))),that.billing.gst=!1,angular.forEach(taxtypes.countries,function(value,key){-1!==value.indexOf(v.iso)&&(that.billing.gst=that.billing.vat_number)}),v.name===that.billing.country&&(that.billing.country=v.iso),that.countryList[v.iso]=v}),that.billing.business_type=parseInt(that.billing.business_type,10),1===that.billing.business_type&&requireFields.push("company"),onCountryChange(),1===that.billing.business_type&&that.billing.inEurope&&(requireFields.push("vat_country"),requireFields.push("vat_number")),that.billing.gst&&1===that.billing.business_type&&requireFields.push("gst"),angular.forEach(requireFields,function(k,v){v=that.billing[k],0===v||v&&null!==v&&""!==v&&"N/A"!==v&&"n/a"!==v&&"n"!==v&&"N"!==v||(that.billingRequired=!0)}),that.preloader=!1,that.message="",that.state="storage",wcDebug("process init")}function loadAsset(){var asset;that.message="Please wait for while... loading assets",i=0,wirecardSvc.resetCCAuthProcess(),$timeout(function(){if(asset=document.createElement("script"),asset.setAttribute("id","wirecard_storage_script"),asset.setAttribute("type","text/javascript"),asset.setAttribute("src",that.data.jsUrl),$("head").append(asset),that.data.jsUrl&&"string"==typeof that.data.jsUrl){var storage_id=that.data.jsUrl;storage_id=storage_id.replace("https://checkout.wirecard.com/seamless/dataStorage/js",""),storage_id=storage_id.replace("/D256271/",""),storage_id=storage_id.replace("/dataStorage.js",""),wcDebug("storage id: "+storage_id)}wcDebug("include asset files into head")},10),wirecardSvc.pooling.storage=$interval(function(){return wcDebug("waiting for asset - "+i),i+=1,angular.isDefined(window.WirecardCEE_DataStorage)&&"function"==typeof window.WirecardCEE_DataStorage?(wcDebug("asset successfully loaded"),$interval.cancel(wirecardSvc.pooling.storage),init(),!1):void(i>60&&($interval.cancel(wirecardSvc.pooling.storage),cancelProcess(that.defaultError)))},1e3)}function generateDateRange(){for(that.range={month:[],year:[]},i=1;13>i;i++)that.range.month.push(i);for(i=2017;2041>i;i++)that.range.year.push(i)}function getEndpointUrl(){switch(that.data.pageState){case"account_credit_card":return consoleApiSvc.API.URL.wirecardCreditCardAuth;case"account_invoice":return consoleApiSvc.API.URL.wirecardPayInvoiceTransaction;case"account_fund":return consoleApiSvc.API.URL.wirecardAddFundTransaction;default:return""}}function isValidPaymentProcess(){return wirecardSvc.pooling.payment&&that.data.pageState===$state.current.name&&"payment"===that.state}function wcDebug(data){var client_date=new Date,format_date="";format_date+=client_date.getFullYear()+"-",format_date+=client_date.getMonth()+1+"-",format_date+=client_date.getDate()+" ",format_date+=client_date.getHours()+":",format_date+=client_date.getMinutes()+":",format_date+=client_date.getSeconds(),data="["+format_date+"] - "+data,that.debug.push(data)}function wcDebugPostData(){consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.wirecardCreditCardAuthSaveData,{dd:that.debug},"wirecardCreditCardAuthSaveData"),that.debug=[]}var i,that=this,vatCountry="",requireFields=[],taxtypes={countries:{GST:["SG"]}};that.creditCardAuthForm="creditCardAuthForm",that.processCreditCardStorage=processCreditCardStorage,that.cancelProcess=cancelProcess,that.onCountryChange=onCountryChange,that.creditCardAuthProviderUpdate=creditCardAuthProviderUpdate,that.defaultError="Unexpected error occurred during transaction process.",that.ccAuthError=!1,that.debug=[],that.isFirstTime=!0,that.regex={wirecard_cvc:consoleApiSvc.getRegex("wirecard_cvc"),wirecard_cc_number:consoleApiSvc.getRegex("wirecard_cc_number"),wirecard_holder_name:consoleApiSvc.getRegex("wirecard_holder_name"),wirecard_vat_number:consoleApiSvc.getRegex("wirecard_vat_number"),phone_number_close_io:consoleApiSvc.getRegex("phone_number_close_io")},generateDateRange(),$scope.$watch("that.state",function(){switch(that.state){case"init":loadAsset();break;case"cancel":cancelProcess(that.cancelMessage)}})}];return{restrict:"E",replace:!0,templateUrl:"js/app/views/cwWirecardCreditCard-v1.html",controller:cwWirecardCreditCardController,controllerAs:"that",bindToController:!0,scope:{data:"=",state:"=",preloader:"=",message:"="}}}angular.module("cgConsole").directive("cwWirecardCreditCard",cwWirecardCreditCard)}(),function(){"use strict";function Filter($filter){return function(utcDateString,format){if(utcDateString){var date=moment(utcDateString,format).format("YYYY-MM-DD HH:mm:ss");return moment.utc(date).local().format(format)}}}angular.module("cgConsole").filter("firstUpper",function(){return function(input,scope){return input=input.replace(/_/g," "),input?input.split(" ").map(function(wrd){return wrd.charAt(0).toUpperCase()+wrd.substr(1).toLowerCase()}).join(" "):""}}).filter("moment",function(){return function(input,momentFn){var args=Array.prototype.slice.call(arguments,2),momentObj=moment(input);return momentObj[momentFn].apply(momentObj,args)}}).filter("orderObjectBy",function(consoleApiSvc){return function(input,attribute){switch(parseInt(attribute)){case 1:return consoleApiSvc.sortServerByLast(input,"created_at");case 2:return consoleApiSvc.sortServerByName(input,"label");case 3:return consoleApiSvc.sortServerByStatus(input,"status");case 4:return consoleApiSvc.sortServerByName(input,"cloud");case 5:return consoleApiSvc.sortServerByAppCount(input,"apps");case 7:return consoleApiSvc.sortAppsByLast(input,"created_at");case 8:return consoleApiSvc.sortServerByFirst(input,"created_at")}}}).filter("isEmpty",function(){return function(object){return $.isEmptyObject(object)}}).filter("isNotEmpty",function(){return function(object){return!$.isEmptyObject(object)}}).filter("serverAddon",function(){return function(input){if(!input)return input;var result={};return angular.forEach(input,function(value,key){1===parseInt(value.binding)&&1===parseInt(value.view_type)&&(result[key]=value)}),result}}).filter("listAddon",function(){return function(input){if(!input)return input;var result=[];return angular.forEach(input,function(value,key){1!==parseInt(value.binding)&&2!==parseInt(value.binding)&&3!==parseInt(value.binding)||(result.push(value),result.sort(function(a,b){return a.sort_order-b.sort_order}))}),result}}).filter("appAddon",function(){return function(input){if(!input)return input;var result={};return angular.forEach(input,function(value,key){1!==parseInt(value.binding)&&(result[key]=value)}),result}}).filter("slice",function(){return function(arr,start,end){return arr?arr.slice(start,end):void 0}}).filter("removeIllegalExpression",function(){return function(arr){return arr?arr.replace("_"," ").replace(/[|&;:$%@"<>()+,\\]/g,""):void 0}}).filter("captializeFirstLetter",function(){return function(input){return input.split(" ").map(function(word){return word[0].toUpperCase()+word.substr(1)}).join(" ")}}).filter("stringBreak",function(){return function(val){function logCharacter(){var screenWidth=$(window).width();if(1180==screenWidth||screenWidth>1180)var characterLength=95;else if(screenWidth>960&&1180>screenWidth)var characterLength=60;else if(screenWidth>600&&961>screenWidth)var characterLength=50;else var characterLength=40;return characterLength}var expr=new RegExp(".{1,"+logCharacter()+"}","g");return val.match(expr).join(" ")}}).filter("dateWithTimeZone",function(){return function(date){if(date){var dt=moment(1e3*date);return dt.tz(moment.tz.guess()).format("DD/MM/YYYY HH:mm z")}}}).filter("dateWithTime",function(){return function(date){if(date){var dt=moment(date);return dt.tz(moment.tz.guess()).format("DD/MM/YYYY HH:mm")}}}).filter("getSizeInUnits",function(consoleApiSvc){return function(size){return consoleApiSvc.getSize(1024*size,"KB",!1,!0)}}).filter("utcToLocal",Filter)}(),function(){"use strict";function accountSvc(consoleApiSvc,$state,toastrSvc,$http,$q,commonSvc,analyticsSvc,serverViewPath,$interval,$timeout,guestSvc){var root={accountDetail:!1,billing:!1,creditCard:!1,fund:!1,invoice:!1,referralDetail:!1,affiliateCategory:!1,SASPixelCode:"",SASReferral:!1,processing:!1,dynamicFlex:!1};return root.getAccountDetail=function(){return root.accountDetail},root.fetchAccountDetail=function(){var deferred=$q.defer(),requestId="getAccountDetail";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getAccountDetail,null,requestId).then(function(response){root.accountDetail=response,deferred.resolve()},function(response){deferred.reject(response)}),deferred.promise},root.updateProfile=function(profile){var deferred=$q.defer(),requestId="updateProfile";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateProfile,profile,requestId).then(function(response){root.accountDetail.profile=angular.copy(profile),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.activateTFA=function(tfa){var data,deferred=$q.defer(),requestId="activateTFA";return data={activation_code:tfa.activation_code},consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.activateTFA,data,requestId).then(function(response){root.accountDetail.tfa={status:1},root.accountDetail.profile={backupCodeCount:-1},root.accountDetail.newLoginAlert=3,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.deactivateTFA=function(){var deferred=$q.defer(),requestId="deactivateTFA";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.deactivateTFA,null,requestId).then(function(response){root.accountDetail.tfa=response,root.accountDetail.profile={backupCodeCount:-1},deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.generateBackupCode=function(){var deferred=$q.defer(),requestId="generateBackupCode";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.generateBackupCode,null,requestId).then(function(response){root.accountDetail.profile={backupCodeCount:response.length},deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.verifyBackupCode=function(tfa){var data,deferred=$q.defer(),requestId="verifyBackupCode";return data={backup_code:tfa.backup_code},consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.verifyBackupCode,data,requestId).then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.downloadBackupCode=function(backupCode){var a=document.createElement("a"),mp_data={event_name:"tfa_generate_code",is_success:!0,action:"download_backup_code"};analyticsSvc.addAnalytics(mp_data);var csv="";if(backupCode.forEach(function(row){csv+=row,csv+="\n"}),window.navigator.msSaveOrOpenBlob){var blob=new Blob([decodeURIComponent(encodeURI(csv))],{type:"text/csv;charset=utf-8;"});navigator.msSaveBlob(blob,"cloudways_backupcodes.txt")}else a.href="data:attachment/txt;charset=utf-8,"+encodeURI(csv),a.target="_blank",a.download="cloudways_backupcodes.txt",document.body.appendChild(a),a.click()},root.getCreditCard=function(){return root.creditCard},root.fetchCreditCard=function(){var deferred=$q.defer(),requestId="fetchCreditCard";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getCreditCard,null,requestId).then(function(response){root.creditCard=response,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.updateAutoCharge=function(status){var deferred=$q.defer(),requestId="updateAutoCharge",data={status:status};return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateAutoCharge,data,requestId).then(function(response){root.creditCard.autoCharge.status=status,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getBilling=function(){if(root.billing){var currentHour=new Date;currentHour=parseInt(currentHour.getHours(),10),currentHour>root.billing.lastUpdate&&(root.billing=!1)}return root.billing},root.fetchBilling=function(){var deferred=$q.defer(),requestId="fetchBilling";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getBilling,null,requestId).then(function(response){root.billing=response,root.billing.lastUpdate=new Date,root.billing.lastUpdate=parseInt(root.billing.lastUpdate.getHours(),10),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getInvoice=function(){return root.invoice},root.fetchInvoice=function(){var deferred=$q.defer(),requestId="fetchInvoice";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getInvoice,null,requestId).then(function(response){root.invoice=response.invoices,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getFund=function(){return root.fund},root.fetchFund=function(){var deferred=$q.defer(),requestId="fetchFund";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getFund,null,requestId).then(function(response){root.fund=response,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getPartial=function(partial){return serverViewPath+"partials/"+partial+".html"},root.range=function(min,max,type,step){var i,input=[];switch(step=step||1,type){case"inverse":for(i=max;i>=min;i-=step)input.push(i);break;default:for(i=min;max>=i;i+=step)input.push(i)}return input},root.parseErrorMessages=function(response){var message="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?message+=error.message+"<br/>":message=response.data.message})}),toastrSvc.error(message)},root.generateFormAndSubmit=function(data){document.body.innerHTML=root.generateFormHtml(data),document.getElementById("formData").submit()},root.generateFormHtml=function(data){var html="";return html='<form name="formData" id="formData" action="'+data.url+'" method="post">',angular.forEach(data.form,function(val,key){html+='<input type="hidden" name="'+key+'" value="'+val+'" />'}),html+="</form>"},root.clearCached=function(key){root[key]&&(root[key]=!1)},root.upgradeAccount=function(source){var mp_data={event_name:"upgrade_trial_account",source:source};analyticsSvc.addAnalytics(mp_data),$state.go("account_credit_card",{auth:"yes"})},root.reactivateAccount=function(){var deferred=$q.defer(),requestId="reactivateAccount";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.reactivateAccount,null,requestId).then(function(){location.reload(!0)},function(response){deferred.reject(response),toastrSvc.error("Unexpected error occurred.")}),deferred.promise},root.getReferralDetail=function(){return root.referralDetail},root.fetchReferralDetail=function(){var deferred=$q.defer(),requestId="getReferralDetail";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getReferralDetail,null,requestId).then(function(response){root.referralDetail=response,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.updateReferralProfile=function(profile){var deferred=$q.defer(),requestId="getReferralProfile";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateReferralProfile,profile,requestId).then(function(response){root.referralDetail.profile=angular.copy(profile),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.updateReferralTermCondition=function(){var deferred=$q.defer(),requestId="updateReferralTermCondition";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateReferralTermCondition,null,requestId).then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.fetchAffiliateCategory=function(){return root.affiliateCategory},root.getAffiliateCategory=function(userId){var deferred=$q.defer(),requestId="getAffiliateCategory";return consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getAffiliateCategory,{affiliateId:userId},requestId).then(function(response){root.affiliateCategory=response.category,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.isBankTransfer=function(){return!(!angular.isDefined(consoleApiSvc.user.userDetails.auth_provider_type)||4!==consoleApiSvc.user.userDetails.auth_provider_type)},root.updateCsrfToken=function(){$.ajax({url:"api/v1/cwCsrfToken",method:"POST",async:!1,success:function(token){var scope=angular.element($("#invisible_form")).scope();scope.$apply(function(){$('meta[name="_token"]').attr("content",token),$("input[name=_token]").val(token)})}})},root.setSASPixelCode=function(user){if("live"!==window.APP_ENV)return!1;if(angular.isDefined(user.isSASUser)&&user.isSASUser){var userId=guestSvc.setUserData(user.data);root.SASPixelCode="<img src='https://shareasale-analytics.com/sale.cfm?amount=0&tracking="+userId+"&transtype=lead&merchantID=75038' width='1' height='1'>",root.SASReferral=!0}},root.verifyAccount=function(source){var mp_data={event_name:"verify_trial_account",source:source};analyticsSvc.addAnalytics(mp_data),"cw_sms_email_pending"===source?$state.go("verifying_phone"):"cw_sms_pending"===source?$state.go("verifying_phone"):"cw_email_pending"!==source||consoleApiSvc.user.userDetails.user_blocked_in_signup?"cw_email_pending"===source&&consoleApiSvc.user.userDetails.user_blocked_in_signup&&$state.go("verifying_email"):root.sendEmailToUser()},root.sendEmailToUser=function(){var deferred=$q.defer(),data={email:consoleApiSvc.user.userDetails.email},result=consoleApiSvc.callAPI("POST","api/v1/user/verification/email",data,"verify_"+data.email);return root.processing=!0,result.then(function(response){root.processing=!1,deferred.resolve(response)},function(response){root.processing=!1,deferred.reject(response),toastrSvc.error(response.data.message?response.data.message:"Unfortunately, operation failed due to unexpected error.")}),deferred.promise},root.isPaymentOptionsVisible=function(invoices){return angular.forEach(invoices,function(i){i.credit_card_text="Update Credit Card",0===parseInt(i.payment_status)&&1!==parseInt(i.invoice_bulk_charge)?(i.payment_method=angular.isDefined(i.payment_methods.cc)&&i.payment_methods.cc.selected||Object.keys(i.funds)&&parseFloat(i.funds.available)>0||2===parseInt(i.invoice_bulk_charge)?"cc":"paypal",i.credit_card_text="paypal"==i.payment_method?"Add Credit Card":i.credit_card_text,i.payment_options="paypal"==i.payment_method?i.payment_method:"cc"):0===parseInt(i.payment_status)&&1===parseInt(i.invoice_bulk_charge)&&(i.payment_method=angular.isDefined(i.payment_methods.cc)&&i.payment_methods.cc.selected?"cc_failed":angular.isDefined(i.funds.available)&&parseFloat(i.funds.available)>0?"cc_funds":"paypal",i.credit_card_text=-1!==["paypal","cc_funds"].indexOf(i.payment_method)?"Add Credit Card":i.credit_card_text,i.payment_options=-1!==["paypal","cc_funds"].indexOf(i.payment_method)?i.payment_method:"cc_failed",root.dynamicFlex=-1!==["paypal","cc_funds"].indexOf(i.payment_method))}),invoices},root.newLoginAlert=function(data){var deferred=$q.defer(),requestId="newLoginAlert";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.newLoginAlert,data,requestId).then(function(response){root.accountDetail.newLoginAlert=response.preference,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.sendAttributesToSlack=function(data){var requestId="newConversionAlert";consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.newConversionAlert,data,requestId)},root}angular.module("cgConsole").factory("accountSvc",["consoleApiSvc","$state","toastrSvc","$http","$q","commonSvc","analyticsSvc","serverViewPath","$interval","$timeout","guestSvc",accountSvc])}(),function(){"use strict";function addonSvc(consoleApiSvc,$q,$rootScope){var root={addons:{},supportAddons:null,isAddonFetched:!1};return root.getAddonData=function(){var deferred=$q.defer();return root.isAddonFetched?deferred.resolve(root.addons):(consoleApiSvc.callAPI("GET","api/v1/addon",null,"fetchingAddons").then(function(data){deferred.resolve(),root.addons=data.addons,angular.isDefined(data.supportAddons)&&(root.supportAddons=data.supportAddons)},function(data){deferred.reject(data)}),root.isAddonFetched=!0),deferred.promise},root}angular.module("cgConsole").factory("addonSvc",["consoleApiSvc","$q","$rootScope",addonSvc])}(),function(){"use strict";function analyticsSvc(consoleApiSvc,$filter,$state,$interval,memberSvc,$injector){var root={analytics:[],timer:null,delay:6e4};return root.getAnalytics=function(){return root.analytics},root.addAnalytics=function(data){data&&(data.event_source="platform_ui",data.event_name="pu_"+data.event_name,root.analytics.push(data))},root.sendAnalyticsToEventService=function(){root.timer=$interval(function(){if(root.analytics.length){var analytics=root.analytics;root.analytics=[],consoleApiSvc.callAPI("POST","api/v1/postEvent",{events:analytics})}},root.delay)},root.sendDataToMixPanel=function(item,section){
if("node_count"in item)root.addAnalytics({event_name:"cluster detail page",page:section.label,cluster_label:item.label,cluster_id:item.id});else{if(!memberSvc.isSectionPermitted(item.id,section.prmId))return!1;root.addAnalytics({event_name:"server detail page",page:section.label,server_label:item.label,server_id:item.id})}},root}angular.module("cgConsole").factory("analyticsSvc",["consoleApiSvc","$filter","$state","$interval","memberSvc","$injector",analyticsSvc])}(),function(){"use strict";function announcementSvc($injector,$mdSidenav,$q){var root={announcement:!1};return root.showCWAnnouncement=function(navDirection,$mdOpenMenu,$event){var commonSvc=$injector.get("commonSvc");$("body").addClass("remove-body-scroll"),$("html").css("overflow-y","scroll"),commonSvc.active_side_nav="cw_announcement",$mdSidenav(navDirection).open(),root.announcement.uiData||(root.announcement.uiData=!0,commonSvc.setUserUiData(root.announcement.uiKey,1))},root.fetchCWAnnouncement=function(){var consoleApiSvc=$injector.get("consoleApiSvc"),commonSvc=$injector.get("commonSvc");consoleApiSvc.callAPI("GET","api/v1/cw_announcement",null,"cwAnnouncement").then(function(response){if(root.announcement=response,root.announcement.offset=parseInt(response.list.length,10),root.announcement.offset>0){var created_date=response.list[0].created_on;root.announcement.uiKey="cwAnnouncement"+created_date.replace(/ |-|:/gi,""),root.announcement.uiData=commonSvc.getUserUiData(root.announcement.uiKey)}else root.announcement.uiData=!0})},root.cwAnnouncementLoadMore=function(){var deferred=$q.defer(),consoleApiSvc=$injector.get("consoleApiSvc"),data=($injector.get("commonSvc"),{offset:root.announcement.offset});return consoleApiSvc.callAPI("POST","api/v1/cw_announcement_loadmore",data,"cwAnnouncement").then(function(response){angular.forEach(response.list,function(val,key){root.announcement.list.push(val)}),root.announcement.offset=root.announcement.list.length,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root}angular.module("cgConsole").factory("announcementSvc",["$injector","$mdSidenav","$q",announcementSvc])}(),function(){"use strict";function apiAccessSvc(consoleApiSvc,$q,toastrSvc){var root={key:{},apiKeyFetched:!1};return root.getApiKey=function(method){var deferred=$q.defer();return root.apiKeyFetched?deferred.resolve(root.key):(consoleApiSvc.callAPI(method,consoleApiSvc.API.URL.apiKey).then(function(response){deferred.resolve(response),root.key=response},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),root.apiKeyFetched=!0),deferred.promise},root}angular.module("cgConsole").factory("apiAccessSvc",["consoleApiSvc","$q","toastrSvc",apiAccessSvc])}(),function(){"use strict";function appAnalyticsSvc(consoleApiSvc,$http,$q){var root={params:{traffic:{},php:{},mysql:{},cron:{},serverUsage:{},appUsage:{}},monitoring:{traffic:{},trafficDetails:{},php:{},mysql:{},cron:{},serverUsage:{},appUsage:{},accessLog:{},errorLog:{},accessLogMethods:{},accessLogCodes:{},errorLogErrors:{}},stagingMonitoring:{traffic:{},trafficDetails:{},php:{},mysql:{},cron:{},serverUsage:{},appUsage:{}},isFetched:!1,dynamicDataLoadCount:{apache:1,nginx:1,php:1},API:{URL:{analyticsParams:"api/v1/app/analytics",analyticsTraffic:"api/v1/app/analytics/traffic",analyticsTrafficDetail:"api/v1/app/analytics/trafficDetails",analyticsPHP:"api/v1/app/analytics/php",analyticsCRON:"api/v1/app/analytics/cron",analyticsServerUsage:"api/v1/server/analytics/serverUsage",analyticsMYSQL:"api/v1/app/analytics/mysql",analyticsAccessLogs:"api/v1/app/logs/access",analyticsErrorLogs:"api/v1/app/logs/error"}}};return root.getAnalyticsParam=function(section){var deferred=$q.defer();if(root.params[section].isFetched)deferred.resolve(root.params[section].data);else{var queryString="?section="+section;if(root.ifDuplicated("fetchingMonitorParams"))return;consoleApiSvc.callAPI("GET",root.API.URL.analyticsParams+queryString,null,"fetchingMonitorParams").then(function(data){root.params[section].isFetched=!0,root.params[section].data=data,deferred.resolve(data)},function(data){deferred.reject(data)})}return deferred.promise},root.getTraffic=function(application_id,server_id,resource,duration){var deferred=$q.defer(),queryString="?server_id="+server_id+"&app_id="+application_id+"&duration="+duration+"&resource="+resource;return root.ifDuplicated("creating_"+resource+"_operation")?void 0:(consoleApiSvc.callAPI("GET",root.API.URL.analyticsTraffic+queryString,null,"creating_"+resource+"_operation").then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise)},root.getTrafficDetails=function(application_id,server_id,resource,resourceList,dateTime){var deferred=$q.defer(),request={app_id:application_id,server_id:server_id,resource:resource,resource_list:resourceList,from:dateTime.from,until:dateTime.until};return root.ifDuplicated("creatingIPOperation"+resource)?void 0:(consoleApiSvc.callAPI("POST",root.API.URL.analyticsTrafficDetail,request,"creatingIPOperation"+resource).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise)},root.getmonitoringData=function(controllerId){return root.monitoring[controllerId]},root.getMonitoringStagingData=function(controllerId){return root.stagingMonitoring[controllerId]},root.getPHPData=function(application_id,server_id,resource,duration){var deferred=$q.defer(),queryString="?server_id="+server_id+"&app_id="+application_id+"&duration="+duration+"&resource="+resource;return root.ifDuplicated("creatingrequestedPagesOperation"+resource)?void 0:(consoleApiSvc.callAPI("GET",root.API.URL.analyticsPHP+queryString,null,"creatingrequestedPagesOperation"+resource).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise)},root.getCronData=function(application_id,server_id){var deferred=$q.defer();if(!root.ifDuplicated("creatingCronOperation"+application_id)){var queryString="?server_id="+server_id+"&app_id="+application_id;return consoleApiSvc.callAPI("GET",root.API.URL.analyticsCRON+queryString,null,"creatingCronOperation"+application_id).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise}},root.getServerUsage=function(server_id){var deferred=$q.defer(),queryString="?server_id="+server_id;return root.ifDuplicated("creatingrequestedPagesOperation")?void 0:(consoleApiSvc.callAPI("GET",root.API.URL.analyticsServerUsage+queryString,null,"creatingrequestedPagesOperation").then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise)},root.getMySqlData=function(application_id,server_id,resource,duration){var deferred=$q.defer();if(!root.ifDuplicated("creatingMysqlOperation"+resource)){var queryString="?server_id="+server_id+"&app_id="+application_id+"&duration="+duration+"&resource="+resource;return consoleApiSvc.callAPI("GET",root.API.URL.analyticsMYSQL+queryString,null,"creatingMysqlOperation"+resource).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise}},root.refetchResourceObjectData=function(isRefetch,resource,controllerId){if(angular.isDefined(isRefetch)&&parseInt(isRefetch)){var data=root.getmonitoringData(controllerId);angular.equals({},data)||!angular.isDefined(data[resource])||angular.equals({},data[resource])||delete root.monitoring[data][resource]}},root.parseAndRound=function(value,decimal){var result=0,value=parseFloat(value);return result=Math.round(value),angular.isDefined(decimal)&&(result=value.toFixed(decimal)),1>value&&(result=Math.ceil(value)),result},root.ifDuplicated=function(requestId){var duplicated=$http.pendingRequests.filter(function(pendingReqConfig){return pendingReqConfig.requestId===requestId});return duplicated.length>0},root.getAccessLogData=function(application_id,app_fqdn,server_id,resource){var deferred=$q.defer();if(!root.ifDuplicated("creatingAccessLogsOperation"+resource)){var queryString="?server_id="+server_id+"&app_id="+application_id+"&resource="+resource+"&app_fqdn="+app_fqdn;return consoleApiSvc.callAPI("GET",root.API.URL.analyticsAccessLogs+queryString,null,"creatingAccessLogsOperation"+resource).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise}},root.getErrorLogData=function(application_id,app_fqdn,server_id,resource){var deferred=$q.defer();if(!root.ifDuplicated("creatingErrorLogsOperation"+resource)){var queryString="?server_id="+server_id+"&app_id="+application_id+"&resource="+resource+"&app_fqdn="+app_fqdn;return consoleApiSvc.callAPI("GET",root.API.URL.analyticsErrorLogs+queryString,null,"creatingErrorLogsOperation"+resource).then(function(data){deferred.resolve(data),root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise}},root}angular.module("cgConsole").factory("appAnalyticsSvc",["consoleApiSvc","$http","$q",appAnalyticsSvc])}(),function(){"use strict";function applicationSvc(serverMessages,consoleApiSvc,$state,toastrSvc,$q,$rootScope,$mdDialog,clusterSvc,cdnSvc,$injector){function cloneAppOnSameServer(appId,server_id,stagingEnv){var data={server_id:server_id,app_id:appId,staging:stagingEnv},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.clone_app,data);result.then(function(response){if(response.operation_id){consoleApiSvc.server.serverData[server_id];consoleApiSvc.startPolling(server_id,response.operation_id),$(".hdr-loader").hide(),$state.go("server")}},function(response){$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}function cloneAppForOtherServer(appId,server_id,destination_server_id){consoleApiSvc.server.serverData[server_id].operation_type="backup_for_clone",consoleApiSvc.server.serverData[destination_server_id].operation_type="clone_app";var data={server_id:server_id,app_id:appId,destination_server_id:destination_server_id},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.cloneToOtherServer,data);result.then(function(response){$(".hdr-loader").hide(),response.source_op_id&&(consoleApiSvc.startPolling(server_id,response.source_op_id),consoleApiSvc.startPolling(destination_server_id,response.destination_op_id),$state.go("server"))},function(response){$(".hdr-loader").hide(),consoleApiSvc.server.serverData[server_id].operation_type="",consoleApiSvc.server.serverData[destination_server_id].operation_type="";var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}function AddAppController($mdDialog,userType,isTrialUserExpired){var vm=this;vm.server="",vm.servers=[],vm.isServerCreateEnabled=!0,vm.memberSvc=$injector.get("memberSvc"),vm.isClusterCreateEnabled=clusterSvc.isClusterCreateEnabled(),vm.hasError=!1;var serverData=consoleApiSvc.server.serverData;angular.forEach(serverData,function(server){vm.servers.push({id:server.id,label:server.label,cloud:server.cloud,status:server.status})}),"trial"===userType&&(isTrialUserExpired||vm.servers.length>0)&&(vm.isServerCreateEnabled=!1,vm.server=parseInt(Object.keys(serverData)[0])),window.scrollTo(0,0),vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){$mdDialog.cancel()},vm.selectServer=function(data){$mdDialog.hide(data)}}function cloneStagingAppOnSameServer(appId,server_id,stagingEnv){var data={server_id:server_id,app_id:appId,staging:stagingEnv},result=consoleApiSvc.callAPI("POST","api/v1/staging/app/cloneApp",data);result.then(function(response){response.operation_id&&(consoleApiSvc.server.serverData[server_id].operation_type="add_staging_app",consoleApiSvc.startPolling(server_id,response.operation_id),$(".hdr-loader").hide(),$state.go("server"))},function(response){$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}function cloneStagingAppForOtherServer(appId,server_id,destination_server_id,stagingEnv){consoleApiSvc.server.serverData[server_id].operation_type="staging_sync_data",consoleApiSvc.server.serverData[destination_server_id].operation_type="add_staging_app";var data={server_id:server_id,app_id:appId,destination_server_id:destination_server_id,isStaging:stagingEnv},result=consoleApiSvc.callAPI("POST","api/v1/staging/app/cloneToOtherServer",data);result.then(function(response){$(".hdr-loader").hide(),response.source_op_id&&(consoleApiSvc.startPolling(server_id,response.source_op_id),consoleApiSvc.startPolling(destination_server_id,response.destination_op_id),$state.go("server"))},function(response){$(".hdr-loader").hide(),consoleApiSvc.server.serverData[server_id].operation_type="",consoleApiSvc.server.serverData[destination_server_id].operation_type="";var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)})}var root={app:{fpm:{},varnish:{},varnish_setting:{},ssh_perms:{},application_access:{},app_credentials:{},isStaging:!1,git_url:!1,settings_values:{},server_packages:{},specifications:{}}};return root.delete_app=function(appId,server_id){var deferred=$q.defer();if(1===consoleApiSvc.server.serverData[server_id].apps.length)return deferred.reject(),toastrSvc.warning("You can't delete the only application on a server. You will need to add another (new) application first to delete the current application."),deferred.promise;$(".hdr-loader").show();var app_label;angular.forEach(consoleApiSvc.server.serverData[server_id].apps,function(app){parseInt(app.id)===parseInt(appId)&&(app_label=app.label)});var result=consoleApiSvc.callAPI("DELETE",consoleApiSvc.API.URL.app+"/"+appId+"/?server_id="+server_id);return result.then(function(response){response.operation_id&&(deferred.resolve(response),consoleApiSvc.startPolling(server_id,response.operation_id),$(".hdr-loader").hide(),window.PubSub.subscribe("operation-"+response.operation_id,function(msg,data){$rootScope.publish("appDeleted"),cdnSvc.removeCDN(server_id,appId)}),$state.go("server"))},function(response){deferred.reject(response),$(".hdr-loader").hide(),toastrSvc.error(response.data.message)}),deferred.promise},root.clone_app=function(appId,server_id,isStaging){isStaging?cloneStagingAppOnSameServer(appId,server_id,isStaging):cloneAppOnSameServer(appId,server_id)},root.clone_app_on_other_server=function(appId,source_server_id,destination_server_id,isStaging){isStaging?cloneStagingAppForOtherServer(appId,source_server_id,destination_server_id,isStaging):cloneAppForOtherServer(appId,source_server_id,destination_server_id)},root.fetchAppSpecs=function(page){var deferred=$q.defer();if(0!==Object.keys(root.app.specifications).length)deferred.resolve(root.app.specifications[page]);else{var result=consoleApiSvc.callAPI("GET","api/v1/app/fetchVersionSpecs",null,"fetchSpecs");result.then(function(specifications){root.app.specifications=specifications,deferred.resolve(specifications[page])},function(specifications){deferred.reject(specifications)})}return deferred.promise},window.PubSub.subscribe("appRendered",function(msg,data){0===Object.keys(root.app.specifications).length&&root.fetchAppSpecs(),window.PubSub.unsubscribe("appRendered")}),root.isEnabledforTrial=function(trialStatus){var result=!0;return"trial"!==consoleApiSvc.user.userDetails.customer_type||parseInt(trialStatus)||(result=!1),result},root.getAppVersionError=function(data){var result={error:!1,btnStatus:!1};if(angular.isUndefined(data.appVersion)||angular.isUndefined(data.provider)||angular.isUndefined(data.resource)||angular.isUndefined(data.appName)||angular.isUndefined(root.app.specifications[data.page]))return result;data.appName=data.appName.toLowerCase();var appSpecs=root.app.specifications[data.page],appVersion=data.appName+parseInt(data.appVersion);if(angular.isUndefined(appSpecs[data.provider])||angular.isUndefined(appSpecs[data.provider][appVersion]))return result;var specs=appSpecs[data.provider][appVersion];return angular.forEach(data.resource,function(value,key){angular.isDefined(specs[key])&&specs[key]==value&&root.isEnabledforTrial(specs.trial_status)&&(result={error:specs.error,btnStatus:parseInt(specs.button_status),defaultSize:specs.default_size})}),result},root.update_app_label=function(app_id,server_id,label,application){var deferred=$q.defer();if(label===application.label)return application.label;$(".hdr-loader").show();var data={server_id:server_id,label:label},result=consoleApiSvc.callAPI("PUT",consoleApiSvc.API.URL.app+"/"+app_id,data,"update_app_"+app_id);return result.then(function(response){deferred.resolve(label),$(".hdr-loader").hide(),application.label=label,angular.forEach(consoleApiSvc.server.serverData,function(app){app.id===app_id&&(app.label=label)}),toastrSvc.success(serverMessages.app_label_updated,{placeholders:["label",{status:"successfully"}],app_id:app_id})},function(response){deferred.reject(application.label);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),$(".hdr-loader").hide(),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.onDemandBackup=function(data,requestId){var deferred=$q.defer(),result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.take_backup,data,requestId);return result.then(function(response){angular.isDefined(response.operation_id)&&response.operation_id&&deferred.resolve(response),deferred.resolve(response)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.resetAppPermissions=function(app_id,server_id,sys_user,ownership){var deferred=$q.defer(),requestId="reset_permissions_"+app_id,customer_type=consoleApiSvc.user.userDetails.type,data={app_id:app_id,server_id:server_id,customer_type:customer_type,ownership:ownership},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.reset_permissions,data,requestId),app_label="";return angular.forEach(consoleApiSvc.server.serverData[server_id].apps,function(app){parseInt(app.id)===parseInt(app_id)&&(app_label=app.label)}),result.then(function(response){angular.isDefined(response.operation_id)&&response.operation_id&&deferred.resolve(response),deferred.resolve(response)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.getAppVarnishStatus=function(app_id,app_name,server_id,sys_user){var deferred=$q.defer(),requestId="getAppVarnishStatus_"+app_id,queryString="?server_id="+server_id+"&app_name="+app_name+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_appVarnish+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.varnish[app_id]=response[0]},function(response){deferred.reject(response)}),deferred.promise},root.getAppVarnish=function(app_id){return root.app.varnish[app_id]},root.postAppVarnishStatus=function(app_id,app_name,server_id,sys_user,action,app_version_id){var deferred=$q.defer(),requestId="postAppVarnishStatus_"+app_id,data={server_id:server_id,app_name:app_name,action:action,app_id:app_id,app_version_id:app_version_id},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.post_appVarnish,data,requestId);return $(".hdr-loader").show(),result.then(function(response){$(".hdr-loader").hide(),"enable"===action?(root.app.varnish[app_id].varnish_enabled=!0,toastrSvc.success("Varnish has been enabled.")):(root.app.varnish[app_id].varnish_enabled=!1,toastrSvc.success("Varnish has been disabled.")),root.app.varnish_setting[app_id]&&(root.app.varnish_setting[app_id].varnish_app_enabled=root.app.varnish[app_id].varnish_enabled),deferred.resolve(root.app.varnish[app_id])},function(response){$(".hdr-loader").hide(),deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.getAppSshPermsStatus=function(app_id,server_id){var deferred=$q.defer(),requestId="getAppSshPermsStatus"+app_id,queryString="?server_id="+server_id+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_appSshPerms+queryString,null,requestId);return result.then(function(response){deferred.resolve(response.response),root.app.ssh_perms[server_id]=response.response},function(response){deferred.reject(response)}),deferred.promise},root.updateAppSshPerms=function(app_id,server_id,sys_user,action){var deferred=$q.defer(),requestId="updateAppSshPerms_"+app_id,data={app_id:app_id,server_id:server_id,update_perms_action:action},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.update_appSshPerms,data,requestId);return result.then(function(response){angular.isDefined(response.operation_id)&&response.operation_id&&deferred.resolve(response),deferred.resolve(response)},function(response){$(".hdr-loader").hide(),deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.getApplicationAccess=function(app_id,server_id){var deferred=$q.defer(),requestId="getAppState"+app_id,queryString="?server_id="+server_id+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_application_access+queryString,null,requestId);return result.then(function(response){response.status||-1!==response.code?(deferred.resolve(response.response),root.app.application_access[server_id]=response.response):deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.clearCachedAppFPM=function(server){angular.forEach(server.apps,function(app){angular.isDefined(root.app.fpm[app.id])&&delete root.app.fpm[app.id]})},root.getAppFPM=function(app_id){return root.app.fpm[app_id]},root.serverPackages=function(server_id){return root.app.server_packages[server_id]},root.getAppFPMSetting=function(app_id,app_name,server_id,sys_user){var deferred=$q.defer(),requestId="getAppFPMSetting_"+app_id,queryString="?server_id="+server_id+"&app_name="+app_name+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_appFPMSetting+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.fpm[app_id]=response.response},function(response){deferred.reject(response)}),deferred.promise},root.getServerPackages=function(app_id,server_id){var deferred=$q.defer(),requestId="getServerSetting_"+app_id,queryString="?server_id="+server_id+"&app_id="+app_id;if($.isEmptyObject(root.app.server_packages[server_id])){var result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_serverPackage+queryString,null,requestId);result.then(function(response){deferred.resolve(),root.app.server_packages[server_id]=response},function(response){deferred.reject(response)})}else deferred.resolve(root.app.server_packages[server_id]);return deferred.promise},root.postAppFPMSetting=function(app_id,app_name,server_id,sys_user,fpm_setting){var deferred=$q.defer(),requestId="postAppFPMSetting_"+app_id,data={server_id:server_id,app_name:app_name,fpm_setting:fpm_setting,app_id:app_id},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.post_appFPMSetting,data,requestId);return result.then(function(response){toastrSvc.success("Application PHP FPM settings successfully updated."),root.app.fpm[app_id].settings=fpm_setting,deferred.resolve(root.app.varnish[app_id])},function(response){deferred.reject(root.app.fpm[app_id]);var errors_msg="";if(angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),angular.isDefined(response.data)&&angular.isDefined(response.data.code)&&(-3===response.data.code||-4===response.data.code)){var error='There were errors in your specified PHP-FPM configuration. Please make sure you are using the correct syntax. For further help, <a href="https://support.cloudways.com/how-to-change-php-fpm-settings/" target="_blank">click here.</a>';errors_msg+=error+"<br/>"}""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.getAppVarnishSetting=function(app_id){return root.app.varnish_setting[app_id]},root.fetchAppVarnishSetting=function(app_id,app_name,server_id,sys_user){var deferred=$q.defer(),requestId="getAppVarnishSetting_"+app_id,queryString="?server_id="+server_id+"&app_name="+app_name+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_appVarnishSetting+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.varnish_setting[app_id]=response.response},function(response){deferred.reject(response)}),deferred.promise},root.postAppVarnishSetting=function(app_id,app_name,server_id,sys_user,vcl_list,action,app_version_id){var deferred=$q.defer(),requestId="postAppVarnishSetting_"+app_id,data={server_id:server_id,app_id:app_id,app_name:app_name,vcl_list:vcl_list,action:action,app_version_id:app_version_id},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.post_appVarnishSetting,data,requestId);return result.then(function(response){root.app.varnish_setting[app_id].vcl_list=vcl_list,deferred.resolve(response)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg?toastrSvc.error(errors_msg):toastrSvc.error("Unexpected error occurred")}),deferred.promise},root.getAppById=function(appId){angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(app){return app.id===appId?app:void 0})})},root.getServerByAppId=function(appId){var serverObj;return angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(app){parseInt(app.id)===parseInt(appId)&&(serverObj=server)})}),serverObj},root.launchDBManager=function(server_id,app){var deferred=$q.defer(),server=consoleApiSvc.server.serverData[server_id],win=window.open("about:blank");return consoleApiSvc.callAPI("POST","api/v1/security/adminer",{server_id:server.id,app_id:app.id}).then(function(response){if(deferred.resolve(response),""!=response.response){var content='<form method="post" action="https://'+server.public_ip+':8082/" id="db_credential_form" style="display:none;" >';content+='<input type="text" name="auth[driver]" value="server" />',content+='<input type="text" name="auth[username]" value="'+app.mysql_user+'" />',content+='<input type="password" name="auth[password]" value="'+app.mysql_password+'" />',content+='<input type="text" name="auth[db]" value="'+app.mysql_db_name+'" />',content+='<input type="checkbox" name="auth[permanent]" value="0" />',content+='<input type="submit" value="Login" />',content+="</form>",content+='<script type="text/javascript" >document.getElementById("db_credential_form").submit();</script>',win.document.write(content)}},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root.addApp=function($event){$rootScope.preventNavigation(),$mdDialog.show({controller:AddAppController,controllerAs:"vm",templateUrl:"js/app/views/partials/select-server-for-add-app.html",parent:angular.element(document.body),targetEvent:$event,clickOutsideToClose:!1,locals:{userType:consoleApiSvc.user.userDetails.customer_type,isTrialUserExpired:consoleApiSvc.isTrialUserExpired}}).then(function(server){$rootScope.allowNavigation(),"new"===server?$state.go("server_create"):"new_cl"===server?$state.go("cluster_create"):$state.go("add_new_app",{id:server})},function(){$rootScope.allowNavigation()})},root.fetchAppCredentialSetting=function(server_id,app_id){angular.isArray(root.app.app_credentials[app_id])||(root.app.app_credentials[app_id]=[]);var deferred=$q.defer();return consoleApiSvc.callAPI("GET","api/v1/app/creds?server_id="+server_id+"&app_id="+app_id).then(function(response){angular.isDefined(response.app_creds)&&response.app_creds.length>0?"secondary"===consoleApiSvc.user.userDetails.type?root.app.app_credentials[app_id].push(response.app_creds[0]):angular.forEach(response.app_creds,function(val,key){root.app.app_credentials[app_id].push(val)}):root.app.app_credentials[app_id]=[],deferred.resolve(root.app.app_credentials[app_id])},function(response){deferred.reject(response)}),deferred.promise},root.getAppCredentialList=function(app_id){return root.app.app_credentials[app_id]},root.setAppCredentialSetting=function(app_id,data,action,index){if(angular.isDefined(index)&&"updated"===action){var app_credentials=root.app.app_credentials[app_id][index];app_credentials.id=data.id,app_credentials.sys_user=data.sys_user,app_credentials.sys_password=data.sys_password}else angular.isUndefined(index)&&"added"===action?root.app.app_credentials[app_id].push(data):root.app.app_credentials[app_id].splice(index,1);return root.app.app_credentials[app_id]},root.setAppSshkeySetting=function(app_id,data){var app_credentials=root.app.app_credentials[app_id][data.credsIndex];"action-update"===data.action?app_credentials.ssh_keys[data.ssh_index].label=data.key.key_name:"action-delete"===data.action?app_credentials.ssh_keys.splice(data.ssh_index,1):app_credentials.ssh_keys.push(data.key)},root.isUsernameAvailable=function(data){var deferred=$q.defer(),result=consoleApiSvc.callAPI("POST","api/v1/app/creds/isUsernameAvailable",data);return result.then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.checkDiskUsage=function(appId,server_id,server){var sys_user="",deferred=$q.defer(),key="same"!==server&&"new"!==server?"destination_server_id":"server";angular.forEach(consoleApiSvc.server.serverData[server_id].apps,function(app){parseInt(app.id)===parseInt(appId)&&(sys_user=app.sys_user)});var data={server_id:server_id,app_id:appId};data[key]=server,data.calculate_home=0,data.remaining_disk_usage=1;var result=consoleApiSvc.callAPI("POST","api/v1/app/checkDiskUsage",data);return result.then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.checkPackageVersions=function(server_id,server){var deferred=$q.defer(),key="same"!==server&&"new"!==server?"destination_server_id":"server",data={server_id:server_id};return data[key]=server,"same"===server?(deferred.reject(),deferred.promise):(consoleApiSvc.callAPI("POST","api/v1/app/checkPackageVersions",data).then(function(response){
deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise)},root.getAppSettingsValue=function(app_id){return root.app.settings_values[app_id]},root.setAppSettingsValue=function(serverID,appID){var deferred=$q.defer(),requestId="getAppSettingsValues_"+appID,queryString="?server_id="+serverID+"&app_id="+appID;return consoleApiSvc.callAPI("GET","api/v1/app/get_settings_value"+queryString,null,requestId).then(function(response){root.app.settings_values[appID]=response,root.app.settings_values[appID].cors_fetched=!0,root.app.settings_values[appID].fromaddress_fetched=!0,deferred.resolve()},function(response){deferred.reject(response)}),deferred.promise},root.getDefaultFromEmail=function(app,server){return app.sys_user+"@"+server.server_fqdn},root.setSettingsValuesOnUpdate=function(appID,valueToSet,value){root.app.settings_values[appID][valueToSet]=value},root.getSettingsValuesOnUpdate=function(appID,valueToGet){return root.app.settings_values[appID][valueToGet]},root}angular.module("cgConsole").factory("applicationSvc",["serverMessages","consoleApiSvc","$state","toastrSvc","$q","$rootScope","$mdDialog","clusterSvc","cdnSvc","$injector",applicationSvc])}(),function(){"use strict";function blockStorageSvc(serverMessages,consoleApiSvc,$state,toastrSvc,$http,$q,commonSvc,$rootScope,$mdDialog){var root={};return root.getServerSizeLabelMapping=function(servers){var mapping=[],serverArray=[];return angular.forEach(servers,function(server){serverArray.label=server.label,serverArray.disk=parseInt(server.details.disk),mapping.push(serverArray),serverArray=[]}),mapping},root.isStorageRegionAllowed=function(serverRegionID,storageRegions){var allowedRegions=[];return angular.forEach(storageRegions,function(price,regionId){allowedRegions.push(parseInt(regionId))}),-1!==allowedRegions.indexOf(parseInt(serverRegionID))},root.getDiskUsage=function(serverID,app,counter,calculateHome,appID){var deferred=$q.defer(),url="api/v1/server/"+serverID+"/diskUsage/"+counter;null!==app&&(url+="?app="+app+"&app_id="+appID),url+=(url.includes("?")?"&":"?")+"calculateHome="+(angular.isDefined(calculateHome)&&calculateHome?1:0);var result=consoleApiSvc.callAPI("GET",url);return result.then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root}angular.module("cgConsole").factory("blockStorageSvc",["serverMessages","consoleApiSvc","$state","toastrSvc","$http","$q","commonSvc","$rootScope","$mdDialog",blockStorageSvc])}(),function(){"use strict";function cacheSvc(){var root={monitorHistory:{}};return root.setMonitorHistory=function(serverId,data){root.monitorHistory[serverId]=angular.copy(data)},root.getMonitorHistory=function(serverId){return angular.isDefined(root.monitorHistory[serverId])?root.monitorHistory[serverId]:null},root}angular.module("cgConsole").factory("cacheSvc",[cacheSvc])}(),function(){"use strict";function cdnSvc(consoleApiSvc,$q,addonSvc){var root={app_cdns:{},isCdnFetched:!1};return root.saveChanges=function(action,data){var method,url,deferred=$q.defer(),requestId="createCdn"+data.server_id;switch(action){case"create":method="POST",url=consoleApiSvc.API.URL.app_cdn;break;case"update":method="PUT",url=consoleApiSvc.API.URL.app_cdn+"/"+parseInt(data.app_id)}var result=consoleApiSvc.callAPI(method,url,data,requestId);return result.then(function(response){deferred.resolve(response),"create"===action?(root.app_cdns[data.server_id]={},root.app_cdns[data.server_id][data.app_id]=response.cdn_data):(root.app_cdns[data.server_id][data.app_id].url=response.cdn_data.url,root.app_cdns[data.server_id][data.app_id].cdn_url=response.cdn_data.cdn_url)},function(response){deferred.reject(response)}),deferred.promise},root.removeCDN=function(server_id,app_id){server_id&&app_id&&root.app_cdns[parseInt(server_id)]&&root.app_cdns[parseInt(server_id)][parseInt(app_id)]?delete root.app_cdns[parseInt(server_id)][parseInt(app_id)]:server_id&&root.app_cdns[parseInt(server_id)]&&delete root.app_cdns[parseInt(server_id)],addonSvc.isAddonFetched=!1},root.getApplicationCdnSetting=function(data){var deferred=$q.defer();if(root.isCdnFetched&&angular.isDefined(root.app_cdns[data.server_id]))deferred.resolve(root.app_cdns[data.server_id]);else{var requestId="getCdnSetting"+data.server_id,queryString="?server_id="+data.server_id+"&app_id="+data.app_id+"&app_name="+data.app_name;consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.app_cdn+queryString,null,requestId).then(function(response){response.servers?(root.app_cdns=response.servers,deferred.resolve(root.app_cdns[data.server_id])):response.servers||0!==response.cdn_data.length||deferred.resolve(root.app_cdns),root.isCdnFetched=!0},function(response){deferred.reject(response)})}return deferred.promise},root}angular.module("cgConsole").factory("cdnSvc",["consoleApiSvc","$q","addonSvc",cdnSvc])}(),function(){"use strict";function chameleonSvc(consoleApiSvc,analyticsSvc,regex,viralloopsSvc){function initMixpanelForChameleon(){window.mixpanel={track:function(eventName,eventPayload){eventName=eventName.replace("(Chameleon)","").trim(),eventName.startsWith("chmln_")&&(eventName=eventName.replace("chmln_","")),eventPayload.event_name=eventName,eventPayload.event_category="chameleon";var extraAttributes=["uid","user_id","user_name","email"];angular.forEach(extraAttributes,function(attribute){eventPayload[attribute]&&delete eventPayload[attribute]}),analyticsSvc.addAnalytics(eventPayload)}}}var root={};return root.setChameleonScript=function(){if((!angular.isDefined(consoleApiSvc.user.userDetails.is_verified)||consoleApiSvc.user.userDetails.is_verified)&&chmln&&"trial"===consoleApiSvc.user.userDetails.customer_type&&"primary"===consoleApiSvc.user.userDetails.type){var persona_tag,signupABtag,user_attributes={},cloud_providers={"do":0,vultr:0,gce:0,amazon:0,kyup:0,linode:0};angular.isDefined(consoleApiSvc.user.userDetails.user_tags_name)&&angular.isArray(consoleApiSvc.user.userDetails.user_tags_name)&&consoleApiSvc.user.userDetails.user_tags_name.length>0&&angular.forEach(consoleApiSvc.user.userDetails.user_tags_name,function(item){regex=new RegExp("personas","ig"),regex.test(item)&&!persona_tag&&(persona_tag=item),-1!==item.indexOf("signup-segment")&&(signupABtag=item)}),angular.forEach(consoleApiSvc.server.serverData,function(item,index){cloud_providers[item.cloud]++}),user_attributes={uid:consoleApiSvc.user.userDetails.id,created:consoleApiSvc.user.userDetails.date,email:consoleApiSvc.user.userDetails.email,"customer-type":consoleApiSvc.user.userDetails.customer_type,status:consoleApiSvc.user.userDetails.status?"enabled":"disabled","do-servers":cloud_providers["do"],"gce-servers":cloud_providers.gce,"amazon-servers":cloud_providers.amazon,"vultr-servers":cloud_providers.vultr,"kyup-servers":cloud_providers.kyup,"linode-servers":cloud_providers.linode,even_id:"trial"==consoleApiSvc.user.userDetails.customer_type&&parseInt(consoleApiSvc.user.userDetails.id)%2===0?"true":"false"};var userVLShow=viralloopsSvc.getUserChameleonShow();user_attributes["existing-values-popup"]=userVLShow.loginAfter,user_attributes["need-a-hand-popup"]=userVLShow.firstServer,persona_tag&&(user_attributes["tag-persona"]=persona_tag),signupABtag&&(user_attributes["tag-signupAB"]=signupABtag),chmln.identify(consoleApiSvc.user.userDetails.id,user_attributes),initMixpanelForChameleon()}},root}angular.module("cgConsole").factory("chameleonSvc",["consoleApiSvc","analyticsSvc","regex","viralloopsSvc",chameleonSvc])}(),function(){"use strict";function cloudBotSvc(consoleApiSvc,$q,toastrSvc,$http){var root={integrations:null,channels:null,events:null,alerts:null,unread_count:null,total_count:null},formValuesQ=$q.defer();return root.getIntegrationList=function(isFetchAgain){var integrationQ=$q.defer();return null===root.integrations||isFetchAgain?null===root.integrations||isFetchAgain?(consoleApiSvc.callAPI("GET","api/v1/integrations").then(function(data){root.integrations=data.integrations,integrationQ.resolve(root.integrations)},function(data){integrationQ.reject(data)}),integrationQ.promise):void 0:(integrationQ.resolve(root.integrations),integrationQ.promise)},root.getFormValues=function(){return null==root.events&&null==root.channels&&(root.events=[],root.channels={},consoleApiSvc.callAPI("GET","api/v1/integrations/create").then(function(data){root.events=data.events,root.channels=data.channels,formValuesQ.resolve()},function(data){formValuesQ.reject(data)})),formValuesQ.promise},root.isMasterUserLoggedIn=function(){return"primary"===consoleApiSvc.user.userDetails.type&&"full"===consoleApiSvc.user.userDetails.customer_type},root.getAlertList=function(last_id){var alertValuesQ=$q.defer();if(null!==root.alerts&&!last_id&&consoleApiSvc.alerts.total_count===root.total_count)return alertValuesQ.resolve(root.alerts),consoleApiSvc.alerts.processing=!1,alertValuesQ.promise;if(null===root.alerts||last_id||consoleApiSvc.alerts.total_count>root.total_count){var url=last_id?"api/v1/alerts/"+last_id:"api/v1/alerts";return consoleApiSvc.callAPI("GET",url,null,"getAlertList_"+consoleApiSvc.user.userDetails.id).then(function(response){if(last_id)if(response.alerts)for(var i=0;i<response.alerts.length;i++)root.alerts.push(response.alerts[i]);else toastrSvc.info("There are no updates for you at this point in time. Please check again soon.");else root.alerts=response.alerts,root.total_count=consoleApiSvc.alerts.total_count,consoleApiSvc.alerts.processing=!1;alertValuesQ.resolve(response)},function(response){consoleApiSvc.alerts.processing=!1,alertValuesQ.resolve(response)}),alertValuesQ.promise}},root.deleteAlert=function(alert_id){var defer=$q.defer();return consoleApiSvc.callAPI("DELETE","api/v1/integrations/"+alert_id,null).then(function(response){var indexToDelete;root.integrations.map(function(obj,i){return obj.id===alert_id&&(indexToDelete=i),!0});var integrationName=root.integrations[indexToDelete].name;root.integrations.splice(indexToDelete,1),root.getIntegrationList(!0).then(function(){defer.resolve(response),toastrSvc.success('"'+integrationName+'" is deleted successfully')})},function(response){defer.reject(response),toastrSvc.error(response.data.message)}),defer.promise},root.getAlertListUnReadCount=function(){var alertListUnReadCountQ=$q.defer();return consoleApiSvc.callAPI("GET","api/v1/alert/counts",null,"getAlertListUnReadCount_"+consoleApiSvc.user.userDetails.id).then(function(response){root.unread_count=response.unread_count,alertListUnReadCountQ.resolve(response)},function(response){alertListUnReadCountQ.reject(response)}),alertListUnReadCountQ.promise},root}angular.module("cgConsole").factory("cloudBotSvc",["consoleApiSvc","$q","toastrSvc","$http",cloudBotSvc])}(),function(){"use strict";function clusterApplicationSvc(serverMessages,consoleApiSvc,$state,toastrSvc,$http,$q,commonSvc,$rootScope,$mdDialog,clusterSvc){var root={app:{fpm:{},varnish:{},varnish_setting:{},app_credentials:{}}};return root.getAppFPM=function(cluster_id,app_id){return angular.equals(root.app.fpm[cluster_id+"_"+app_id],{})?null:root.app.fpm[cluster_id+"_"+app_id]},root.getAppVarnishSetting=function(app_id){return root.app.varnish_setting[app_id]},root.getAppVarnish=function(app_id){return root.app.varnish[app_id]},root.getAppFPMSetting=function(cluster_id,app_id){var deferred=$q.defer(),requestId="getAppFPMSetting_"+app_id,queryString="?cluster_id="+cluster_id+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET","api/v1/cluster/app/manage/fpm-setting"+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.fpm[cluster_id+"_"+app_id]=response.response},function(response){deferred.reject(response)}),deferred.promise},root.clearCachedAppFPM=function(cluster){angular.forEach(cluster.apps,function(app){angular.isDefined(root.app.fpm[app.id])&&delete root.app.fpm[app.id]})},root.fetchAppVarnishSetting=function(app_id,cluster_id){var deferred=$q.defer(),requestId="getAppVarnishSetting_"+app_id,queryString="?cluster_id="+cluster_id+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET","api/v1/cluster/app/manage/varnish-setting"+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.varnish_setting[app_id]=response},function(response){deferred.reject(response)}),deferred.promise},root.getAppVarnishStatus=function(app_id,app_name,cluster_id,sys_user){var deferred=$q.defer(),requestId="getAppVarnishStatus_"+app_id,queryString="?cluster_id="+cluster_id+"&app_name="+app_name+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_clusterAppVarnish+queryString,null,requestId);return result.then(function(response){deferred.resolve(),root.app.varnish[app_id]=response},function(response){deferred.reject(response)}),deferred.promise},root.setAppVarnishStatus=function(app_id,cluster_id,action){return root.app.varnish[app_id]=clusterSvc.clusters.app_varnish[cluster_id+"_"+app_id],root.app.varnish_setting[app_id]&&(root.app.varnish_setting[app_id].varnish_enabled=root.app.varnish[app_id].varnish_enabled),root.app.varnish[app_id].varnish_enabled},root.postAppVarnishSetting=function(app_id,cluster_id){return root.app.varnish_setting[app_id].vcl_list=clusterSvc.clusters.app_varnish[cluster_id+"_"+app_id].vcl_list},root.getAppCredentialList=function(app_id){return root.app.app_credentials[app_id]},root.setAppCredentialSetting=function(app_id,cluster_id){return root.app.app_credentials[app_id]=clusterSvc.clusters.app_sftp[cluster_id+"_"+app_id].sftp_users,root.app.app_credentials[app_id]},root.fetchAppCredentialSetting=function(cluster_id,app_id){angular.isArray(root.app.app_credentials[app_id])||(root.app.app_credentials[app_id]=[]);var deferred=$q.defer();return consoleApiSvc.callAPI("GET","api/v1/cluster/app/creds?cluster_id="+cluster_id+"&app_id="+app_id).then(function(response){angular.isDefined(response.sftp_users)&&null!==response.sftp_users?"secondary"===consoleApiSvc.user.userDetails.type?root.app.app_credentials[app_id].push(response.sftp_users[0]):angular.forEach(response.sftp_users,function(val,key){root.app.app_credentials[app_id].push(val)}):root.app.app_credentials[app_id]=[],deferred.resolve(root.app.app_credentials[app_id])},function(response){deferred.reject(response)}),deferred.promise},root.getAppDetail=function(appId){appId||$state.go("clusters");var clusters=angular.copy(clusterSvc.clusters.list),appDetails={};return angular.forEach(clusters,function(cluster){angular.forEach(cluster.apps,function(app){parseInt(appId)===parseInt(app.id)&&(appDetails.app=app,appDetails.cluster=cluster)})}),appDetails},root}angular.module("cgConsole").factory("clusterApplicationSvc",["serverMessages","consoleApiSvc","$state","toastrSvc","$http","$q","commonSvc","$rootScope","$mdDialog","clusterSvc",clusterApplicationSvc])}(),function(){"use strict";function clusterSvc($mdDialog,consoleApiSvc,toastrSvc,$state,$stateParams,$window,operationSvc,$injector,$rootScope,$q,apiEndPoint,$filter,memberSvc,serverViewPath,serverMessages,allowedUsers,analyticsSvc){var root={consoleApiSvc:{},toastrSvc:{},disasterRecovery:!1,clusters:{list:{},apps:{},providers:{},cluster_config:{},package_settings:{},services:{},cron_list:{},git_list:{},web_root:{},fpm_settings:{},custom_ssl:{},git:{},addons:{},app_sftp:{},whitelist_ip:{},app_varnish:{}}};return root.changeState=function(cluster_id,clusterState){var deferred=$q.defer(),action=(root.clusters.list[cluster_id],""),status="";switch(clusterState){case!0:status="cl_stop_cluster",action="stop";break;case!1:status="cl_start_cluster",action="start"}var result=consoleApiSvc.callAPI("POST","api/v1/cluster/change-status",{cluster_id:cluster_id,action_type:action},"cluster_start_stop_"+cluster_id);return result.then(function(data){data.operation_id&&(root.clusters.list[cluster_id].operation_type=status,consoleApiSvc.startPolling(cluster_id,data.operation_id),deferred.resolve(data))},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root["delete"]=function(cluster_id){var deferred=$q.defer(),cluster=root.clusters.list[cluster_id],result=consoleApiSvc.callAPI("DELETE",consoleApiSvc.API.URL.cluster+"/"+cluster_id,null,"deleting_cluster_"+cluster_id);return result.then(function(response){if(response.operation_id){var clusterLabel=cluster.label;1===$("#cluster-list-"+cluster_id).length?$("#cluster-list-"+cluster_id).fadeOut(700,function(){delete root.clusters.list[cluster_id]}):delete root.clusters.list[cluster_id],0===Object.keys(root.clusters.list).length&&(memberSvc.teamMemberNotification=!1),toastrSvc.success(clusterLabel+" is deleted successfully."),deferred.resolve(response)}},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root.clone_cluster=function(cluster_id,$event){var cluster_label=root.clusters.list[cluster_id].label;$rootScope.preventNavigation();var confirm=$mdDialog.confirm().title("Cluster Cloning").textContent("Are you sure you want to clone "+cluster_label+" cluster?").ariaLabel("Cluster Cloning").targetEvent($event).ok("Yes").cancel("No");$mdDialog.show(confirm).then(function(){$rootScope.allowNavigation(),$state.go("server_clone",{id:cluster_id})},function(){$rootScope.allowNavigation()})},root.update_app_label=function(app_id,cluster_id,label,application){var deferred=$q.defer();if(label===application.label)return application.label;$(".hdr-loader").show();var data={cluster_id:cluster_id,label:label},result=consoleApiSvc.callAPI("PUT","api/v1/cluster/app/"+app_id,data,"update_app_"+app_id);return result.then(function(response){deferred.resolve(label),$(".hdr-loader").hide(),application.label=label,angular.forEach(root.clusters.list,function(app){app.id===app_id&&(app.label=label)}),toastrSvc.success(serverMessages.app_label_updated,{placeholders:["label",{status:"successfully"}],app_id:app_id})},function(response){deferred.reject(application.label);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),$(".hdr-loader").hide(),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.clusterLink=function(cluster){return 1!==parseInt(cluster.is_terminated)?"running"!==cluster.status&&""===cluster.operation_type?void toastrSvc.warning(cluster.label+" is not in running state."):void(-1!=operationSvc.largeCases.indexOf(cluster.operation_type)?toastrSvc.warning("There is an operation in progress on this Cluster."):$state.go("cluster_detail.services",{id:cluster.id})):void 0},root.sortByObject=function(input,type){if(!angular.isObject(input))return input;keep="cluster"===type?["cluster","server"]:["server","cluster"];for(var keep,index=[],size=keep.length,i=0;size>i;i++)angular.forEach(input,function(filterObj){filterObj.parent===keep[i]&&index.push(filterObj)});return index},root.getClusterSettings=function(cluster_id){var deferred=$q.defer();return consoleApiSvc.callAPI("GET","api/v1/cluster/manage/settings?cluster_id="+cluster_id,null,"getServerSettings_"+cluster_id).then(function(response){root.setClusterSettingObject(response,cluster_id),deferred.resolve(root.clusters.package_settings[cluster_id])},function(response){if(deferred.reject(response),response.data.message)return void toastrSvc.error(response.data.message,"Error");var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=serverMessages.server_no_response})}),""!=errors_msg&&toastrSvc.error(errors_msg,"Error")}),deferred.promise},root.setClusterSettingObject=function(response,cluster_id){root.clusters.package_settings[cluster_id]={basic:{execution_limit:response.settings.execution_limit,upload_size:response.settings.upload_size,memory_limit:response.settings.memory_limit,display_errors:response.settings.display_errors,error_reporting:response.settings.error_reporting,date_timezone:response.settings.date_timezone},advance:{new_default_app:response.settings.new_default_app,static_cache_expiry:response.settings.static_cache_expiry,mod_waf:angular.isDefined(response.settings.mod_waf)&&""!==response.settings.mod_waf&&"disabled"!==response.settings.mod_waf?response.settings.mod_waf:"disabled",mysql_timezone:response.settings.mysql_timezone,character_set_server:response.settings.character_set_server,max_connections:response.settings.max_connections,innodb_buffer_pool_size:response.settings.innodb_buffer_pool_size,key_buffer_size:response.settings.key_buffer_size,innodb_lock_wait_timeout:response.settings.innodb_lock_wait_timeout,wait_timeout:response.settings.wait_timeout,max_input_vars:response.settings.max_input_vars,max_input_time:response.settings.max_input_time,apc_shm_size:response.settings.apc_shm_size,sys_locale:response.settings.sys_locale},packages:response.package_versions},angular.isDefined(response.settings.mod_xdebug)&&(root.clusters.package_settings[cluster_id].advance.mod_xdebug=response.settings.mod_xdebug),angular.isDefined(response.settings.short_open_tag)&&(root.clusters.package_settings[cluster_id].advance.short_open_tag=response.settings.short_open_tag),angular.isDefined(response.settings.opcache_memory_size)&&(root.clusters.package_settings[cluster_id].advance.opcache_memory_size=response.settings.opcache_memory_size),angular.isDefined(response.settings.nginx_http2)&&(root.clusters.package_settings[cluster_id].advance.nginx_http2=response.settings.nginx_http2),angular.isDefined(response.settings.mod_zendguard)&&(root.clusters.package_settings[cluster_id].advance.mod_zendguard=response.settings.mod_zendguard),angular.isDefined(response.package_versions)&&angular.isDefined(response.package_versions.elasticsearch)&&""!==response.package_versions.elasticsearch&&"0"!==response.package_versions.elasticsearch?root.clusters.package_settings[cluster_id].packages.elasticsearch=response.package_versions.elasticsearch:root.clusters.package_settings[cluster_id].packages.elasticsearch="0"},root.isOperationBoxVisible=function(cluster_id){var operation_type=root.clusters.list[cluster_id].operation_type,operations=["cl_stop_cluster","cl_start_cluster","cl_delete_cluster","cl_backups_on_demand","cl_backups","cl_restart_service"];return""!=operation_type&&-1!=operations.indexOf(operation_type)},root.getRegion=function(region_code,cloud){var region_label;return angular.forEach(consoleApiSvc.server.providers,function(providers){angular.isDefined(providers.cluster_regions)&&providers.label_api_server===cloud&&angular.forEach(providers.cluster_regions,function(regions){providers.label_api_server===cloud&&regions.label_api_server===region_code&&(region_label=regions.full_label)})}),region_label},root.prepareClusterSpecifications=function(cluster){var providers=angular.copy(consoleApiSvc.server.providers),specs={architechture:"",ram:"",instance:""};return angular.forEach(providers,function(val){val.label_api_server===cluster.cloud&&(angular.forEach(val.cluster_server_sizes,function(size){size.label_api_server===cluster.instance_type&&("do"===cluster.cloud?specs.architechture=size.specification_detail.processor.replace(",","").replace(" Processor","")+" per instance":specs.architechture=size.specification_detail.architechture.replace(",","")+" per instance",specs.ram=size.specification_detail.ram.replace(",","").replace(" RAM","")+" Memory per instance",specs.instance=cluster.node_count+" "+size.label+" instances")}),specs.storage=cluster.volume_size?cluster.volume_size+"GB Storage":cluster.volume_size,specs.region=consoleApiSvc.getServerProviders(cluster.cloud)+" ("+root.getRegion(cluster.region,cluster.cloud)+")")}),specs},root.isClusterCreateEnabled=function(){var response=!1;return"primary"===consoleApiSvc.user.userDetails.type&&"full"===consoleApiSvc.user.userDetails.customer_type&&-1!==consoleApiSvc.user.userDetails.user_tags_name.indexOf("cluster-create-enable")&&(response=!0),response},root.isClusterFaq=function(){var response=!1;return"primary"===consoleApiSvc.user.userDetails.type&&"full"===consoleApiSvc.user.userDetails.customer_type&&-1!==consoleApiSvc.user.userDetails.user_tags_name.indexOf("cluster-faq")&&(response=!0),response},root.clusterAcl=function(){var state;return!root.isClusterCreateEnabled()&&root.isClusterFaq()?state="cluster_faqs":root.isClusterCreateEnabled()||root.isClusterFaq()||(state="servers"),state},root.fetchClusterServices=function(cluster_id){var deferred=$q.defer(),result=consoleApiSvc.callAPI("GET","api/v1/cluster/services?cluster_id="+cluster_id,null,"getServices_"+cluster_id);return result.then(function(response){deferred.resolve(response),response.services&&(root.clusters.services=[],root.clusters.services[cluster_id]=response.services)},function(response){deferred.reject(response)}),deferred.promise},root}angular.module("cgConsole").factory("clusterSvc",["$mdDialog","consoleApiSvc","toastrSvc","$state","$stateParams","$window","operationSvc","$injector","$rootScope","$q","apiEndPoint","$filter","memberSvc","serverViewPath","serverMessages","allowedUsers","analyticsSvc",clusterSvc])}(),function(){"use strict";function commonSvc($mdDialog,consoleApiSvc,toastrSvc,$state,operationSvc,$http,$q,apiEndPoint,$filter,memberSvc,serverViewPath,$rootScope,$stateParams,allowedUsers,analyticsSvc,clusterSvc,magentoVersions,platformPollingSvc,$injector){function AlertMessageController(heading,errors,message,$mdDialog){var vm=this;vm.message=message,angular.isDefined(errors.platform)&&(vm.message=errors.platform,delete errors.platform),vm.errors=errors,vm.heading=heading,vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){$mdDialog.cancel()}}var root={filters:{},adminImpersonation:!0,alertBotAnimation:!1,active_side_nav:""};return root.evaluateMultiAppVersion=function(multiAppConfig,server_settings,server_id){var errors=[],packages=multiAppConfig.config["package"],evalstring,packageValue;return angular.forEach(packages,function(server_package){var result;if(evalstring=server_package.compare,angular.forEach(server_package.value,function(value,key){var comparisonValue;comparisonValue=value.split("|"),packageValue=server_settings.packages[comparisonValue[0]],evalstring=evalstring.replace("{pv"+key+"}",""===packageValue?0:packageValue),evalstring=evalstring.replace("{v"+key+"}",comparisonValue[1])}),result=eval(evalstring),!result){var the_server_id=angular.isDefined(server_id)?server_id:$stateParams.id;"debian7"===consoleApiSvc.server.serverData[the_server_id].platform&&angular.isDefined(server_package.platform)&&(errors.platform=server_package.platform),errors.push(server_package.error)}}),errors},root.evaluateMysqlVersion=function(multiAppConfig,server_settings){var errors=[],packages=multiAppConfig.config["package"],evalstring,packageValue;return angular.forEach(packages,function(server_package){var result;evalstring=server_package.compare,angular.forEach(server_package.value,function(value,key){var comparisonValue;comparisonValue=value.split("|"),packageValue=server_settings.packages[comparisonValue[0]],evalstring=evalstring.replace("{pv"+key+"}",""===packageValue?0:packageValue),evalstring=evalstring.replace("{v"+key+"}",comparisonValue[1])}),result=eval(evalstring),result||errors.push(server_package.error)}),errors},root.showMultiAppEvaluationErrorBox=function(errors,server_id){var heading="Oops! Incompatibility detected",message='The deployed versions of PHP or Database on your server are incompatible with your application’s requirements. To continue, you’ll first have to update the following from <a class="glb-link" target="_blank" href="https://support.cloudways.com/what-can-i-do-from-the-packages-tab-of-server-settings-packages-section/">Settings & Packages</a> area:',confirm=$mdDialog.confirm({controller:AlertMessageController,controllerAs:"vm",templateUrl:"js/app/views/alertMessage.html",locals:{heading:heading,errors:errors,message:message},parent:angular.element(document.body),clickOutsideToClose:!0});$mdDialog.show(confirm).then(function(){})},root.getMultiAppVersionParams=function(multiAppConfig){var requiredParams=[],packages={};return angular.forEach(multiAppConfig.config["package"],function(server_package){angular.forEach(server_package.param,function(param){requiredParams=param.split("|"),packages[requiredParams[0]]=requiredParams[1]})}),packages},root.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return decodeURIComponent(c.substring(name.length,c.length).replace(/\+/g," "))}return""},root.getParameterByName=function(name,url){url||(url=window.location.href);var regex,results;return name=name.replace(/[\[\]]/g,"\\$&"),regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url),results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},root.createCookie=function(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"},root.removeCookie=function(name){var date=new Date;date.setTime(date.getTime()+-864e5);var expires="; expires="+date.toGMTString();document.cookie=name+"="+expires+"; path=/"},root.consoleSso=function(type,isUrlChanged){var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.consoleSso,{type:type},"upgradeTrialAccount_"+consoleApiSvc.user.userDetails.id);result.then(function(response){if(angular.isDefined(response.ppk)){var url="https://www.cloudways.com/en/console_sso.php";isUrlChanged&&(url="https://clickngo.cloudways.com/login/",angular.isDefined(consoleApiSvc.user.userDetails.admin_loggedin)&&consoleApiSvc.user.userDetails.admin_loggedin&&(url+="?type=admin"));var content='<form method="post" action="'+url+'" id="site_action_form">';content+='<input type="hidden" name="key_data" value="'+response.time+'" />',content+='<input type="hidden" name="key_value" value="'+response.ppk+'" />',content+='<input type="hidden" name="user_email" value="'+response.user_email+'" />',content+='<input type="hidden" name="user_data" value="'+response.userData+'" />',content+='<input type="hidden" name="location_path" value="'+response.type+'" />',!isUrlChanged&&angular.isDefined(consoleApiSvc.user.userDetails.admin_loggedin)&&consoleApiSvc.user.userDetails.admin_loggedin&&(content+='<input type="hidden" name="admin_login" value="yes" />'),content+="</form>",$("#consoleSso").html(content),$("#site_action_form").submit(),$("#consoleSso").html("")}},function(response){toastrSvc.error(response.data.error)})},root.preserveServerClusterFilter=function(sortOption,type){var cookieName="server"===type?"cwserverlistfilter":"cwclusterlistfilter";root.createCookie(cookieName+consoleApiSvc.user.userDetails.id,sortOption,10)},root.preserveServerDetailView=function(detail_view){var cookie_name="cwserverdetailview"+consoleApiSvc.user.userDetails.id;root.createCookie(cookie_name,detail_view,10)},root.preserveAppFilter=function(sortOption){var cookie_name="cwapplistfilter"+consoleApiSvc.user.userDetails.id;root.createCookie(cookie_name,sortOption,10)},root.preserveCreateServerTutorial=function(){var cookie_name="cwcreateservertut"+consoleApiSvc.user.userDetails.id;root.createCookie(cookie_name,1,365)},root.removeContentDeactivator=function(){$("md-fab-speed-dial").removeClass("content-deactivator-md-fabspeeddial"),$("html").removeClass("content-deactivator-html"),$("body").removeClass("content-deactivator-body"),$("#content-deactivator").hide()},root.appLink=function(app){return angular.isDefined(app.parent_status)&&"running"!==app.parent_status?void toastrSvc.warning(app.parent_label+" is not in running state."):angular.isDefined(app.server_id)&&app.server_id&&0!==parseInt(app.server_id)&&1===parseInt(consoleApiSvc.server.serverData[app.server_id].is_terminated)?void toastrSvc.warning(app.parent_label+" is in Terminated state."):angular.isDefined(app.is_staging)&&angular.isDefined(app.source_app_id)&&"1"==app.is_staging?void $state.go("staging_app_detail.access",{
id:app.id}):void(angular.isDefined(app.biggerOperation)&&app.biggerOperation?toastrSvc.warning("Server is busy due to an operation in progress. Please try again once operation is complete."):angular.isDefined(app.server_id)&&app.server_id&&0!==parseInt(app.server_id)?$state.go("app_detail_access",{id:app.id}):$state.go("cluster_app_detail.access",{id:app.id}))},root.monitoringAppLink=function(app){return angular.isDefined(app.parent_status)&&"running"!==app.parent_status?void toastrSvc.warning(app.parent_label+" is not in running state."):angular.isDefined(app.server_id)&&app.server_id&&0!==parseInt(app.server_id)&&1===parseInt(consoleApiSvc.server.serverData[app.server_id].is_terminated)?void toastrSvc.warning(app.parent_label+" is in Terminated state."):angular.isDefined(app.is_staging)&&angular.isDefined(app.source_app_id)&&"1"==app.is_staging?void $state.go("staging_app_detail.monitor_traffic",{id:app.id}):void(angular.isDefined(app.biggerOperation)&&app.biggerOperation?toastrSvc.warning("Server is busy due to an operation in progress. Please try again once operation is complete."):$state.go("app_detail_monitor_traffic",{id:app.id}))},root.serverLink=function(serverObj){if(angular.isDefined(consoleApiSvc.user.userDetails.permissions)&&!memberSvc.noServerAccess(serverObj.id))return!0;if(1!==parseInt(serverObj.is_terminated)){if("running"!==serverObj.status&&""===serverObj.operation_type)return void toastrSvc.warning(serverObj.label+" is not in running state.");if(-1==operationSvc.largeCases.indexOf(serverObj.operation_type)||consoleApiSvc.isStaging||platformPollingSvc.operation.stateTracking){if(memberSvc.isMemberLoggedIn()&&consoleApiSvc.user.userDetails.permissions.is_full)return void $state.go("server_detail_access",{id:serverObj.id});if(!memberSvc.isMemberLoggedIn())return void $state.go("server_detail_access",{id:serverObj.id});memberSvc.checkPagePermission(serverObj.id)}else toastrSvc.warning("There is an operation in progress on this Server")}},root.uploadProjectIcon=function(files,project){$(".hdr-loader").show();var deferred=$q.defer(),fd=new FormData,data={id:project.id};return fd.append("image",files[0]),fd.append("data",JSON.stringify(data)),$http.post(apiEndPoint+"api/v1/project/updateImage",fd,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(response){deferred.resolve(response),$(".hdr-loader").hide()},function(response){deferred.reject(response),$(".hdr-loader").hide();var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg&&toastrSvc.error(errors_msg)}),deferred.promise},root.summarySwitch=function(id,page){switch(page){case"server":"*"===id?root.summarySwitchListing("Server Switch",{server:"Server Listing"},page):memberSvc.isMemberLoggedIn()&&consoleApiSvc.user.userDetails.permissions.is_full?root.summarySwitchDetail("Server Switch",{server:consoleApiSvc.server.serverData[id].label},id):memberSvc.isMemberLoggedIn()&&!consoleApiSvc.user.userDetails.permissions.is_full?memberSvc.checkPagePermission(id):root.summarySwitchDetail("Server Switch",{server:consoleApiSvc.server.serverData[id].label},id);break;case"clusters":"*"===id?root.summarySwitchListing("cluster Switch",{cluster:"cluster Listing"},page):root.summarySwitchDetail("cluster Switch",{cluster:clusterSvc.clusters.list[id].label},id);break;case"projects":if("*"===id)root.summarySwitchListing("project Switch",{project:"project Listing"},page);else{var projectLabel=root.getProjectLabel(id);root.summarySwitchDetail("project Switch",{project:projectLabel},id)}break;case"team":"*"===id?root.summarySwitchListing("member Switch",{member:"member Listing"},page):root.summarySwitchDetail("member Switch",{member:memberSvc.members[id].name},id)}},root.summarySwitchListing=function(event_name,obj,page){var data={event_name:event_name};data=jQuery.extend(data,obj),analyticsSvc.addAnalytics(data),$state.go(page)},root.summarySwitchDetail=function(event_name,obj,id){var data={event_name:event_name};data=jQuery.extend(data,obj),analyticsSvc.addAnalytics(data),$state.go(consoleApiSvc.current.name,{id:id})},root.getProjectLabel=function(id){var project=null;return angular.forEach(consoleApiSvc.projects,function(val,key){parseInt(id)===val.id&&(project=val.name)}),project},root.deleteProject=function(project_id){var deferred=$q.defer(),projects=consoleApiSvc.projects,project_name=$filter("filter")(projects,{id:project_id})[0].name,result=consoleApiSvc.callAPI("DELETE",consoleApiSvc.API.URL.projects+"/"+project_id,null);return result.then(function(response){deferred.resolve(response),response&&(angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(app){parseInt(app.project_id)===parseInt(project_id)&&(app.project_id="")})}),delete consoleApiSvc.projects[project_id],toastrSvc.success("Project: "+project_name+" has been deleted successfully."),$state.go("projects"))},function(response){deferred.reject(response)}),deferred.promise},root.deleteMember=function(id){var deferred=$q.defer(),result=consoleApiSvc.callAPI("DELETE","api/v1/member/"+id,null);return result.then(function(response){deferred.resolve(response),delete memberSvc.members[id],$rootScope.publish("memberUpdated"),toastrSvc.success("Team Member has been deleted.")},function(response){deferred.reject(response),toastrSvc.error("An error occurred while deleting team member.")}),deferred.promise},root.serverApps=function(server_id){var serverApps=[];return angular.isDefined(consoleApiSvc.server.serverData[server_id].apps)&&angular.forEach(consoleApiSvc.server.serverData[server_id].apps,function(app){serverApps.push({id:app.id,label:app.label,created_at:app.created_at,application:app.application,is_staging:app.is_staging})}),consoleApiSvc.sortServerByName(serverApps,"label")},root.getServerProjectsCount=function(server_id){var serverProjects=[],projectIds=[];return angular.isDefined(consoleApiSvc.server.serverData[server_id].apps)&&angular.forEach(consoleApiSvc.projects,function(project){angular.forEach(consoleApiSvc.server.serverData[server_id].apps,function(app){parseInt(app.project_id)===parseInt(project.id)&&-1===projectIds.indexOf(project.id)&&(serverProjects.push({id:project.id,name:project.name,created_at:project.created_at,image:project.image}),projectIds.push(project.id))})}),consoleApiSvc.sortServerByName(serverProjects,"name")},root.getAppProjectCount=function(project_id){var appProject=[];return angular.forEach(consoleApiSvc.projects,function(project){parseInt(project_id)===parseInt(project.id)&&appProject.push({id:project.id,name:project.name,created_at:project.created_at,image:project.image})}),appProject},root.getProjectServer=function(project_id){var projectServers={};angular.forEach(consoleApiSvc.server.serverData,function(server){angular.isDefined(server.apps)&&angular.forEach(server.apps,function(app){parseInt(app.project_id)===parseInt(project_id)&&(projectServers[server.id]={id:server.id,label:server.label,created_at:server.created_at,provider:server.cloud})})});var projectServersArray=$.map(projectServers,function(value){return[value]});return consoleApiSvc.sortServerByName(projectServersArray,"label")},root.getProjectApp=function(project_id){var projectApps=[];return angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(app){app.operationLoader=!1,parseInt(app.project_id)===parseInt(project_id)&&projectApps.push({id:app.id,label:app.label,created_at:app.created_at,application:app.application,is_staging:app.is_staging})})}),consoleApiSvc.sortServerByName(projectApps,"label")},root.isMasterUser=function(){return"primary"===consoleApiSvc.user.userDetails.type&&"full"===consoleApiSvc.user.userDetails.customer_type},root.gtmEventTrack=function(userID,event,action,label,optional){if("live"!==window.APP_ENV)return!1;var params={};if(void 0!==optional&&"object"==typeof optional&&(params=optional),params.eventAction=void 0!==action&&action!==!1?action:"",params.eventLabel=void 0!==label&&label!==!1?label:"",params.event=event,void 0!==userID&&userID!==!1&&(params.userID=userID),cookieConsent.isServiceEnabled("performance")&&dataLayer){dataLayer.push(params);try{"object"==typeof localStorage&&(localStorage.setItem("params",JSON.stringify(params)),setTimeout(function(){localStorage.removeItem("params")},2e4))}catch(err){console.log("Error: ".err)}}},root.checkDeleteConfirmation=function(data){var errors={key:"",msg:""};return angular.isDefined(data.delete_confirm)&&""!=data.delete_confirm&&"delete"!=data.delete_confirm.toLowerCase()?(errors.key="delete_confirm",errors.msg="Please type delete."):angular.isDefined(data.admin_delete_confirm)&&""!=data.admin_delete_confirm&&consoleApiSvc.user.userDetails.admin_loggedin&&data.admin_delete_confirm.toLowerCase()!=consoleApiSvc.user.userDetails.email.toLowerCase()&&(errors.key="admin_delete_confirm",errors.msg="This server does not belong to this user."),errors},root.IsJsonString=function(str){try{JSON.parse(str)}catch(e){return!1}return!0},root.range=function(min,max,step){step=step||1;for(var input=[],i=min;max>=i;i+=step)input.push(i);return input},root.strPlural=function(value,count){return value||count?parseInt(count)>1?value+"s":value:void 0},root.setUserUiData=function(key,value){if(!key)return!1;var data={key:key,value:value},call=consoleApiSvc.callAPI("POST","api/v1/setUserData",data,"setUserData_"+key);return call.then(function(response){return consoleApiSvc.users_ui_data[response[0].id]=response[0],!0},function(response){return!1}),!1},root.getUserUiData=function(key){var data=null;return $.isEmptyObject(consoleApiSvc.users_ui_data)||angular.forEach(consoleApiSvc.users_ui_data,function(val){val.key===key&&(data=val)}),data},root.isFlashInstalled=function(){var hasFlash=!1;try{hasFlash=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(exception){var flash=navigator.mimeTypes["application/x-shockwave-flash"];angular.isDefined(flash)&&null!==flash.enabledPlugin&&(hasFlash="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"])}return hasFlash},root.addOptionHeight=function(){var $winWidth=$(window).width(),$target=$(".sumry-select-option").closest(".md-select-menu-container.md-active md-select-menu");$winWidth>599&&961>$winWidth?$target.css("max-height",400):$winWidth>960?$target.css("max-height",540):$target.css("max-height",256)},root.createTicket=function(){"trial"===consoleApiSvc.user.userDetails.customer_type?toastrSvc.error("Only Full accounts can submit tickets. To get support on our ticketing system, please <a href='"+$state.href("updgrade_account")+"'>Upgrade Your Account</a> to full by authorising billing information or use our 24/7 Live Chat support."):memberSvc.isUserLevelAllowed("support")&&window.open("api/v1/ticket/sso")},root.isInternalUser=function(){var email=consoleApiSvc.user.userDetails.email.split("@");return!!(angular.isDefined(email)&&angular.isDefined(email[1])&&-1!==["cloudways.com","gaditek.com"].indexOf(email[1])||-1!==allowedUsers.indexOf(consoleApiSvc.user.userDetails.email))},root.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return root.isMobile.Android()||root.isMobile.BlackBerry()||root.isMobile.iOS()||root.isMobile.Opera()||root.isMobile.Windows()},Tablet:function(){return navigator.userAgent.match(/iPad|iPod/i)}},root.excludeOldServerSizes=function(serverSizes,serverObj,awsLatestSeries,excludeSizes){var isOldSize=!1,serverConfigsSvc=$injector.get("serverConfigsSvc");return excludeSizes=void 0!=excludeSizes||null!=excludeSizes?excludeSizes:[],angular.forEach(serverSizes,function(val){1!==parseInt(val.cloud)||parseInt(val.series)===parseInt(awsLatestSeries)&&val.series||delete serverSizes[val.id],1===parseInt(val.cloud)&&parseInt(val.series)===serverConfigsSvc.awsSeriesMapping.hvm_x5&&-1!==excludeSizes.indexOf(val.label_api_server)&&delete serverSizes[val.id]}),angular.forEach(serverSizes,function(val){0===parseInt(val.status)&&(serverObj&&val.label_api_server===serverObj.cloud_plan_id?isOldSize=!0:delete serverSizes[val.id])}),serverObj&&isOldSize&&angular.forEach(serverSizes,function(val){1===parseInt(val.status)&&val.label===serverObj.instance_type&&delete serverSizes[val.id]}),serverSizes},root.checkScreenSize=function(){var menuPosition="target-right target";return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(menuPosition="target target"),menuPosition},root.equalArray=function(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(var i=arr1.length;i--;)if(arr1[i]!==arr2[i])return!1;return!0},root.isAscii=function(str){return consoleApiSvc.getRegex("unicode_char").test(str)},root}angular.module("cgConsole").factory("commonSvc",["$mdDialog","consoleApiSvc","toastrSvc","$state","operationSvc","$http","$q","apiEndPoint","$filter","memberSvc","serverViewPath","$rootScope","$stateParams","allowedUsers","analyticsSvc","clusterSvc","magentoVersions","platformPollingSvc","$injector",commonSvc])}(),function(){"use strict";function consoleApiSvc(apiEndPoint,$http,$q,$timeout,$window,$location,$filter,toastr,serverMessages,$rootScope,viewPath,$state,$mdMenu,regex,$mdDialog,polingDelay,operationSvc,$injector,alertsDelay,announcementSvc,ocLazyloadSvc){function isBlockPost(config){var server_id,commonSvc=$injector.get("commonSvc");if("GET"!=config.method){if(angular.isDefined(config.data)&&!$.isEmptyObject(config.data)){if(angular.isDefined(config.data.server_id))server_id=config.data.server_id;else if("PUT"===config.method||"DELETE"===config.method){var pathname=config.url.split("/");"server"===pathname[pathname.length-2]&&(server_id=pathname[pathname.length-1])}}else{if(!angular.isUndefined(config.data)&&null!==config.data)return!1;if(config.url&&commonSvc.getParameterByName("server_id",config.url))server_id=commonSvc.getParameterByName("server_id",config.url);else if("PUT"===config.method||"DELETE"===config.method){var pathname=config.url.split("/");"server"===pathname[pathname.length-2]&&(server_id=pathname[pathname.length-1])}}return!!isServerInOperation(server_id)}}function isServerInOperation(server_id){var isServerBlocked=!1;return angular.forEach(root.server.serverData,function(server,key){angular.isDefined(server.operations)&&angular.forEach(server.operations,function(operation){parseInt(operation.server_id)===parseInt(server_id)&&(isServerBlocked=!0,0!=parseInt(operation.app_id)&&angular.isDefined(server.apps)?angular.forEach(server.apps,function(app){parseInt(app.id)===parseInt(operation.app_id)&&(root.callBlockMsg='An Operation is already in progress on Application: "'+app.label+'"')}):0===parseInt(operation.app_id)&&(root.callBlockMsg='An Operation is already in progress on "'+server.label+'"'))})}),isServerBlocked}function handleOperationProgress(response){if(0!==parseInt(response.operation.server_id)){$injector.get("stagingSvc"),$injector.get("commonSvc");root.server.serverData[response.operation.server_id].serverState=!1,root.server.serverData[response.operation.server_id].operations=[],root.server.serverData[response.operation.server_id].operations.push(response.operation),root.server.serverData[response.operation.server_id].operation_type=response.operation.type,root.server.serverData[response.operation.server_id].operationBasedAppId=response.operation.app_id}else{var clusterSvc=$injector.get("clusterSvc");clusterSvc.clusters.list[response.operation.cluster_id].clusterState=!1,clusterSvc.clusters.list[response.operation.cluster_id].operations=[],clusterSvc.clusters.list[response.operation.cluster_id].operations.push(response.operation),clusterSvc.clusters.list[response.operation.cluster_id].operation_type=response.operation.type,clusterSvc.clusters.list[response.operation.cluster_id].operationBasedAppId=response.operation.app_id}}function setPaginationOffset(ops_id,item_id,defaultOffset){root.paginationItemId=!1,ops_id&&"undefined"==typeof defaultOffset&&-1==root.poller.indexOf(String(ops_id))&&(root.paginationItemId=item_id)}function handleServerOperationCompletion(response){var pageLink="",fakeOperations=["save_geo_ip_setting","staging_sync_data","staging_sync_create","disk_usage","clone_data_for_source","app_disk_usage","app_enforce_https"],syncOperations=["sync_app"],hideToastrOperations=["staging_sync_create","disk_usage","clone_data_for_source","migrate_server","complete_migrate_server","server_revert_migration","app_enforce_https"],stagingSvc=$injector.get("stagingSvc"),commonSvc=$injector.get("commonSvc");if(angular.isDefined(response.server)&&response.server.length&&(pageLink=getPageLink(response),root.server.serverData[response.operation.server_id].serverState=!1,root.reStructureServerObject(response.server[0]),root.server.serverData[response.operation.server_id].operation_type="",root.server.serverData[response.operation.server_id].operationBasedAppId=0),handleOperationData(response),$rootScope.publish("operations"),1==response.operation.is_completed)"trial"===root.user.userDetails.customer_type&&"add_server"===response.operation.type&&$(".glb-list-signup-info").remove(),-1===fakeOperations.indexOf(response.operation.type)&&toastr.success(pageLink+operationSvc.getSuccessMessage(response.operation),"Success");else{var strictOperations=["add_server","clone_server","disaster_recovery"];-1!=strictOperations.indexOf(response.operation.type)&&"-1"===response.operation.is_completed&&delete root.server.serverData[response.operation.server_id],"add_staging_server"===response.operation.type&&delete root.server.serverData[response.operation.server_id],-1===hideToastrOperations.indexOf(response.operation.type)&&toastr.error(pageLink+response.operation.status,"Error")}if($rootScope.publish("operation-"+response.operation.id,1==response.operation.is_completed),"add_staging_app"===response.operation.type&&(stagingSvc.app.isStaging=!1,commonSvc.removeCookie("staging-cache")),"remove_app"===response.operation.type){$rootScope.publish("appDeleted"),stagingSvc.deleteStagingOrphanData(response.operation.server_id,response.operation.app_id);var cdnSvc=$injector.get("cdnSvc");cdnSvc.removeCDN(null,null)}-1!==syncOperations.indexOf(response.operation.type)&&stagingSvc.deleteSyncLoaderData(),$mdMenu.hide(),delete root.operationPubSub[response.operation.type+"_"+response.operation.id]}function getPageLink(response){var pageLink="";return angular.isDefined(response.operation.app_id)&&parseInt(response.operation.app_id)>0?(pageLink='<a href="'+$state.href("app_detail_access",{id:response.operation.app_id})+'">'+response.operation.app_label+"</a>: ","remove_app"===response.operation.type&&(pageLink=response.operation.app_label+": "),-1!==["add_staging_app","add_staging_server"].indexOf(response.operation.type)&&(pageLink='<a href="'+$state.href("staging_app_detail.access",{id:response.operation.app_id})+'">'+response.operation.app_label+"</a>: ")):pageLink='<a href="'+$state.href("server_detail_access",{id:response.server[0].id})+'">'+response.server[0].label+"</a>: ",pageLink}function handleClusterOperationCompletion(response){var clusterLink="",keys=[],operationParams="",operationKeys=root.operation_keys,clusterSvc=$injector.get("clusterSvc");if(angular.isDefined(response.cluster)&&response.cluster.length)root.reStructureClusterObject(response.cluster[0]),clusterLink='<a href="'+$state.href("cluster_detail.access",{id:response.cluster[0].id})+'">'+response.cluster[0].label+"</a>: ";else if(3===Object.keys(response).length&&angular.isUndefined(response.cluster)&&"0"!==response.operation.is_completed){var keys=Object.keys(response);for(var i in keys)-1!==operationKeys.indexOf(keys[i])&&(operationParams=keys[i]);response.operation.app_id?clusterSvc.clusters[operationParams][response.operation.cluster_id+"_"+response.operation.app_id]=response[operationParams]:clusterSvc.clusters[operationParams][response.operation.cluster_id]=response[operationParams]}$rootScope.publish("operations");var cluster=clusterSvc.clusters.list[response.operation.cluster_id];if(1==response.operation.is_completed)cluster.clusterState="running"===cluster.status,cluster.operation_type="",cluster.operationBasedAppId="",delete cluster.operations,toastr.success(clusterLink+operationSvc.getSuccessMessage(response.operation.type),"Success");else{cluster.clusterState="running"===cluster.status,cluster.operation_type="",cluster.operationBasedAppId="",delete cluster.operations;var strictOperations=["cl_add_cluster"];-1!=strictOperations.indexOf(response.operation.type)&&"-1"===response.operation.is_completed&&delete clusterSvc.clusters.list[response.operation.cluster_id],toastr.error(clusterLink+response.operation.status,"Error")}$rootScope.publish("operation-"+response.operation.id,1==response.operation.is_completed),delete root.operationPubSub[response.operation.type+"_"+response.operation.id]}function handleOperationData(response){angular.isDefined(response.operation)&&Object.keys(response.operation).length&&angular.isDefined(response.operation.data)&&(root.operation.data[response.operation.server_id]=response.operation.data)}function buildRejectedRequestPromise(message){var deferred=$q.defer(),response={headers:{},status:!1};return angular.isDefined(message)?(response.data={message:""},response.data.message=message):response.data="",deferred.reject(response),deferred.promise}function haveAppTag(tagId,app_tags){var tags=app_tags.split(",");return tags.indexOf(tagId)>-1}function initOnBoarding(){$timeout(function(){var commonSvc=$injector.get("commonSvc");commonSvc.setUserUiData("cwWalkThroughIntegrationHeaderCount",1)&&$rootScope.preventNavigation(),$("body").addClass("cw-walkthrough-alert-count"),$("#integration_header_count").joyride({autoStart:!0,preRideCallback:function(){$("body").addClass("cw-walkthrough")},postRideCallback:function(){$("body").removeClass("cw-walkthrough"),$rootScope.allowNavigation()},postStepCallback:function(index,tip){$timeout(function(){$(".joyride-expose-wrapper").removeClass("jr-wrap-step1").removeClass("jr-wrap-step2").removeClass("jr-wrap-step3").removeClass("jr-wrap-step4"),$(".joyride-expose-wrapper").addClass("jr-wrap-step"+index),$("body").removeClass("cw-walkthrough-alert-count"),$(window).joyride("destroy")},0)},modal:!0,expose:!0})},2e3)}var root={isHelloBarActive:{member:!1,guest:!1},env:"",users_ui_data:"",restricted_features:{},loadChatPlugin:!0,current:{},serverCurrDate:"",serverExpDate:"",isTrialUserExpired:!1,trialGreetings:!1,verifiedGreeting:!1,operationPubSub:{},callBlockMsg:"",members:{},delay:polingDelay,preloader:"",message:"",poller:[],projects:{},cronList:{},wildCardList:{},restore:{},restore_copy:{},services:{},quickFormData:"",settings_cms_data:{},paginationItemId:!1,supportScopeIsUpdating:!1,operation:{operation:{},data:{}},server:{trial_user:{},providers:{},apps:{},serverMonitorData:{},monitor:{graph:"",target:"",duration:""},countries:{},settings:{},serverData:{},serverFetchError:"",serverStatus:!1,serverActions:{disabled:{stopped:["restart","apps","clone"],stopping:["restart","apps"]}},serverSections:{disabled:{add_server:["monitoring","scaling"],clone_server:[],starting_server:["monitoring","scaling"],restarting_server:["scaling","backup"],stopping_server:["services","security"],deleting_server:[],updating_server:[],upgrade_instance:["scaling"],add_app:[],remove_app:[],clone_app:[],backup_for_clone:[],update_app:[],update_cname:[],restore_app:[],rollback_restore:[],delete_backup:[],upgrade_volume:[]}}},user:{trialAccountExpire:!1,userDetails:{},isUserLoggedIn:!1,account_console_disabled:!1,is_verified_pending:!1,loaderMessage:!1,ACLUsers:[53,110,25,96]},alerts:{unread_count:0,total_count:0,processing:!1},appSSL:[],API:{URL:{login:"guest/auth/login",logout:"api/v1/auth/logout",server:"api/v1/server",cluster:"api/v1/cluster",start:"api/v1/server/start",stop:"api/v1/server/stop",restart:"api/v1/server/restart",scaleServer:"api/v1/server/scaleServer",scaleVolume:"api/v1/server/scaleVolume",clusterChangeStatus:"api/v1/cluster/changeStatus",operation_polling:"api/v1/operation/",signup:"guest/signup",user:"api/v1/user",validatePromoCode:"guest/validatePromoCode",forgot_password:"guest/user/forgotPassword",user_password:"guest/user/password",app:"api/v1/app",clone_app:"api/v1/app/clone",cloneToOtherServer:"api/v1/app/cloneToOtherServer",providers:"api/v1/providers",server_monitor_params:"api/v1/serverMonitorParams",countries:"api/v1/countries",regions:"api/v1/regions",serverSizes:"api/v1/getServerSizes",projects:"api/v1/project",additional_domains:"api/v1/app/manage/aliases",cname:"api/v1/app/manage/cname",cronList:"api/v1/app/manage/cronList",backup:"api/v1/app/manage/backup",take_backup:"api/v1/app/manage/takeBackup",restore:"api/v1/app/manage/restore",rollback:"api/v1/app/manage/rollback",csr:"api/v1/security/csr",install_crt:"api/v1/security/crt",install_own_ssl:"api/v1/security/ownSSL",crt_expire_date:"api/v1/security/getCrtExpireDt",server_monitor_detail:"api/v1/server/monitor/graphData",server_monitor_summary:"api/v1/server/monitor/summary",application_monitor_detail:"api/v1/app/monitor/graphData",application_monitor_summary:"api/v1/app/monitor/summary",service:"api/v1/service",clusterService:"api/v1/clusterService",change_service_state:"api/v1/service/state",cluster_change_service_state:"api/v1/clusterService/state",change_server_varnish_state:"api/v1/service/varnish",change_cluster_varnish_state:"api/v1/clusterService/varnish",server_manage_settings:"api/v1/server/manage/settings",newrelic:"api/v1/service/newrelic",cluster_newrelic:"api/v1/clusterService/newrelic",cloneServer:"api/v1/server/cloneServer",symlink:"api/v1/app/manage/symlink",dbPassword:"api/v1/app/manage/dbPassword",countryPhoneCode:"guest/countryPhoneCode",verifyPhone:"guest/user/verifyPhone",verifyCode:"guest/user/verifyCode",suspiciousLoginCode:"guest/user/suspiciousLoginCode",resendSuspiciousCode:"guest/user/resendSuspiciousCode",socialPassword:"guest/social/password",verifyTfa:"api/v1/tfa/verify",verifyBackupCode:"api/v1/tfa/verify_backup_code",verifySMSCode:"api/v1/tfa/verify_sms_code",validatePhoneForTFA:"api/v1/tfa/validate_tfa_phone",inviteFriend:"api/v1/inviteFriend",webroot:"api/v1/app/manage/webroot",from_address:"api/v1/app/manage/from_address",reset_permissions:"api/v1/app/manage/reset_permissions",get_appVarnish:"api/v1/service/appVarnish",get_clusterAppVarnish:"api/v1/cluster/service/appVarnish",get_appSshPerms:"api/v1/app/getAppSshPerms",post_appVarnish:"api/v1/service/appVarnish",update_appSshPerms:"api/v1/app/updateAppSshPerms",get_application_access:"api/v1/app/getApplicationAccess",getCdnSetting:"api/v1/app/getCdnSetting",app_cdn:"api/v1/app/cdn",purge_cdn:"api/v1/app/cdn/purge",activate_cdn:"api/v1/app/cdn/activate",app_cdn_bandwidth:"api/v1/app/cdn/bandwidth",app_state:"api/v1/app/state",change_pass_code_exist:"guest/user/checkPassCodeExist",getSSOLoginParams:"api/v1/getSSOLoginParams",consoleSso:"api/v1/user/consoleSso",lets_encrypt_install:"api/v1/security/lets_encrypt_install",lets_encrypt_auto:"api/v1/security/lets_encrypt_auto",lets_encrypt_manual_renew:"api/v1/security/lets_encrypt_manual_renew",revoke_lets_encrypt:"api/v1/security/lets_encrypt_revoke",update_signup_info:"guest/user/updateSignupInfo",alert_ack:"api/v1/alert/acknowledge",alert_mute:"api/v1/alert/mute",alerts_fix:"api/v1/alerts/fix",apiKey:"api/v1/user/api",get_appFPMSetting:"api/v1/app/manage/fpm_setting",get_serverPackage:"api/v1/app/manage/server_package",post_appFPMSetting:"api/v1/app/manage/fpm_setting",scaleKyupResources:"api/v1/server/scaleResources",get_appVarnishSetting:"api/v1/app/manage/varnish_setting",post_appVarnishSetting:"api/v1/app/manage/varnish_setting",post_npsMetrics:"api/v1/userActivity/npsMetrics",postAccountCancellationSurvey:"api/v1/userActivity/postAccountCancellationSurvey",get_appSupervisorSetting:"api/v1/app/supervisor",post_appSupervisorSetting:"api/v1/app/supervisor",scaleStorage:"api/v1/server/scaleStorage",attachStorage:"api/v1/server/attachStorage",getAccountDetail:"api/v1/account/detail",updateProfile:"api/v1/account/profile",updatePassword:"api/v1/account/password",newLoginAlert:"api/v1/account/new_login_alert",activateTFA:"api/v1/account/activate_tfa",deactivateTFA:"api/v1/account/deactivate_tfa",generateBackupCode:"api/v1/account/generate_backup_code",verifyAccountCancel:"api/v1/account/verify_account_cancel",cancelAccount:"api/v1/account/cancel_account",cancelAccountMember:"api/v1/member/cancel_account",reactivateAccount:"api/v1/account/reactivate_account",getCreditCard:"api/v1/account/credit_card",editCreditCard:"api/v1/account/edit_credit_card",updateAutoCharge:"api/v1/account/update_auto_charge",getBilling:"api/v1/account/billing",getInvoice:"api/v1/account/invoice",payInvoice:"api/v1/account/pay_invoice",payInvoiceViaFunds:"api/v1/account/pay_invoice/funds",downloadInvoice:"api/v1/account/download_invoice",getFund:"api/v1/account/fund",addFund:"api/v1/account/add_fund",getReferralDetail:"api/v1/account/affiliate_detail",getAffiliateDashboard:"api/v1/account/affiliateDashboard",updateReferralProfile:"api/v1/account/affiliate_profile",updateReferralTermCondition:"api/v1/account/affiliate_term_condition",getAffiliateCategory:"api/v1/account/get_affiliate_category",wirecardCreditCardAuth:"api/v1/account/wirecard/credit_card_auth",wirecardAddFundTransaction:"api/v1/account/wirecard/add_fund_transaction",wirecardPayInvoiceTransaction:"api/v1/account/wirecard/pay_invoice_transaction",wirecardTransactionStatus:"api/v1/payment_gateway/wirecard/transaction_progress",wirecardCreditCardAuthError:"api/v1/account/wirecard/credit_card_auth_error",wirecardCreditCardAuthSaveData:"api/v1/account/wirecard/save_data",wirecardCreditCardAuthProviderUpdate:"api/v1/account/wirecard/credit_card_auth_provider_update",get_mute_list:"api/v1/getMuteList",update_mute_list:"api/v1/updateMuteList",updateMemberProfile:"api/v1/member/updateProfile",updateMemberPassword:"api/v1/member/changePassword",getSslCrtInfo:"api/v1/security/getSslCrtInfo",getRackspace_mail_boxes:"api/v1/addon/getRackspaceMailboxes",rackspace:"api/v1/addon/rackspace",rackspaceMailboxes:"api/v1/addon/rackspace/mailbox",rackspaceForwardings:"api/v1/addon/rackspace/forwarding",rackspaceAlias:"api/v1/addon/rackspace/alias",rackspaceCatchall:"api/v1/addon/rackspace/catchall",serverTransferStatus:"api/v1/server_transfer/status",serverTransferRequest:"api/v1/server_transfer/request",cancelServerTransfer:"api/v1/server_transfer/cancel",storeSASReferral:"api/v1/sas/add_shareasale",updateUserPersona:"api/v1/userActivity/updateUserPersona",updateUserMigration:"api/v1/userActivity/updateUserMigration",viralLoopsSegmentCheck:"api/v1/viralloop/getSegment",viralLoopsMakeVisible:"api/v1/viralloop/makeVisible",gdprModal:"api/v1/gdpr/showModal",gdprSubmitConsent:"api/v1/gdpr/respond",ccAuthMakeDisplayed:"api/v1/ccauth/make_displayed",corsHeaders:"api/v1/app/cors_header",serverDetail:"api/v1/server/detail",signupCustomModal:"api/v1/signup/showModal",analyticsParams:"api/v1/app/analytics",analyticsTraffic:"api/v1/app/analytics/traffic",getServerPackages:"api/v1/server/packages",enforceHttps:"api/v1/app/manage/enforce_https",geoIpStatus:"api/v1/app/manage/geo_ip_header",newConversionAlert:"api/v1/send/slack/alert"},METHOD:["GET","POST","PUT","DELETE"]},operation_keys:["services","git_list","cron_list","fpm_settings","custom_ssl","package_settings","web_root","addons","app_varnish","app_sftp","whitelist_ip"]};return root.callAPI=function(method,url,data,requestId,cache){if(-1!=root.API.METHOD.indexOf(method)){root.callBlockMsg="";var httpMethod=$filter("lowercase")(method),deferred=$q.defer(),result={},config={
method:method,url:apiEndPoint+url,data:data,requestId:requestId,cache:!(!angular.isDefined(cache)||!cache)};if(isBlockPost(config)){$(".hdr-loader").hide(),$(".glb-module-block-wrap").css("display","none");var message=root.callBlockMsg;return buildRejectedRequestPromise(message)}return angular.isDefined(requestId)&&root.ifDuplicated(requestId)?buildRejectedRequestPromise():$http(config).then(function(response){return 200===response.status?(deferred.resolve(response),response.data&&(result=response.data,"get"!=httpMethod&&root.user.isUserLoggedIn&&-1===root.current.url.indexOf("account"))?result:result):void 0},function(response){return result=response.data,root.redirectToLogin(response),result=root.setErrorMessage(response),deferred.reject(result),deferred.promise})}},root.setUserDetails=function(userObj){root.user.userDetails=userObj,$rootScope.publish("cwUserLoggedIn")},root.setRootScope=function(data){var deferred=$q.defer();if(root.user.isUserLoggedIn||root.redirectToLogin(),angular.isDefined(root.user.is_verified_pending)&&root.user.is_verified_pending)return deferred.resolve(data),deferred.promise;if(!$.isEmptyObject(root.server.serverData))return deferred.resolve(data),deferred.promise;var result=root.callAPI("GET",root.API.URL.server,null);return result.then(function(data){data.servers?(angular.isDefined(data.expired)&&(root.isTrialUserExpired=data.expired),root.reStructureServerList(data.servers),root.reStructureClusterList(data.clusters),deferred.resolve(data)):(root.server.serverFetchError="Unfortunately, operation failed due to servers not fetched successfully.",deferred.reject(data))},function(data){root.server.serverFetchError="Unfortunately, operation failed due to servers not fetched successfully.",deferred.resolve(data)}),deferred.promise},root.reStructureServerList=function(servers){var stagingSvc=$injector.get("stagingSvc");angular.forEach(servers,function(server){server.serverState="running"==server.status,server.operation_type="",server.operationBasedAppId="",server=operationSvc.excludeOperation(server),angular.isDefined(server.operations)&&server.operations.length>0&&(server.operation_type=server.operations[0].type,server.operationBasedAppId=server.operations[0].app_id,root.startPolling(server.id,server.operations[0].id,root.delay,"reStructureServerList")),server.apps=root.sortServerByName(server.apps,"label"),root.server.serverData[server.id]=server});var memberSvc=$injector.get("memberSvc");memberSvc.addMembersToServerList(),memberSvc.getMembersToApp(),stagingSvc.mappedStagingWithApp()},root.reStructureClusterList=function(clusters){angular.forEach(clusters,function(cluster){cluster.clusterState="running"==cluster.status,cluster.operation_type="",cluster.operationBasedAppId="",angular.isDefined(cluster.operations)&&cluster.operations.length>0&&(cluster.operation_type=cluster.operations[0].type,cluster.operationBasedAppId=cluster.operations[0].app_id,root.startPolling(cluster.id,cluster.operations[0].id,"reStructureClusterList")),cluster.apps=root.sortServerByName(cluster.apps,"label");var clusterSvc=$injector.get("clusterSvc");clusterSvc.clusters.list[cluster.id]=cluster})},root.reStructureServerObject=function(server){var stagingSvc=$injector.get("stagingSvc");server.serverState="running"==server.status,server.operation_type="",server.operationBasedAppId="",server=operationSvc.excludeOperation(server),angular.isDefined(server.operations)&&server.operations.length>0&&(server.operation_type=server.operations[0].type,server.operationBasedAppId=server.operations[0].app_id,root.startPolling(server.id,server.operations[0].id,"reStructureServerObject")),server.apps=root.sortServerByName(server.apps,"label"),root.server.serverData[server.id]=server;var memberSvc=$injector.get("memberSvc");memberSvc.addMembersToServerList(),memberSvc.getMembersToApp(),stagingSvc.mappedStagingWithApp()},root.reStructureClusterObject=function(cluster){cluster.clusterState="running"==cluster.status,cluster.operation_type="",cluster.operationBasedAppId="",angular.isDefined(cluster.operations)&&cluster.operations.length>0&&(cluster.operation_type=cluster.operations[0].type,cluster.operationBasedAppId=cluster.operations[0].app_id,root.startPolling(cluster.id,cluster.operations[0].id,"reStructureClusterObject")),cluster.apps=root.sortServerByName(cluster.apps,"label");var clusterSvc=$injector.get("clusterSvc");clusterSvc.clusters.list[cluster.id]=cluster},root.startPolling=function(item_id,operation_id,delay,defaultOffset){var deferred=$q.defer();if(setPaginationOffset(operation_id,item_id,defaultOffset),operation_id="undefined"==typeof operation_id?!1:operation_id,delay="undefined"==typeof delay?root.delay:delay,root.user.isUserLoggedIn||root.redirectToLogin(),!operation_id)return!1;-1==root.poller.indexOf(String(operation_id))&&root.poller.push(String(operation_id));var result=root.callAPI("GET",root.API.URL.operation_polling+operation_id,null,"polling_"+operation_id);return result.then(function(data){if(data.operation){if("0"===data.operation.is_completed){handleOperationProgress(data);var item_id=0!==parseInt(data.operation.server_id)?data.operation.server_id:data.operation.cluster_id,polTimeout=$timeout(function(){root.startPolling(item_id,operation_id,root.delay,"polTimeout")},delay)}else $timeout.cancel(polTimeout),0!==parseInt(data.operation.server_id)?handleServerOperationCompletion(data):handleClusterOperationCompletion(data),window.setTimeout(function(){$rootScope.unsubscribe("operation-"+data.operation.id),$rootScope.unsubscribe("serverData-staging"),$rootScope.unsubscribe("operations")},2e3),deferred.reject(data);deferred.resolve(data)}else $timeout(function(){root.startPolling(item_id,operation_id,root.delay,"else")},delay),deferred.resolve(data)}),deferred.promise},root.redirectToLogin=function(currentResponse){401===currentResponse.status&&"Unauthorized"===currentResponse.data?$http.get(apiEndPoint+root.API.URL.user).then(function(response){},function(response){401===response.status&&"Unauthorized"===response.data&&(root.user.isUserLoggedIn=!1,root.server.serverStatus=!1,$window.location.href="")}):401!==currentResponse.status||root.user.isUserLoggedIn?root.user.isUserLoggedIn&&401===currentResponse.status&&1===root.current.url.indexOf("account")&&(root.server.serverStatus=!1,$window.location.href=""):(root.server.serverStatus=!1,$window.location.href="")},root.authCheck=function(){var deferred=$q.defer();if(root.user.isUserLoggedIn)deferred.resolve();else{var commonSvc=$injector.get("commonSvc");commonSvc.getCookie("cwLoaderMessage")&&(root.user.loaderMessage=!0),commonSvc.getCookie("cwlogin")&&($("#cw-app_loader").show(),$("#angular-app").hide()),$http.get(apiEndPoint+root.API.URL.user).then(function(response){if(200===response.status){var commonSvc=$injector.get("commonSvc");angular.isDefined(response.data.is_verified)&&!response.data.is_verified?(root.user.loaderMessage=!0,root.user.is_verified_pending=!0):commonSvc.removeCookie("cwLoaderMessage"),ocLazyloadSvc.isModuleLoaded("server").then(function(){root.user.isUserLoggedIn=!0;$injector.get("commonSvc");return angular.isDefined(response.data.is_account_console_disabled)?(root.setUserDetails(response.data),root.user.account_console_disabled=!0,void deferred.resolve(response)):(root.setRootScope().then(function(serversResponse){root.setUserDetails(response.data),root.setServerProperties().then(function(){ocLazyloadSvc.isModuleLoaded("cluster").then(function(){root.getProjects().then(function(){var viralloopsSvc=$injector.get("viralloopsSvc");viralloopsSvc.getSegmentUser().then(function(){var chameleonSvc=$injector.get("chameleonSvc");chameleonSvc.setChameleonScript()});var memberSvc=$injector.get("memberSvc");"secondary"!=root.user.userDetails.type?memberSvc.getMembersList().then(function(members){memberSvc.members=members,root.hidePageLoader();var commonSvc=$injector.get("commonSvc");if(""!==commonSvc.getCookie("cwredirect")){deferred.reject(response);var previousPage=commonSvc.getCookie("cwredirect");commonSvc.removeCookie("cwredirect"),window.location=previousPage}else deferred.resolve(response),memberSvc.isMemberLoggedIn()||root.startPollingAlerts()}):(root.user.userDetails=memberSvc.initMember(root.user.userDetails),root.hidePageLoader(),deferred.resolve(response)),announcementSvc.fetchCWAnnouncement(),_mfq.push(["setVariable","user-id",root.user.userDetails.id]),_mfq.push(["setVariable","free-trial","trial"===root.user.userDetails.customer_type?1:0]),angular.isUndefined(root.user.userDetails.admin_loggedin)&&$rootScope.publish("appBootCompleted"),$timeout(function(){$("#cw-app_loader").fadeOut(),$("#angular-app").fadeIn(),angular.isUndefined(root.user.userDetails.admin_loggedin)&&$rootScope.publish("appRendered")},3500)})})})},function(response){$timeout(function(){$("#cw-app_loader").fadeOut(),$("#angular-app").fadeIn()},3500)}),void ocLazyloadSvc.addCustomFonts())})}else deferred.reject(response),$window.location.href=""},function(response){var commonSvc=$injector.get("commonSvc");if(commonSvc.removeCookie("cwlogin"),$rootScope.publish("cwNotUserLoggedIn"),-1===["login","welcome_back"].indexOf(root.current.name)){var commonSvc=$injector.get("commonSvc");commonSvc.createCookie("cwredirect",$location.path().replace("/",""),1)}deferred.reject(response),"/login?activation"!==root.current.url&&401===response.status&&-1===["/login","/welcome-back"].indexOf(root.current.url)&&(window.location="login")})}return deferred.promise},root.message=function(str,data){return str=str.replace(/\$(\w+)\$/g,function(a,b){return"undefined"!=typeof data[b]?data[b]:"MESSAGE KEY NOT FOUND"})},root.setErrorMessage=function(response){return"undefined"==typeof response.data&&(response.data={message:"Unfortunately, operation failed due to unexpected error."}),response},root.isOperationRunning=function(server_id){return angular.isDefined(root.server.serverData[server_id].operations)},root.getPartial=function(partial){return viewPath+"partials/"+partial+".html"},root.getRegion=function(region_code,cloud){var region_label=null;return angular.forEach(root.server.providers,function(providers){cloud===providers.label_api_server&&angular.forEach(providers.regions,function(region){region.label_api_server===region_code&&(region_label=region.label)})}),region_label},root.getServerProviders=function(provider){var provider_label=null;return angular.forEach(root.server.providers,function(val){val.label_api_server===provider&&(provider_label=val.label)}),provider_label},root.ifDuplicated=function(requestId){var duplicated=$http.pendingRequests.filter(function(pendingReqConfig){return pendingReqConfig.requestId===requestId});return duplicated.length>0},root.setServerProperties=function(){var deferred=$q.defer(),customer_type=root.user.userDetails.customer_type,providers=root.callAPI("GET",root.API.URL.providers+"?type="+customer_type,null,"providers_"+customer_type);return providers.then(function(data){if(data.provider){root.server.providers=data.provider,root.server.apps=data.apps,root.server.countries=data.countries,root.server.serverMonitorData=data.server_monitor,root.server.settings_cms_data=data.server_settings,root.server.addons=data.addons,root.server.trial_user=data.trial_user,root.env=data.env,root.users_ui_data=data.users_ui_data,root.restricted_features=angular.isDefined(data.restricted_features)?data.restricted_features:{},angular.isDefined(data.selected_partnership_app)&&(root.selected_partnership_app=data.selected_partnership_app);var clusterSvc=$injector.get("clusterSvc");$injector.get("commonSvc");if(clusterSvc.isClusterCreateEnabled()){var apps=angular.copy(root.server.apps);angular.forEach(apps,function(app){clusterSvc.clusters.apps[app.id]=app,angular.forEach(app.versions,function(version){haveAppTag("2",version.app_tag)||delete clusterSvc.clusters.apps[app.id].versions[version.id]}),0===Object.keys(clusterSvc.clusters.apps[app.id].versions).length&&delete clusterSvc.clusters.apps[app.id]})}clusterSvc.clusters.cluster_config=data.cluster_config,clusterSvc.clusters.providers=data.provider,$rootScope.publish("servers-fetched",!0),deferred.resolve(data)}else deferred.reject(data)}),deferred.promise},root.getProjects=function(){var deferred=$q.defer(),customer_id=root.user.userDetails.id;if(angular.isDefined(root.user.userDetails.is_verified)&&!root.user.userDetails.is_verified)return deferred.resolve(),deferred.promise;var projects=root.callAPI("GET",root.API.URL.projects,null,"projects_"+customer_id);return projects.then(function(response){if(response.projects){var projects=response.projects;angular.forEach(projects,function(project){var apps=[];angular.forEach(root.server.serverData,function(server){angular.forEach(server.apps,function(app){parseInt(app.project_id)===parseInt(project.id)&&apps.push(parseInt(app.id))})}),project.app_count=apps}),root.projects=projects,deferred.resolve(root.projects)}},function(response){root.projects={},deferred.resolve(root.projects)}),deferred.promise},root.sortAppsByLast=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return a=new Date(a[attribute]),b=new Date(b[attribute]),b-a}),array},root.sortAppsByType=function(input,type){if(!angular.isObject(input))return input;var index=[],unTaggedApps=[];return angular.forEach(input,function(filterObj){filterObj.parent===type?index.push(filterObj):unTaggedApps.push(filterObj)}),index=index.concat(unTaggedApps)},root.sortAppsByServer=function(apps){if(!angular.isObject(apps))return apps;var sortedApps=[];for(var appId in apps)sortedApps.push(apps[appId]);return sortedApps.sort(function(a,b){return a.binding_label<b.binding_label?-1:a.binding_label>b.binding_label?1:0}),sortedApps},root.sortAppsByProject=function(apps,projects){if(!angular.isObject(apps))return apps;var index=[];angular.forEach(projects,function(project,key){for(var i in apps)parseInt(apps[i].project_id)===parseInt(project.id)&&index.push(apps[i])});for(var i in apps)0!=parseInt(apps[i].project_id)&&void 0!=apps[i].project_id||index.push(apps[i]);return index},root.getTaggedApps=function(apps,projects){var taggedApps=[];return angular.forEach(projects,function(project,key){for(var i in apps)parseInt(apps[i].project_id)===parseInt(project.id)&&taggedApps.push(apps[i])}),taggedApps},root.sortServerByLast=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return a=new Date(a[attribute].replace(/-/g,"/")).getTime(),b=new Date(b[attribute].replace(/-/g,"/")).getTime(),b-a}),array},root.sortServerByFirst=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return a=new Date(a[attribute].replace(/-/g,"/")).getTime(),b=new Date(b[attribute].replace(/-/g,"/")).getTime(),a-b}),array},root.sortServerByName=function(input,attribute){if(!angular.isObject(input))return input;var array=Object.keys(input).map(function(key){return input[key]});return array.sort(function(a,b){return a[attribute].toLowerCase()<b[attribute].toLowerCase()?-1:a[attribute].toLowerCase()>b[attribute].toLowerCase()?1:0}),array},root.sortServerByStatus=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return"running"!=a[attribute]?1:"running"===b[attribute]?-1:0}),array},root.sortServerByAppCount=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){if(angular.isDefined(a[attribute])&&angular.isDefined(b[attribute])){if(a[attribute].length<b[attribute].length)return 1;if(a[attribute].length>b[attribute].length)return-1}return-1}),array},root.sortByColumn=function(input,attribute){if(!angular.isObject(input))return input;var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return parseInt(a[attribute])-parseInt(b[attribute])}),array},root.dynamicSort=function(property){var sortOrder=1;return"-"===property[0]&&(sortOrder=-1,property=property.substr(1)),function(a,b){return-1==sortOrder?parseInt(b[property])-parseInt(a[property]):parseInt(a[property])-parseInt(b[property])}},root.getRegionFromRegionCode=function(region_code){return root.getRegion(region_code)},root.isActive=function(state_name){return angular.isArray(state_name)&&-1!==state_name.indexOf($state.current.name)?!0:$state.current.name===state_name?!0:void 0},root.isSrefActive=function(sref){return sref===$state.current.name?!0:void 0},root.showPageLoader=function(){$(".full-pg-disable").show(),$(".hdr-loader").show()},root.hidePageLoader=function(){$(".full-pg-disable").hide(),$(".hdr-loader").hide()},root.getRegex=function(key){return regex[key]},root.redirectToServerPage=function(server_id){return""===server_id?void($window.location.href=""):void("running"==root.server.serverData[server_id].status&&""==root.server.serverData[server_id].operation_type||$state.go("server"))},root.clone_server=function(server_id,$event){var server_label=root.server.serverData[server_id].label;$rootScope.preventNavigation();var confirm=$mdDialog.confirm().title("Server Cloning").textContent("Are you sure you want to clone "+server_label+" server?").ariaLabel("Server Cloning").targetEvent($event).ok("Yes").cancel("No");$mdDialog.show(confirm).then(function(){$rootScope.allowNavigation(),$state.go("server_clone",{id:server_id})},function(){$rootScope.allowNavigation()})},root.showErrorMessage=function(response){var errors_msg="";angular.isDefined(response.data.message)?errors_msg=response.data.message:angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=root.message(serverMessages.server_no_response)})}),toastr.error(errors_msg)},root.isOperationBoxVisible=function(server_id){var operation_type=root.server.serverData[server_id].operation_type,operations=["add_server","add_app","clone_server","clone_app","cloneToOtherServer","update_cname","disaster_recovery","add_staging_app"];return""!=operation_type&&-1!=operations.indexOf(operation_type)},root.redirectToSocialSignup=function(provider){$window.location=apiEndPoint+"/guest/social/signup?provider="+provider},root.redirectToSocialLogin=function(provider){$window.location=apiEndPoint+"/guest/social/login?provider="+provider},root.mapSecret=function(data){if(!data)return"********";for(var pass="",passcount=data.length,i=0;passcount>i;i++)pass+="*";return pass},root.togglePasswordView=function(targetClass){$("."+targetClass).hasClass("password-hide")?$("."+targetClass).removeClass("password-hide"):$("."+targetClass).addClass("password-hide")},root.getServerCurrDate=function(){return root.serverCurrDate},root.setServerCurrDate=function(date){root.serverCurrDate=date},root.getServerExpDate=function(){return root.serverExpDate},root.setServerExpDate=function(date){root.serverExpDate=date},root.getServerSettings=function(server_id,eventData){var eventAttributes,deferred=$q.defer();return eventAttributes=angular.isUndefined(eventData)?"":"&retry_count="+eventData.retry_count+"&retry_button="+eventData.retry_button,$.isEmptyObject(root.server.settings[server_id])?root.callAPI("GET",root.API.URL.server_manage_settings+"?server_id="+server_id+eventAttributes,null,"getServerSettings_"+server_id).then(function(response){root.server.settings[server_id]={basic:{execution_limit:response.settings.execution_limit,upload_size:response.settings.upload_size,memory_limit:response.settings.memory_limit,display_errors:response.settings.display_errors,error_reporting:response.settings.error_reporting,date_timezone:response.settings["date.timezone"]},advance:{new_default_app:response.settings.new_default_app,static_cache_expiry:response.settings.static_cache_expiry,mod_waf:angular.isDefined(response.settings.mod_waf)&&""!==response.settings.mod_waf&&"disabled"!==response.settings.mod_waf?response.settings.mod_waf:"disabled",varnish_default_ttl:response.settings.varnish_default_ttl,mysql_timezone:response.settings.mysql_timezone,character_set_server:response.settings.character_set_server,max_connections:response.settings.max_connections,innodb_buffer_pool_size:response.settings.innodb_buffer_pool_size,key_buffer_size:response.settings.key_buffer_size,innodb_lock_wait_timeout:response.settings.innodb_lock_wait_timeout,wait_timeout:response.settings.wait_timeout,max_input_vars:response.settings.max_input_vars,max_input_time:response.settings.max_input_time,apc_shm_size:response.settings["apc.shm_size"],sys_locale:response.settings.sys_locale,tls_version:response.settings.ssl_protocols},packages:response.settings.package_versions},angular.isDefined(response.settings.mod_xdebug)&&(root.server.settings[server_id].advance.mod_xdebug=response.settings.mod_xdebug),angular.isDefined(response.settings.short_open_tag)&&(root.server.settings[server_id].advance.short_open_tag=response.settings.short_open_tag),angular.isDefined(response.settings.opcache_memory_size)&&(root.server.settings[server_id].advance.opcache_memory_size=response.settings.opcache_memory_size),angular.isDefined(response.settings.nginx_http2)&&(root.server.settings[server_id].advance.nginx_http2=response.settings.nginx_http2),angular.isDefined(response.settings.mod_zendguard)&&(root.server.settings[server_id].advance.mod_zendguard=response.settings.mod_zendguard),angular.isDefined(response.settings.package_versions.elasticsearch)&&""!==response.settings.package_versions.elasticsearch&&"disabled"!==response.settings.package_versions.elasticsearch?root.server.settings[server_id].packages.elasticsearch=response.settings.package_versions.elasticsearch:root.server.settings[server_id].packages.elasticsearch="disabled",angular.isDefined(response.settings.direct_access)&&(root.server.settings[server_id].advance.direct_access=response.settings.direct_access),deferred.resolve(root.server.settings[server_id])},function(response){deferred.reject(response)}):deferred.resolve(root.server.settings[server_id]),deferred.promise},root.loadServices=function(server_id){var deferred=$q.defer();if(angular.isDefined(root.services[server_id]))deferred.resolve(root.services[server_id]);else{var result=root.callAPI("GET",root.API.URL.service+"?server_id="+server_id,null,"getServices_"+server_id);result.then(function(response){deferred.resolve(response),response.services&&(root.services[server_id]=response.services.status)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=serverMessages.server_no_response})}),""!=errors_msg&&toastr.error(errors_msg)})}return deferred.promise},root.startPollingAlerts=function(){root.alerts.processing=!0;var delay=alertsDelay,deferred=$q.defer();if(root.user.isUserLoggedIn||root.redirectToLogin(),angular.isDefined(root.user.userDetails.is_verified)&&!root.user.userDetails.is_verified)return deferred.resolve(),deferred.promise;var cloudBotSvc=$injector.get("cloudBotSvc"),result=cloudBotSvc.getAlertListUnReadCount();return result.then(function(response){if(root.alerts.processing=!1,!$.isEmptyObject(response)&&(root.alerts.unread_count=response.unread_count,root.alerts.total_count=response.total_count,root.isEnabledCoachMarks()&&root.alerts.unread_count>=7)){var user_ui_data_pages,user_ui_data_global,commonSvc=$injector.get("commonSvc"),pages=["server_detail_access","app_detail_access"];-1!==pages.indexOf(root.current.name)?(user_ui_data_pages=commonSvc.getUserUiData("cwWalkThroughServer"),null!==user_ui_data_pages&&(user_ui_data_global=commonSvc.getUserUiData("cwWalkThroughIntegrationHeaderCount"),user_ui_data_pages&&!user_ui_data_global&&root.alerts.unread_count>=7&&initOnBoarding())):(user_ui_data_global=commonSvc.getUserUiData("cwWalkThroughIntegrationHeaderCount"),!user_ui_data_global&&root.alerts.unread_count>=7&&initOnBoarding())}$timeout(function(){root.startPollingAlerts()},delay);deferred.resolve(response)},function(response){root.alerts.processing=!1,$timeout(function(){root.startPollingAlerts()},delay),deferred.resolve(response)}),deferred.promise},root.showMagentoPerformanceTool=function(app,app_version){var ver_regex=/^2.*$/;return"magento"===app&&!ver_regex.test(app_version)},root.isEnabledCoachMarks=function(){return"secondary"===root.user.userDetails.type},root.isTrialExpired=function(){var customer_type=root.user.userDetails.customer_type;return!!("trial"===customer_type&&1===parseInt(Object.keys(root.server.serverData).length)||"trial"===customer_type&&root.isTrialUserExpired)},root.disableSyncLoader=function(){},root.getSize=function(size,type,isMemory,isRound){if(0>=size)return"0 "+type;var units=["MB","GB","TB"];"KB"==type&&(units=["KB","MB","GB","TB"]);var i=parseInt(Math.floor(Math.log(size)/Math.log(1024))),val=size/Math.pow(1024,0>i?1:i);return isMemory&&"MB"!=units[i]?val=val.toFixed(2):isRound&&(val=Math.round(val,2)),val=val+" "+units[i],0>i?"0 "+type:val},root.setAppSSLCertificate=function(data,type){"add"==type?root.appSSL.push(data):root.appSSL=data},root.getAppSSLCertificate=function(){return root.appSSL},root}angular.module("cgConsole").factory("consoleApiSvc",["apiEndPoint","$http","$q","$timeout","$window","$location","$filter","toastr","serverMessages","$rootScope","viewPath","$state","$mdMenu","regex","$mdDialog","polingDelay","operationSvc","$injector","alertsDelay","announcementSvc","ocLazyloadSvc",consoleApiSvc])}(),function(){"use strict";function countrySvc(consoleApiSvc,$q,$rootScope){var root={countries:{},isCountriesFetched:!1};return root.getCountries=function(){var deferred=$q.defer();return root.isCountriesFetched?deferred.resolve(root.countries):consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.countries,null,"fetchingCountries").then(function(data){deferred.resolve(),root.countries=data,root.isCountriesFetched=!0},function(data){deferred.reject(data)}),deferred.promise},root}angular.module("cgConsole").factory("countrySvc",["consoleApiSvc","$q","$rootScope",countrySvc])}(),function(){"use strict";function dataSvc(consoleApiSvc){var root={};return root.getServers=function(){return consoleApiSvc.server.serverData},root.getServerById=function(server_id){return consoleApiSvc.server.serverData[server_id]},root.getServerApps=function(){return angular.isDefined(consoleApiSvc.server.serverData.apps)?consoleApiSvc.server.serverData.apps:!1},root.getServerAppById=function(app_id){if(angular.isDefined(consoleApiSvc.server.serverData.apps)){var application;return angular.forEach(consoleApiSvc.server.serverData.apps,function(app){parseInt(app.id)===parseInt(app_id)&&(application=app)}),application}return!1},root.translateMessage=function(str,data){return consoleApiSvc.message(str,data)},root.selectDefaultProviderByLandingPage=function(providers){function isEligible(){return $.isEmptyObject(consoleApiSvc.server.serverData)}function selectProvider(providers,pdr){var i,j,old_first_order=null,rem_sort=null;for(i=0;i<providers.length;i++)providers[i].default_provider=0,1==providers[i].sort_order&&(old_first_order=i),providers[i].label_api_server==pdr&&(rem_sort=providers[i].sort_order,providers[i].sort_order=1);for(providers[old_first_order].sort_order=rem_sort,providers[0].default_provider=1,j=0;j<providers.length;j++)providers[j].label_api_server==pdr&&providers.unshift(providers.splice(j,1)[0])}function getLandedProvider(){return hasTag("linode")?"linode":hasTag("vultr")?"vultr":"trial"==consoleApiSvc.user.userDetails.customer_type?"":hasTag("amazon")?"amazon":hasTag("gce")?"gce":""}function hasTag(tag){return-1!=consoleApiSvc.user.userDetails.user_tags_name.indexOf("website-landing-"+tag)||-1!=consoleApiSvc.user.userDetails.user_tags_name.indexOf("website-conversion-"+tag)}var landedProvider=getLandedProvider();""!=landedProvider&&isEligible()&&selectProvider(providers,landedProvider)},root}angular.module("cgConsole").factory("dataSvc",["consoleApiSvc",dataSvc])}(),function(){"use strict";function diskUsageSvc(consoleApiSvc,toastrSvc,$q,$rootScope,platformPollingSvc,blockStorageSvc){var root={};return root.fetchDestinationDiskUsage=function(fetchExistingServerDiskUsage,sourceServerDiskUsage,sourceServerId,destinationServer){var deferred=$q.defer();if(angular.isDefined(fetchExistingServerDiskUsage)&&fetchExistingServerDiskUsage&&("new"!=destinationServer||"same"!=destinationServer)){var serverInstance=consoleApiSvc.server.serverData[parseInt(destinationServer)];blockStorageSvc.getDiskUsage(destinationServer,null,0).then(function(response){if(angular.isDefined(response.status)&&response.status&&angular.isDefined(response.operation_id)){response.data=response;platformPollingSvc.startPlatformPolling(destinationServer,response.data.operation_id,1,"ansible"),window.PubSub.subscribe("platform_operation-"+response.data.operation_id,function(msg,isSuccess){if(isSuccess){$rootScope.publish("operation-disk-usage"+parseInt(destinationServer),!0);var destinationServerDiskUsage=root.calculateDiskUsageFromMiddleware(destinationServer);deferred.resolve(root.validateDiskUsage(sourceServerDiskUsage,destinationServerDiskUsage,serverInstance))}else deferred.reject(response)})}else deferred.reject(response)})}else{var serverInstance=consoleApiSvc.server.serverData[parseInt(sourceServerId)],destinationServerDiskUsage=sourceServerDiskUsage;deferred.resolve(root.validateDiskUsage(sourceServerDiskUsage,destinationServerDiskUsage,serverInstance))}return deferred.promise},root.calculateDiskUsageFromMiddleware=function(server_id){var data,serverUsage,serverData,serverDB,applicationUsage,diskUsageData={};return data=platformPollingSvc.server.diskUsage[server_id],angular.isDefined(data.disk_usage)&&Object.keys(data.disk_usage).length?(applicationUsage=root.calculateApplicationUsage(data.disk_usage),serverData=angular.isDefined(data.disk_usage["disk.directories.home"])?parseInt(Math.ceil(data.disk_usage["disk.directories.home"]/1024)):0,serverDB=angular.isDefined(data.disk_usage["disk.directories.mysql"])?parseInt(Math.ceil(data.disk_usage["disk.directories.mysql"]/1024)):0,serverUsage=serverData+serverDB+1,diskUsageData={app:Object.keys(applicationUsage).length>0?applicationUsage.appUsage:serverUsage,server:serverUsage,appData:Object.keys(applicationUsage).length>0?applicationUsage.appData:serverData,appDB:Object.keys(applicationUsage).length>0?applicationUsage.appDB:serverDB,serverData:serverData,serverDB:serverDB,free_disk:{remainingDiskUsage:angular.isDefined(data.disk_usage.free_disk.remaining)?{remaining:parseInt(Math.ceil(data.disk_usage.free_disk.remaining/1024))}:{data:parseInt(Math.ceil(data.disk_usage.free_disk.data/1024)),db:parseInt(Math.ceil(data.disk_usage.free_disk.db/1024))}}}):void 0},root.validateDiskUsage=function(sourceDiskUsageData,diskUsageData,server){var remainingDbData,remainingAppData,remainingStorage,message="";if(!angular.isDefined(diskUsageData)||!Object.keys(diskUsageData).length)return message="We are unable to check the requirements. Please retry or contact support if the problem persists.";switch(server.cloud){case"amazon":case"gce":if(remainingAppData=parseInt(diskUsageData.free_disk.remainingDiskUsage.data),remainingDbData=parseInt(diskUsageData.free_disk.remainingDiskUsage.db),remainingAppData<sourceDiskUsageData.appData||remainingDbData<sourceDiskUsageData.appDB)return message="The available disk space is insufficient on the Destination server. Please choose another server, or make sure that the Destination server has sufficient disk space.";break;case"do":case"linode":case"vultr":case"kyup":if(remainingStorage=parseInt(diskUsageData.free_disk.remainingDiskUsage.remaining),
angular.isDefined(remainingStorage)&&remainingStorage<sourceDiskUsageData.appData+sourceDiskUsageData.appDB)return message="The available disk space is insufficient on the Destination server. Please choose another server, or make sure that the Destination server has sufficient disk space."}return message},root.calculateApplicationUsage=function(applicationUsage){var appDiskUsage={};return angular.isDefined(applicationUsage.app)&&null!==applicationUsage.app&&(appDiskUsage.appUsage=parseInt(Math.ceil(applicationUsage.app.home/1024)+parseInt(Math.ceil(applicationUsage.app.mysql/1024)+1)),appDiskUsage.appData=parseInt(Math.ceil(applicationUsage.app.home/1024)),appDiskUsage.appDB=parseInt(Math.ceil(applicationUsage.app.mysql/1024))),appDiskUsage},root}angular.module("cgConsole").factory("diskUsageSvc",["consoleApiSvc","toastrSvc","$q","$rootScope","platformPollingSvc","blockStorageSvc",diskUsageSvc])}(),function(){"use strict";function gdprConsentSvc(consoleApiSvc,$q,$rootScope,$mdDialog,serverViewPath,commonSvc){var root={isGdprModalShown:!1};return root.gdprConsentModal=function(){return},window.PubSub.subscribe("appBootCompleted",function(msg,data){root.gdprConsentModal()}),root}angular.module("cgConsole").factory("gdprConsentSvc",["consoleApiSvc","$q","$rootScope","$mdDialog","serverViewPath","commonSvc",gdprConsentSvc])}(),function(){"use strict";function livechatSvc($timeout,$interval,livechatPriorityGroup,livechatHighValueGroup,chatBotGroup,commonSvc,consoleApiSvc){var root={};return root.setGroup=function(){var supportScope=(consoleApiSvc.user.userDetails.is_verified,consoleApiSvc.user.userDetails.support_scope),lastInvoice=null===consoleApiSvc.user.userDetails.last_invoice?0:consoleApiSvc.user.userDetails.last_invoice.amount,signupPricing=consoleApiSvc.user.userDetails.signup_pricing,isPriorityCustomer=-1!==["advanced","premium"].indexOf(supportScope),isHighValueCustomer=lastInvoice>=100||-1!==["b","c","d","e"].indexOf(signupPricing),isMassesCustomer=100>lastInvoice||-1!==["a","none"].indexOf(signupPricing);isPriorityCustomer?window.__lc.group="live"===window.APP_ENV?livechatPriorityGroup:19:isHighValueCustomer?window.__lc.group="live"===window.APP_ENV?livechatHighValueGroup:20:isMassesCustomer?window.__lc.group="live"===window.APP_ENV?chatBotGroup:13:window.__lc.group=null},root.load=function(onChatLoaded){$timeout(function(){!function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice);var head=document.getElementsByTagName("head")[0],liveChat=document.createElement("script");liveChat.setAttribute("async","true"),liveChat.setAttribute("type","text/javascript"),liveChat.setAttribute("src",host+"cdn.livechatinc.com/tracking.js"),head.appendChild(liveChat);var lcApi=$interval(function(){if(angular.isDefined(parent.LC_API)&&parent.LC_API.is_loaded()){if($interval.cancel(lcApi),""!=commonSvc.getCookie("cw_chat_ended")&&parent.LC_API.chat_running()){commonSvc.removeCookie("cw_chat_ended");try{parent.LC_API.close_chat()}catch(err){console.log("LC: "+err)}}else""==commonSvc.getCookie("cw_chat_ended")||parent.LC_API.chat_running()||commonSvc.removeCookie("cw_chat_ended");if(angular.equals(consoleApiSvc.user.userDetails,{})&&(parent.LC_API.on_chat_ended=function(){commonSvc.removeCookie("cw_chat_ended")}),$("body #livechat-compact-container").hide(),$("body #livechat-eye-catcher").hide(),"yes"==commonSvc.getCookie("chatsupport_on_login")){$("body #chat-widget-container").show();try{parent.LC_API.open_chat_window(),parent.LC_API.on_chat_window_minimized=function(){$("body #chat-widget-container").hide()}}catch(err){console.log("LC: "+err)}commonSvc.removeCookie("chatsupport_on_login")}angular.isDefined(onChatLoaded)&&"function"==typeof onChatLoaded&&onChatLoaded()}},800)},5e3)},root.destroy=function(){LiveChatWidget.call("destroy")},root}angular.module("cgConsole").factory("livechatSvc",["$timeout","$interval","livechatPriorityGroup","livechatHighValueGroup","chatBotGroup","commonSvc","consoleApiSvc",livechatSvc])}(),function(){"use strict";function malcareSvc(consoleApiSvc,$http,$q){var root={malcareSummary:{},malcareLogs:{},pageLimit:50};return root.setMalcareSummary=function(slug,summary){root.malcareSummary[slug]=summary},root.getMalcareSummaryData=function(slug){var result=!1,summary=root.malcareSummary[slug];return angular.isDefined(summary)&&(result=summary),result},root.setMalcareLogs=function(params,response,last_id){angular.isUndefined(root.malcareLogs[params.slug])&&(root.malcareLogs[params.slug]={}),angular.isUndefined(root.malcareLogs[params.slug][params.tag])&&(root.malcareLogs[params.slug][params.tag]={1:[]});var page=angular.isDefined(params.page)?params.page:1;angular.isDefined(last_id)&&(root.malcareLogs[params.slug][params.tag][page]=[]);var count=0;angular.forEach(response.logs,function(val,index){root.malcareLogs[params.slug][params.tag][page].push(val),count++,count===root.pageLimit&&(count=0,index<response.logs.length-1&&(page+=1,root.malcareLogs[params.slug][params.tag][page]=[]))})},root.getMalcareLogs=function(params){var key=params.slug,logs=root.malcareLogs[key],result=!1;return logs&&angular.isDefined(logs[params.tag])&&angular.isDefined(logs[params.tag][params.page])&&(result=logs[params.tag][params.page]),result},root.fetchMalcareSummary=function(serverId,appId,slug){var deferred=$q.defer(),requestId="fetch"+slug+"Logs_"+serverId,queryString=slug+"/summary?server_id="+serverId+"&app_id="+appId;return consoleApiSvc.callAPI("GET","/api/v1/app/malcare/"+queryString,null,requestId).then(function(response){root.setMalcareSummary(slug,response),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.fetchMalcareLogs=function(params,last_id){var deferred=$q.defer(),requestId=params.tag+"fetchLogs_"+params.serverId,queryString=params.slug+"?server_id="+params.serverId+"&app_id="+params.appId,logStatus=(params.tag,["allowed","blocked","succeeded","failed"]);return-1!==logStatus.indexOf(params.tag)&&(queryString=queryString+"&status="+params.tag),angular.isDefined(last_id)&&""!==last_id&&(queryString=queryString+"&last_id="+last_id),consoleApiSvc.callAPI("GET","/api/v1/app/malcare/"+queryString,null,requestId).then(function(response){root.setMalcareLogs(params,response,last_id),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getGraphYAxisData=function(arrayList){var largeValue=root.arrayMax(arrayList),result={suggestedMax:300,stepSize:50},stepSize=Math.ceil(largeValue/10);return stepSize=10*Math.ceil(stepSize/10),largeValue>0&&(result.suggestedMax=largeValue>50?largeValue:50,result.stepSize=stepSize),result},root.arrayMax=function(arr){return arr.reduce(function(a,b){return a>b?a:b})},root}angular.module("cgConsole").factory("malcareSvc",["consoleApiSvc","$http","$q",malcareSvc])}(),function(){"use strict";function memberSvc(consoleApiSvc,$translatePartialLoader,toastrSvc,$q,$translate,$state,$filter,$injector){var membersFetched=!1,root={memberDetail:{},members:{},teamMemberNotification:!1,sectionMapping:{access_detail:{section:"server-access",state:"server_detail_access"},monitor:{section:"server-monitor",state:"server_detail_monitor"},services:{section:"server-service",state:"server_detail_services"},settings:{section:"server-setting",state:"server_detail_settings"},security:{section:"server-security",state:"server_detail_security"},scaling:{section:"server-scale",state:"server_detail_scaling"},backup:{section:"server-backup",state:"server_detail_backup"},smtp:{section:"server-addon",state:"server_detail_smtp"}}},deferred=$q.defer();return $translatePartialLoader.addPart("main"),$translate.refresh(),root.getMembersList=function(){return angular.isDefined(consoleApiSvc.user.userDetails.is_verified)&&!consoleApiSvc.user.userDetails.is_verified?(deferred.resolve(),deferred.promise):(membersFetched||(consoleApiSvc.callAPI("GET","api/v1/member").then(function(data){for(var i in data.members)root.members[i]=root.initMember(data.members[i]);root.addMembersToServerList(),root.getMembersToApp(),deferred.resolve(root.members)}),membersFetched=!0),deferred.promise)},root.isSectionPermitted=function(serverId,section){if(serverId=parseInt(serverId)||null,"secondary"!==consoleApiSvc.user.userDetails.type)return!0;if(consoleApiSvc.user.userDetails.permissions.is_full)return!0;if(serverId){if(consoleApiSvc.user.userDetails.permissions.servers[parseInt(serverId)].is_full)return!0;if(-1!==consoleApiSvc.user.userDetails.permissions.servers[serverId].sections.indexOf(section))return!0}else if(-1!==consoleApiSvc.user.userDetails.permissions.sections.indexOf(section))return!0;return!1},root.getServerURLForMember=function(intendedURL,params,stateName,isRestricted){var sections=intendedURL.split("/");if(angular.isDefined(sections[3])){var sectionParts=sections[3].split("?");angular.isDefined(sectionParts[0])&&(sections[3]=sectionParts[0])}if("server"==sections[1]&&4==sections.length&&"apps"!==sections[3]){if(angular.isDefined(root.sectionMapping[sections[3]])&&angular.isDefined(root.sectionMapping[sections[3]].section)&&!root.isSectionPermitted(params.id,root.sectionMapping[sections[3]].section)){var url="server";return""===consoleApiSvc.user.userDetails.permissions.servers[params.id].sections[0]&&0===consoleApiSvc.user.userDetails.permissions.servers[params.id].apps.length&&angular.forEach(root.sectionMapping,function(val){stateName==val.state&&-1!==consoleApiSvc.user.userDetails.permissions.servers[params.id].sections.indexOf(val.section)&&(url=val.state)}),url}}else{if("projects"==sections[1]&&!root.isSectionPermitted(null,"account-project"))return isRestricted&&toastrSvc.error("You don't have access to Projects."),"server";if("addons"==sections[1]&&!root.isSectionPermitted(null,"account-addon"))return isRestricted&&toastrSvc.error("You don't have access to Addons."),"server";if("team"==sections[1]&&root.isMemberLoggedIn())return"server";if("account"==sections[1]&&root.isMemberLoggedIn()){if("detail"==sections[2]||"referral"==sections[2])return"account_member_profile";if("call_schedule"!=sections[2]&&!root.isUserLevelAllowed("billing")&&("detail"!=sections[2]||"referral"!=sections[2]))return"account_member_profile"}}return stateName},root.checkPagePermission=function(id){var pages=[],sections=consoleApiSvc.user.userDetails.permissions.servers[id].sections;return""==sections[0]?void $state.go("server_detail_access",{id:id}):(angular.forEach(root.sectionMapping,function(val){-1!==sections.indexOf(val.section)&&pages.push(val.state)}),void $state.go(pages[0],{id:id}))},root.addMembersToServerList=function(){angular.forEach(consoleApiSvc.server.serverData,function(server){$.isEmptyObject(root.members)?$.isEmptyObject(root.members)&&delete server.members:(server.members=[],angular.forEach(root.members,function(member){$.isEmptyObject(member.permissions)||(member.permissions.is_full?server.members.push({id:member.id,name:member.name,email:member.email,image:member.image}):!member.permissions.is_full&&angular.isDefined(member.permissions.servers)&&angular.isDefined(member.permissions.servers[server.id])&&server.members.push({id:member.id,name:member.name,email:member.email,image:member.image}))}))})},root.getMembersToApp=function(){angular.forEach(consoleApiSvc.server.serverData,function(server){angular.isDefined(server.apps)&&angular.forEach(server.apps,function(app){$.isEmptyObject(root.members)?$.isEmptyObject(root.members)&&delete app.members:(app.members=[],angular.forEach(root.members,function(member){$.isEmptyObject(member.permissions)||(member.permissions.is_full||member.permissions.servers[server.id]&&member.permissions.servers[server.id].is_full||member.permissions.servers[server.id]&&member.permissions.servers[server.id].apps&&-1!==member.permissions.servers[server.id].apps.indexOf(parseInt(app.id)))&&app.members.push({id:member.id,name:member.name,email:member.email,image:member.image})}))})})},root.isUserLevelAllowed=function(section){return"secondary"!==consoleApiSvc.user.userDetails.type?!0:!(!consoleApiSvc.user.userDetails||!consoleApiSvc.user.userDetails.permissions||-1===consoleApiSvc.user.userDetails.permissions.sections.indexOf(section))},root.getMemberServers=function(memberId){var servers=[];for(var i in consoleApiSvc.server.serverData)(root.members[memberId].permissions.is_full||root.members[memberId].permissions.servers&&-1!==Object.keys(root.members[memberId].permissions.servers).indexOf(i))&&servers.push({id:consoleApiSvc.server.serverData[i].id,label:consoleApiSvc.server.serverData[i].label,created_at:consoleApiSvc.server.serverData[i].created_at,provider:consoleApiSvc.server.serverData[i].cloud});return servers},root.getMemberApps=function(memberId){var apps=[];return angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(app){(root.members[memberId].permissions.is_full||root.members[memberId].permissions.servers[server.id]&&root.members[memberId].permissions.servers[server.id].is_full||root.members[memberId].permissions.servers[server.id]&&root.members[memberId].permissions.servers[server.id].apps&&-1!==root.members[memberId].permissions.servers[server.id].apps.indexOf(parseInt(app.id)))&&apps.push(app)})}),apps},root.getMemberProjects=function(memberId){var projects=[],apps=root.getMemberApps(memberId);for(var i in apps)apps[i].project_id&&-1===projects.indexOf(apps[i].project_id)&&projects.push(apps[i].project_id);return projects},root.isMemberLoggedIn=function(){return"secondary"===consoleApiSvc.user.userDetails.type},root.initMember=function(member){if(!$.isEmptyObject(member.permissions)){member.permissions.servers=member.permissions.servers||{},member.permissions.sections=member.permissions.sections||[],-1===member.permissions.sections.indexOf("console")&&(member.permissions.is_full=!1);for(var j in member.permissions.servers)angular.isUndefined(consoleApiSvc.server.serverData[j])?delete member.permissions.servers[j]:member.permissions.servers[j].apps=member.permissions.servers[j].apps||[]}return member},root.switchMember=function(mapping_id){if(mapping_id!=consoleApiSvc.user.userDetails.mapping_id){var commonSvc=$injector.get("commonSvc"),memberSwitchedFrom=$filter("filter")(consoleApiSvc.user.userDetails.memberAccounts,{id:consoleApiSvc.user.userDetails.mapping_id})[0].email,memberSwitchedTo=$filter("filter")(consoleApiSvc.user.userDetails.memberAccounts,{id:mapping_id})[0].email;commonSvc.createCookie("member_switched_from",memberSwitchedFrom,.0625),commonSvc.createCookie("member_switched_to",memberSwitchedTo,.0625),consoleApiSvc.callAPI("GET","api/v1/account/member/switchAccount/"+mapping_id).then(function(response){response.status?window.location.reload():$translate(response.error).then(function(translation){toastrSvc.error(translation)})})}},root.isUserHaveTag=function(tagName){var regex,haveTag=!1;return consoleApiSvc.user&&consoleApiSvc.user.userDetails&&angular.isDefined(consoleApiSvc.user.userDetails.user_tags_name)&&angular.isArray(consoleApiSvc.user.userDetails.user_tags_name)&&consoleApiSvc.user.userDetails.user_tags_name.length>0&&(tagName=tagName.toLowerCase(),angular.forEach(consoleApiSvc.user.userDetails.user_tags_name,function(v){regex=new RegExp(tagName,"ig"),regex.test(v)&&(haveTag=!0)})),haveTag},root.isAffiliateProfileRequired=function(){var profileRequired=!1;return"trial"!==consoleApiSvc.user.userDetails.customer_type||root.isMemberLoggedIn()||root.isUserHaveTag("affiliate")&&(profileRequired=!0,consoleApiSvc.users_ui_data&&angular.isDefined(consoleApiSvc.users_ui_data)&&angular.isArray(consoleApiSvc.users_ui_data)&&angular.forEach(consoleApiSvc.users_ui_data,function(v){"affiliateProfile"===v.key&&(profileRequired=!1)})),profileRequired},root.searchAndGetUserTag=function(searchTag){var regex,tagName=!1;return consoleApiSvc.user&&consoleApiSvc.user.userDetails&&angular.isDefined(consoleApiSvc.user.userDetails.user_tags_name)&&angular.isArray(consoleApiSvc.user.userDetails.user_tags_name)&&consoleApiSvc.user.userDetails.user_tags_name.length>0&&(searchTag=searchTag.toLowerCase(),angular.forEach(consoleApiSvc.user.userDetails.user_tags_name,function(v){regex=new RegExp(searchTag,"ig"),regex.test(v)&&(tagName=v)})),tagName},root.getSecondaryUserDetails=function(){return root.memberDetail},root.fetchSecondaryUserDetails=function(){var deferred=$q.defer(),requestId="getSecondaryUserDetail";return consoleApiSvc.callAPI("GET","api/v1/account/member/getMemberDetail",null,requestId).then(function(response){root.memberDetail=response,deferred.resolve()},function(response){deferred.reject(response)}),deferred.promise},root.activateTFA=function(tfa){var data,deferred=$q.defer(),requestId="activateTFA";return data={activation_code:tfa.activation_code},consoleApiSvc.callAPI("POST","api/v1/account/member/activate_tfa",data,requestId).then(function(response){root.memberDetail.tfa={status:1},root.memberDetail.profile={backupCodeCount:-1},deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.generateBackupCode=function(){var deferred=$q.defer(),requestId="generateBackupCode";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.generateBackupCode,null,requestId).then(function(response){root.memberDetail.profile={backupCodeCount:response.length},deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.deactivateTFA=function(){var deferred=$q.defer(),requestId="deactivateTFA";return consoleApiSvc.callAPI("POST","api/v1/account/member/deactivate_tfa",null,requestId).then(function(response){root.memberDetail.tfa=response,root.memberDetail.profile={backupCodeCount:-1},deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.noServerAccess=function(serverId){var serverAccess=!1;if(angular.isDefined(consoleApiSvc.user.userDetails.permissions)){var userPermissions=consoleApiSvc.user.userDetails.permissions;if(userPermissions.is_full)serverAccess=!0;else{var server=userPermissions.servers[serverId];angular.forEach(server.sections,function(section){section.match(consoleApiSvc.getRegex("serverAccess"))?serverAccess=!0:server.is_full&&(serverAccess=!0)})}}return serverAccess},root.newLoginAlert=function(data){var deferred=$q.defer(),requestId="newLoginAlert";return consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.newLoginAlert,data,requestId).then(function(response){root.memberDetail.newLoginAlert=response.preference,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root}angular.module("cgConsole").factory("memberSvc",["consoleApiSvc","$translatePartialLoader","toastrSvc","$q","$translate","$state","$filter","$injector",memberSvc])}(),function(){"use strict";function monitorSvc(consoleApiSvc,$q,$rootScope){var root={params:{},description:"",type:"%",chartType:"",isFetched:!1};return root.getMonitorParam=function(){var deferred=$q.defer();return root.isFetched?deferred.resolve(root.params):consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.server_monitor_params,null,"fetchingMonitorParams").then(function(data){deferred.resolve(),root.params=data,root.isFetched=!0},function(data){deferred.reject(data)}),deferred.promise},root.setGraphParameters=function(description,type,chartType){root.description=description,root.type=type,root.chartType=chartType},root.getMonitorGraphOption=function(){return{bezierCurve:!1,tooltips:{mode:"index",intersect:!1,custom:function(tooltip){tooltip&&(tooltip.displayColors=!1)},callbacks:{label:function(tooltipItem,data){var multiline=[];return multiline="server"==root.chartType?[tooltipItem.xLabel,root.description+": "+tooltipItem.yLabel+root.type]:[tooltipItem.xLabel,"Disk Usage: "+tooltipItem.yLabel+" MB"]},title:function(tooltipItem,data){return""}}},hover:{mode:"nearest",intersect:!0},scales:{yAxes:[{ticks:{fontSize:10,fontStyle:"bold",fontColor:"black",position:"outside"}}],xAxes:[{ticks:{autoSkip:!0,fontSize:10,fontStyle:"bold",fontColor:"black",position:"outside",maxRotation:0,minRotation:0},type:"time",time:{parser:"DD/MM/YYYY HH:mm",unit:"minute",displayFormats:{minute:"HH:mm",hour:"DD/YY",day:"ddd DD/YY",week:"ll",month:"MMM YYYY"}},position:"bottom"}]},elements:{line:{fill:!1,backgroundColor:"rgba(0,0,0,0)",borderColor:"#337AB7"},point:{radius:0}}}},root.getMonitorGraphYAxisLabels=function(id){var graphYAxis={Option:{0:"minute",1:"minute",2:"hour",3:"hour",4:"day",5:"week",51:"month"}};return graphYAxis.Option[id]},root.getMonitorGraphTooltipUnit=function(id){var graphUnit={Option:{6:"%",31:"%",60:"%",85:"%",108:"%",125:"%",8:"GB",7:"GB",61:"GB",62:"GB",46:"%",44:"%",22:"%",73:"%",98:"%",114:"%",131:"%",42:"%",20:"%",71:"%",96:"%",112:"%",129:"%",41:"%",19:"%",70:"%",95:"%",111:"%",128:"%",32:" GB",43:" GB",21:" GB",72:" GB",97:" GB",113:" GB",130:" GB",40:" Mbps",18:" Mbps",69:" Mbps",94:" Mbps",39:" Mbps",17:" Mbps",68:" Mbps",93:" Mbps",38:" MB",16:" MB",67:" MB",92:" MB",110:" MB",127:" MB"}};return void 0==graphUnit.Option[id]?"":graphUnit.Option[id]},root}angular.module("cgConsole").factory("monitorSvc",["consoleApiSvc","$q","$rootScope",monitorSvc])}(),function(){"use strict";function ocLazyloadSvc($q,$ocLazyLoad,$rootScope,$injector,$timeout){var root={};return root.setModuleMapping=function(){root.moduleMapping={server:["dist/js/vendor/app_vendors.min.17cdb9794ad7ed497d6ef40cef8e22d0.js","dist/js/app/server.min.fc319c2a87ab90227c1ce22bba30f1e4.js","dist/assets/css/styles-app.min.2929b0ed1319cc439936d59cdb590684.css"],cluster:["dist/js/app/cluster.min.42b038f1f8caf24ad8efb83d64529833.js"],team:["dist/js/app/team.min.7e6b4e309c917b36484e8cc30a04eb70.js"],project:["dist/js/app/project.min.6f78ab5f175995d2f20c77fb9177c3eb.js"],account:["dist/js/app/account.min.b54ac0e214a03279f5e93a87ca5fa231.js","dist/assets/css/account.min.css"],monitoring:["dist/js/app/monitoring.min.js"],malcare:["dist/js/app/malcare.min.js"]}},root.isModuleLoaded=function(module){root.setModuleMapping();var deferred=$q.defer(),clusterSvc=$injector.get("clusterSvc");return"server"===module&&-1!==["live","staging"].indexOf(window.APP_ENV)?$ocLazyLoad.load({name:"member",files:root.moduleMapping[module]}).then(function(){deferred.resolve("server-live")}):-1!==["team","project","account","monitoring","malcare"].indexOf(module)&&-1!==["live","staging"].indexOf(window.APP_ENV)?$ocLazyLoad.load({name:"member",files:root.moduleMapping[module]}).then(function(){deferred.resolve("team-project-account-live")}):"cluster"===module&&-1!==["live","staging"].indexOf(window.APP_ENV)&&clusterSvc.isClusterCreateEnabled()?$ocLazyLoad.load({name:"member",files:root.moduleMapping[module]}).then(function(){deferred.resolve("cluster-live")}):deferred.resolve("dev"),deferred.promise},root.addCustomFonts=function(){$timeout(function(){var cssFile="../assets/css/custom-fonts.css";$(document).ready(function(){$.ajax({url:cssFile,beforeSend:function(xhr){xhr.overrideMimeType("application/octet-stream")}}).done(function(data){$("<link />").appendTo($("head")).attr({type:"text/css",rel:"stylesheet"}).attr("href",cssFile)})})},5e3)},root}angular.module("cgConsole").factory("ocLazyloadSvc",["$q","$ocLazyLoad","$rootScope","$injector","$timeout",ocLazyloadSvc])}(),function(){"use strict";function operationSvc($state,$injector,$rootScope){var root={largeCases:["add_server","starting_server","stopping_server","restarting_server","clone_server","add_app","clone_app","upgrade_instance","op_scale_resources","backup_for_clone","bot_alert_fix","cl_add_cluster","cl_start_cluster","cl_stop_cluster","cl_backups_on_demand","add_staging_app","add_staging_server","clone_data_for_source","migrate_server","server_revert_migration","complete_migrate_server"]};return root.operations={add_server:{success_message:" has been created.",sections:[],operation_message:{heading:"Adding Server",description:"Your high-speed application will be ready in approx |=|DURATION|=|"},steps:{1:"Server Configuration",2:"Optimizing application performance and configuration",3:"Done"}},upgrade_instance:{success_message:" has been upgraded.",sections:["serverScalingController"],operation_message:{heading:"Scaling Server",description:"Your scaled server will be ready in approx |=|DURATION|=|"},steps:{1:"Scaling server",2:"Done"}},upgrade_volume:{success_message:"Volume size has been up-scaled.",sections:["serverScalingController"],operation_message:{heading:"Scaling Volume Size",description:"Your scaled server will be ready in approx |=|DURATION|=|"},steps:{1:"Taking Backups",2:"Scaling Drive",3:"Done"}},attach_block_storage:{success_message:"Block Storage has been attached.",sections:["serverScalingController"],operation_message:{heading:"Attaching Block Storage",description:"Your server will be ready in approx |=|DURATION|=|"},steps:{1:"Attaching Storage",2:"Done"}},resize_block_storage:{success_message:"Block Storage has been up-scaled.",sections:["serverScalingController"],operation_message:{heading:"Scaling Block Storage",description:"Your scaled server will be ready in approx |=|DURATION|=|"},steps:{1:"Taking Backups",2:"Scaling Storage",3:"Done"}},op_scale_resources:{success_message:"Your Server has been scaled successfully.",sections:["serverScalingController"],operation_message:{heading:"Scaling Server",description:"Your scaled server will be ready in approx |=|DURATION|=|"},steps:{1:"Taking Backups",2:"Scaling Drive",3:"Done"}},remove_server:{success_message:" has been deleted.",sections:[],operation_message:{heading:"Removing Server",description:"Deleting your server. It will take approx |=|DURATION|=|"},steps:{1:"Deleting",2:"Done"}},starting_server:{success_message:"Server has been started.",sections:[],operation_message:{heading:"Starting Server",description:"Starting your server. It will take approx |=|DURATION|=|"},steps:{1:"Starting",2:"Done"}},stopping_server:{success_message:" has been stopped.",sections:[],operation_message:{heading:"Stopping Server",description:"Stopping your server. It will take approx |=|DURATION|=|"},steps:{1:"Stopping",2:"Done"}},restarting_server:{success_message:" has been restarted.",sections:[],operation_message:{heading:"Restarting Server",description:"Your Server is restarting. It will take approx |=|DURATION|=|"},steps:{1:"Restarting",2:"Done"}},restore_server:{success_message:"Server has been restored.",sections:[],operation_message:{heading:"Restoring Server",description:"Restore in progress, this may take few mins"},steps:{1:"Restoring Server",2:"Done"}},backup_server:{success_message:"Backup completed.",sections:["backupController"],operation_message:{heading:"Taking Backup",description:"Backup in progress. Please wait."},steps:{1:"Backing up your server",2:"Done"}},clone_server:{success_message:" has been cloned.",sections:[],operation_message:{heading:"Cloning Server",description:"Your Cloned server will be ready in approx |=|DURATION|=|"},steps:{1:"Server Configuration",2:"Optimizing application performance and configuration",3:"Copying applications",4:"Cloned"}},deleting_server:{success_message:"",sections:[],operation_message:{heading:"Deleting Server",description:""}},updating_server:{success_message:"",sections:[],operation_message:{heading:"Updating Server",description:""}},update_package:{success_message:"Package updated.",sections:["serverSettingController"],operation_message:{heading:"Updating Package",description:"Please wait while Server Package is updated."},steps:{1:"Updating server package",2:"Done"}},disaster_recovery:{success_message:"Server Disaster Recovery Process completed successfully.",sections:[],operation_message:{heading:"Disaster Recovery",description:"Server Disaster Recovery Process will be complete in approx |=|DURATION|=|"},steps:{1:"Server Configuration",2:"Optimizing application performance and configuration",3:"Copying applications",4:"Recovery Complete"}},add_app:{success_message:" has been installed.",sections:[],operation_message:{heading:"Adding application",description:"Installing new Application. It will take approx |=|DURATION|=|"},steps:{1:"Installing Application",2:"Optimizing application configuration for blazing speed",3:"Done"}},remove_app:{success_message:" has been uninstalled.",sections:[],operation_message:{heading:"Removing application",description:"Deleting Application. It will take approx |=|DURATION|=|"},steps:{1:"Deleting Application",2:"Done"}},restore_app:{success_message:" has been restored.",sections:["restoreController"],operation_message:{heading:"Restoring application",description:"Restore Application in progress, this may take few minutes..."},steps:{1:"Restoring Application",2:"Done"}},rollback_restore:{success_message:" has been roll-backed.",sections:["restoreController"],operation_message:{heading:"Rolling-back application",description:"Your Application rollback is under process …"},steps:{1:"Application Rollback",2:"Done"}},app_level_backup:{success_message:" backup completed.",sections:["restoreController"],operation_message:{heading:"Application Backup",description:"Application backup in progress. This may take a few minutes …"},steps:{1:"Application Backup",2:"Done"}},delete_backup:{success_message:"Backup has been deleted.",sections:["restoreController"],operation_message:{heading:"Deleting Application backup",description:"Deleting Application backup"},steps:{1:"Deleting Application Temporary Data",2:"Done"}},update_cname:{success_message:"Application domain has been updated.",sections:["domainController"],operation_message:{heading:"Updating application domain name",description:"The primary domain of your Application is being updated. This may take a few minutes."},steps:{1:"Updating Primary Domain",2:"Done"}},clone_repo:{success_message:"Repository cloned.",sections:["gitController"],operation_message:{heading:"Cloning repository",description:"Cloning from Git Repo is in progress. This may take a while."},steps:{1:"Cloning from Git Repo",2:"Done"}},clone_app:{success_message:function(data){return"Operation completed"==data.message?"Application has been cloned.":data.message},sections:[],operation_message:{heading:"Cloning application",description:"Application Cloning in progress, this may take a while"},steps:{1:"Adding new App",2:"Copying Data",3:"Done"}},update_repo:{success_message:"Repository has been updated.",sections:["gitController"],operation_message:{heading:"Updating Git repository",description:"Deploying updates in progress, this may take a while"},steps:{1:"Deploying updates from Repo",2:"Done"}},delete_repo:{success_message:"Git integration removed.",sections:["gitController"],operation_message:{heading:"Removing Git integration",description:"Removing server-level Repo Configuration in progress, this may take a while"},steps:{1:"Removing server-level Repo Configuration",2:"Done"}},backup_for_clone:{success_message:" Backup completed.",sections:[],operation_message:{heading:"Backing up server for cloning",description:"Backup in progress. Please wait."},steps:{1:"Backing up your data",2:"Transferring  data to destination server",3:"Done"}},update_app:{success_message:"",sections:[],operation_message:{heading:"Updating application",description:""}},update_app_access:{success_message:"Your Application access has been updated.",sections:["appDetailSettingController"],operation_message:{heading:"Updating application access",description:"Application access is being updated. This may take a few minutes."},steps:{1:"Updating application access",2:"Done"}},install_letsencrypt:{success_message:"Let's Encrypt Certificate Installed successfully",sections:["sslController"],operation_message:{heading:"Installing Let's Encrypt Certificate",description:"Please wait while Let's Encrypt Certificate installs..."
},steps:{1:"Installing Let's Encrypt Certificate",2:"Done"}},update_letsencrypt:{success_message:"Let's Encrypt Certificate updated successfully",sections:["sslController"],operation_message:{heading:"Updating Let's Encrypt Certificate",description:"Please wait while Let's Encrypt Certificate is being updated..."},steps:{1:"Updating Let's Encrypt Certificate",2:"Done"}},revoke_letsencrypt:{success_message:"Let’s Encrypt Certificate revoked.",sections:["sslController"],operation_message:{heading:"Revoking Let's Encrypt Certificate",description:"Please wait while Let’s Encrypt Certificate is revoked..."},steps:{1:"Revoking Let's Encrypt Certificate",2:"Done"}},bot_alert_fix:{success_message:"Bot alert successfully fixed.",sections:[],operation_message:{heading:"Fixing Alert",description:"Fixing Bot Alert, this may take a while"},steps:{1:"Fixing",2:"Done"}},cl_add_cluster:{success_message:"Cluster has been created successfully.",sections:[],operation_message:{heading:"Adding your super-fast cluster...",description:"Your high-speed application will be ready in approx |=|DURATION|=|"},steps:{1:"Cluster Configuration",2:"Optimizing application performance and configuration",3:"Done"}},cl_start_cluster:{success_message:"Your cluster has been started.",sections:[],operation_message:{heading:"Starting Cluster",description:"Starting your cluster. It will take approx |=|DURATION|=|"},steps:{1:"Starting",2:"Done"}},cl_stop_cluster:{success_message:"Your cluster has been stopped.",sections:[],operation_message:{heading:"Stopping Cluster",description:"Stopping your cluster. It will take approx |=|DURATION|=|"},steps:{1:"Stopping",2:"Done"}},cl_restart_service:{success_message:"Service has been updated successfully.",sections:["clusterServicesController"],operation_message:{heading:"Processing your service ...",description:"Processing your service ..."},steps:{1:"Update Service",2:"Done"}},cl_backups_on_demand:{success_message:"Backup settings have been successfully saved.",sections:["clusterBackupController"],operation_message:{heading:"Saving backup settings ...",description:"Saving backup settings ..."},steps:{1:"Saving backup settings",2:"Done"}},cl_app_update_cron_list:{success_message:" Crons have been updated.",sections:["clusterAppCronjobController"],operation_message:{heading:"Updating Crons... ",description:"Updating Crons... "},steps:{1:"Updating Crons... ",2:"Done"}},cl_addon:{success_message:"SMTP settings have been updated on your cluster.",sections:["clusterSmtpController"],operation_message:{heading:"Configuring SMTP service on your cluster.",description:"Configuring SMTP service on your cluster, this may take a while"},steps:{1:"Configuring SMTP service",2:"Done"}},cl_addon_remove:{success_message:"SMTP service has been disabled on your cluster.",sections:["clusterSmtpController"],operation_message:{heading:"Disabling SMTP service on your Cluster …",description:"Disabling SMTP service on your Cluster, this may take a while"},steps:{1:"Disabling SMTP service",2:"Done"}},cl_app_modify_webroot:{success_message:"Webroot has been updated.",sections:["clusterAppSettingsController"],operation_message:{heading:"Updating Webroot ...",description:"Updating Webroot, this may take a while"},steps:{1:"Updating Webroot ...",2:"Done"}},cl_update_fpm_settings:{success_message:"Application PHP-FM settings updated.",sections:["clusterAppSettingsController"],operation_message:{heading:"Updating Application PHP FPM settings ...",description:"Updating Application PHP FPM settings ..."},steps:{1:"Updating Application PHP FPM settings ...",2:"Done"}},cl_backups:{success_message:"Backup has been successfully created.",sections:["clusterBackupController"],operation_message:{heading:"On Demand Backup in progress ...",description:"On Demand Backup in progress. ..."},steps:{1:"Saving backup",2:"Done"}},cl_snapshot:{success_message:"Snapshot has been backup successfully.",sections:["clusterBackupController"],operation_message:{heading:"Saving your snapshot...",description:"Saving your snapshot..."},steps:{1:"Saving your snapshot...",2:"Done"}},cl_settings:{success_message:"Cluster settings have been successfully updated.",sections:["clusterSettingController"],operation_message:{heading:"Updating cluster settings ...",description:"Updating cluster settings ..."},steps:{1:"Updating cluster settings ...",2:"Done"}},cl_git_keygen:{success_message:"SSH Key has been successfully generated.",sections:["clusterAppDeploymentController"],operation_message:{heading:"Generating your keys",description:"Generating your keys..."},steps:{1:"Generating keys",2:"Done"}},cl_update_repo:{success_message:"Changes have been deployed.",sections:["clusterAppDeploymentController"],operation_message:{heading:"Deploying updates.",description:"Deploying updates in progress, this may take a while"},steps:{1:"Deploying updates from Repo",2:"Done"}},cl_clone_repo:{success_message:"Application has been cloned.",sections:["clusterAppDeploymentController"],operation_message:{heading:"Cloning application",description:"Application Cloning in progress, this may take a while"},steps:{1:"Adding new App",2:"Copying Data",3:"Done"}},cl_delete_repo:{success_message:"Repository has been deleted.",sections:["clusterAppDeploymentController"],operation_message:{heading:"Deleting Git repository",description:"Removing server-level Repo Configuration in progress, this may take a while"},steps:{1:"Removing cluster-level Repo Configuration",2:"Done"}},cl_update_cname:{success_message:"Your Application domain has been updated.",sections:["clusterAppDomainController"],operation_message:{heading:"Updating application domain name",description:"The primary domain of your Application is being updated. This may take a few minutes."},steps:{1:"Updating Primary Domain",2:"Done"}},cl_ssl_create_csr:{success_message:"CSR has been created.",sections:["clusterAppSslController"],operation_message:{heading:"Creating your Certificate Signing request...",description:"Creating your Certificate Signing request..."},steps:{1:"Creating Certificate Signing request",2:"Done"}},cl_get_branch:{success_message:"Git branches fetched successfully.",sections:["clusterAppDeploymentController"],operation_message:{heading:"Fetching Branch list ...",description:"Fetching Branch list ..."},steps:{1:"Fetching Branch list ...",2:"Done"}},cl_update_aliases:{success_message:"Additional domains have been successfully updated.",sections:["clusterAppDomainController"],operation_message:{heading:"Updating Additional Domain(s)...",description:"Updating Additional Domain(s)..."},steps:{1:"Updating Additional domains ...",2:"Done"}},cl_ssl_install_csr:{success_message:"CSR has been installed successfully.",sections:["clusterAppSslController"],operation_message:{heading:"Installing your Certificate Signing request (CSR)...",description:"Installing your Certificate Signing request (CSR)..."},steps:{1:"Installing Certificate Signing request",2:"Done"}},cl_update_db_password:{success_message:"Database password has been updated successfully.",sections:["clusterAppAccessController"],operation_message:{heading:"Updating MySQL password...",description:"Updating MySQL password..."},steps:{1:"Updating MySQL password...",2:"Done"}},cl_initiate_ssl_create_csr:{success_message:"CSR has been created successfully.",sections:["clusterAppSslController"],operation_message:{heading:"Creating your Certificate Signing request.",description:"Creating your Certificate Signing request."},steps:{1:"Creating Certificate Signing request",2:"Done"}},cl_update_sftp:{success_message:"App Credentials have been updated successfully ...",sections:["clusterAppAccessController"],operation_message:{heading:"Updating your app credentials ...",description:"Updating your app credentials ..."},steps:{1:"Updating your app credentials ...",2:"Done"}},cl_update_app_varnish:{success_message:"Settings has been updated ...",sections:["clusterAppSettingsController"],operation_message:{heading:"Updating your varnish settings ...",description:"Updating your varnish settings ..."},steps:{1:"Updating your varnish settings ...",2:"Done"}},cl_whitelist_ip:{success_message:"Whitelisted IP addresses have been saved .",sections:["clusterWhitelistController"],operation_message:{heading:"Saving White-Listed IP Addresses",description:"Saving White-Listed IP Addresses"},steps:{1:"Saving White-Listed IP Addresses",2:"Done"}},cl_package_update:{success_message:"Package has been updated successfully.",sections:["clusterSettingController"],operation_message:{heading:"Updating Package",description:"Cluster Package update is in progress. This may take a while."},steps:{1:"Updating cluster package",2:"Done"}},add_staging_app:{success_message:"Staging Application has been created.",sections:[],operation_message:{heading:"Creating staging application",description:"Staging Application Creation is in progress ..."},steps:{1:"Adding new Staging App",2:"Copying Data",3:"Done"}},add_staging_server:{success_message:"Staging Application has been created.",sections:[],operation_message:{heading:"Creating staging application",description:"Staging Application Creation is in progress ..."},steps:{1:"Adding new Staging App",2:"Copying Data",3:"Done"}},sync_app:{success_message:"Your Application has been deployed. ",sections:["stagingAppController","appStagingEnvController"],operation_message:{heading:"Deploying staging application",description:"Copying data in progress. This might take a while ..."},steps:{1:"Push/Pull Staging App",2:"Copying Data",3:"Done"}},staging_app_htaccess:{success_message:"Your Password Protection status has been updated. ",sections:["stagingAccessDetailController"],operation_message:{heading:"Changing Status",description:"Changing Password Protection Status"},steps:{1:"Update Status",2:"Done"}},staging_app_rollback:{success_message:" has been roll-backed.",sections:["appStagingEnvController"],operation_message:{heading:"Rolling-back application",description:"Your Application rollback is under process …"},steps:{1:"Application Rollback",2:"Done"}},delete_staging_app_backup:{success_message:"Backup has been deleted.",sections:["appStagingEnvController"],operation_message:{heading:"Deleting Application backup …",description:"Deleting Application backup …"},steps:{1:"Deleting Application Temporary Data",2:"Done"}},staging_sync_data:{success_message:"Synchronizing staging data has been completed.",sections:[],operation_message:{heading:"Copying data to Staging",description:"Copying Live application data to Staging application ..."},steps:{1:"Staging Application backup",2:"Done"}},clone_data_for_source:{success_message:"Data syncing has been completed.",sections:[],operation_message:{heading:"Copying data to destination server",description:"Copying Source application data to destination server ..."},steps:{1:"Source Application backup",2:"Done"}},app_from_address:{success_message:"From Address has been updated.",sections:[],operation_message:{heading:"",description:""},steps:{1:"",2:""}},staging_sync_create:{success_message:"Your Application has been deployed.",sections:["stagingAppController","appStagingEnvController"],operation_message:{heading:"Deploying staging application",description:"Copying data in progress. This might take a while ..."},steps:{1:"Staging Application deployment",2:"Done"}},app_cors_header:{success_message:"",sections:["appDetailSettingController"],operation_message:{heading:"",description:"Updating CORS Headers..."},steps:{1:"",2:""}},app_enforce_https:{success_message:"",sections:["appDetailSettingController"],operation_message:{heading:"Enforce to Apply Https",description:""},steps:{1:"",2:""}},migrate_server:{success_message:"",sections:["serverMigrationController"],operation_message:{heading:"Maintenance in progress",description:"Essential server maintenance in progress. This may take a few minutes ..."},steps:{1:"Backup Initiated",2:"Executing Upgrades",3:"Syncing"}},server_revert_migration:{success_message:"",sections:["serverMigrationController"],operation_message:{heading:"Maintenance in progress",description:"Debian migration process initiated. This might take a while ..."},steps:{1:"Restoring from Backup",2:"Syncing"}},complete_migrate_server:{success_message:"",sections:["serverMigrationController"],operation_message:{heading:"Maintenance in progress",description:"Debian migration process initiated. This might take a while ..."},steps:{1:"Syncing Packages",2:"Done"}},app_tables:{success_message:"",sections:["stagingAppController"],operation_message:{heading:"Fetching Application tables",description:"Fetching Application tables"},steps:{1:" Initiated",2:""}},save_geo_ip_setting:{success_message:"",sections:["appDetailSettingController"],operation_message:{heading:"Gea IP",description:"Updating your GEO IP"},steps:{1:"",2:""}},install_malcare_plugin:{success_message:"Bot Protection has been enabled successfully",sections:["malcareController"],operation_message:{heading:"Enabling Bot Protection",description:"Enabling Bot Protection..."},steps:{1:"",2:""}},delete_malcare_plugin:{success_message:"Bot Protection has been disabled successfully",sections:["malcareController"],operation_message:{heading:"Disabling Bot Protection",description:"Disabling Bot Protection..."},steps:{1:"",2:""}}},root.operationLess={controller:{sendShareGiftEmail:{message:"Sending Invite..."}},project:{create:{message:'Creating Project: "|=|TITLE|=|"'},update:{message:'Updating your Project: "|=|TITLE|=|"'},"delete":{message:'Deleting Project: "|=|TITLE|=|"'}},member:{membersList:{message:"Getting Member list ..."},team_member_servers:{message:"Getting Member list ..."},team_member_projects:{message:"Getting Member list ..."},team_member_apps:{message:"Getting Member list ..."},addMember:{message:'Adding Team Member "|=|TITLE|=|"...'},updateMember:{message:'Updating Team Member "|=|TITLE|=|"...'},deleteMember:{message:'Deleting Team Member "|=|TITLE|=|"...'}},server:{updateMasterUser:{message:"Updating Master Username ..."},updateMasterPassword:{message:"Updating Master Password ..."},openSSHTermiantal:{message:"Launching SSH Terminal in a new tab ..."},addKey:{message:"Adding SSH Key ..."},editKey:{message:"Updating SSH Key ..."},deleteKey:{message:"Deleting SSH Key ..."},getBackupFrequencies:{message:"Getting Backup details ..."},saveChanges:{message:"Saving Backup settings ..."},saveSnapshotChanges:{message:"Saving Snapshot Frequency ..."},takeBackup:{message:"Taking Backup of your Server ..."},removeBackup:{message:"Deleting Local backups. Please wait..."},getMonitorGraph:{message:"Loading Monitoring Graph. Please wait."},launchAppManager:{message:"Launching Application Manager window ..."},getAddonData:{message:"Getting SMTP Service details …"},unbindAddon:{message:"Disabling SMTP service on your Server …"},bindAddon:{message:"Configuring SMTP service on your Server …"},scaleServerSize:{message:"Scaling the size of your Server ..."},scaleServerDisks:{message:"Scaling Disk size of your Server ..."},scaleServerKyup:{message:"Scaling Server ..."},saveWhites:{message:"Saving White-Listed IP Addresses"},saveBlacks:{message:"Saving Block-Listed IP Addresses"},saveWhitesMysql:{message:"Saving White-Listed IP Addresses"},checkIsBlack:{message:"Checking whether IP is blacklisted ..."},getServerSecurityData:{message:"Loading security settings for your Server ..."},getServerSettings:{message:"Getting Server Settings ..."},updatePackage:{message:"Updating Package ..."},saveSettings:{message:"Saving Server Settings ..."},fetchMaintenanceWinSettings:{message:"Please Wait…"},updateMaintenanceWinSettings:{message:"Saving Your Preferences…"}},app:{appCreds:{message:"Getting App Credentials ..."},updateMysqlPassword:{message:"Updating MySQL password..."},launchDBManager:{message:"Launching Database Manager in a new tab ..."},createNewAppCreds:{message:"Creating New Application credentials ..."},updateACUser:{message:"Update App Credentials Username..."},updateACPassword:{message:"Update App Credentials Password..."},addKey:{message:"Adding SSH Key ..."},editKey:{message:"Updating SSH Key ..."},deleteKey:{message:"Deleting SSH Key ..."},addNewApplication:{message:'Adding your Application: "|=|TITLE|=|"...'},updateWebRoot:{message:"Updating Webroot ..."},updateSymLink:{message:"Updating Folder Name ..."},resetAppPermissions:{message:"Resetting Application Permissions ..."},changeAppVarnishStatus:{message:'Changing Application Varnish Status: "|=|TITLE|=|"...'},updateFPM:{message:"Updating PHP FPM Settings ..."},getVarnishSetting:{message:"Getting Varnish Settings ..."},postVarnishSetting:{message:"Updating Varnish Settings ..."},changeAppSshPerms:{message:"|=|TITLE|=| SSH access for your Application."},changeAppState:{message:"|=|TITLE|=| application access for your application..."},getSupervisorQueues:{message:"Getting Supervisord Settings ..."},postSupervisorSetting:{message:"Adding Supervisord Job ..."},showStatus:{message:"Getting Supervisord Jobs status ..."},deleteQueue:{message:"Deleting Supervisord |=|TITLE|=| ..."},restartQueue:{message:"Restarting Supervisord |=|TITLE|=| ..."},updateFromAddress:{message:"Updating the From Address ..."},addAdditionalDomain:{message:"Saving changes of your Additional Domain(s)..."},addCname:{message:"Adding Your Primary Domain name..."},deleteCname:{message:"Deleting Your Primary Domain name..."},getCronJobList:{message:"Getting Cron Jobs for your application. Please wait."},cronCreate:{message:"Adding Your Cron Job..."},cronUpdate:{message:"Updating Crons..."},cronDelete:{message:"Deleting Crons..."},createCsr:{message:"Creating your Certificate Signing request (CSR)..."},installCrt:{message:"Installing your Certificate Signing request (CSR)..."},installCustomCrt:{message:"Please wait while Custom Certificate installs..."},installLE:{message:"Installing your Let's Encrypt Free SSL..."},LEAutoRenew:{message:"Updating Let’s Encrypt Renewal Settings..."},revokeLE:{message:"Revoking your Let's Encrypt Free SSL..."},verifyDNS:{message:"Verifying DNS records ..."},restoreApp:{message:"Restore Application in progress, this might take few minutes..."},deleteBackup:{message:"Deleting Application Backup in progress, this may take few minutes..."},rollBackApp:{message:"RollBack Application in progress, this may take few minutes..."},getBackupDates:{message:"Getting Application Backup Dates..."},onDemandBackup:{message:"Application backup in progress. This may take a few minutes ..."},generateKeys:{message:"Generating SSH Key..."},fetchDetail:{message:"Fetching Git Details..."},showLogs:{message:"Getting Deployment Logs..."},syncBranches:{message:"Getting Git Branches..."},gitAuthenticate:{message:"Authenticating Git..."},cloneRepo:{message:"Cloning Repository..."},pullRepo:{message:"Deployment in Progress..."},deployRepo:{message:"Deployment in Progress..."},remove:{message:"Removing Repository..."},removeRepo:{message:"Removing Git integration..."},fetchCdn:{message:"Loading your CDN configuration"},createCdn:{message:"Configuring CDN for your Application"},deleteCdn:{message:"Removing CDN for your Application"},updateCdn:{message:"Configuring CDN for your Application"},purgeCdn:{message:"Purging old content from your CDN"},activateCdn:{message:"Activating CDN for your Application"},stagingApp:{message:"Staging Application in progress, this may take few minutes..."},changeAuthStatus:{message:'Changing your staging authentication Status: "|=|TITLE|=|"...'},updateStagingAuthCredentials:{message:"Updating Auth Credentials..."},stagingShowLogs:{message:"Getting Staging Logs..."},getBackup:{message:"Getting Staging Details ..."},getTableList:{message:"Please Wait Tables are loading.."},getMonitorGraph:{message:"Loading Monitoring Graph. Please wait."}},addons:{activate:{message:'Adding "|=|TITLE|=|" Addon...'},upgrade:{message:'Upgrading "|=|TITLE|=|" Addon...'},deactivate:{message:'Deactivating "|=|TITLE|=|" Addon...'}},alerts:{list:{message:"Hold On! Let me Load Notifications For You..."}},integration:{addIntegration:{message:'Hold On! Let me Add Your Channel "|=|TITLE|=|" Quickly...'},updateIntegration:{message:'Hold On! Let me Update Your Channel "|=|TITLE|=|" Quickly...'}},api:{generateApi:{message:"Generating API Secret..."}},account:{getAccountDetail:{message:"Fetching account details ..."},updateProfile:{message:"Updating profile details ..."},updatePassword:{message:"Updating account password ..."},newLoginAlert:{message:"Updating Login Notification Preferences ..."},activateTFA:{message:"Activating Two Factor Authentication ..."},deactivateTFA:{message:"Deactivating Two Factor Authentication ..."},generateBackupCode:{message:"Generating Backup Codes ..."},downloadBackupCode:{message:"Download Backup Code ..."},verifyBackupCode:{message:"verify BackupCode ..."},verifyAccountCancel:{message:"Please wait for a moment ..."},cancelAccount:{message:"Canceling your account ..."},reactivateAccount:{message:"Re-Activating your account ..."},getCreditCard:{message:"Fetching credit card details ..."},editCreditCard:{message:"Please wait for a moment ..."},updateAutoCharge:{message:"Updating Auto charge status ..."},getBilling:{message:"Fetching real-time billing details ..."},getInvoice:{message:"Fetching your invoices ..."},payInvoice:{message:"Please wait for a moment ..."},getFund:{message:"Fetching your fund details ..."},addFund:{message:"Please wait for a moment ..."},getReferralDetail:{message:"Fetching affiliate profile ..."},getAffiliateMetrics:{message:"Fetching affiliate metrics ..."},updateReferralProfile:{message:"Updating affiliate profile details ..."}},serverTransfer:{getStatus:{message:"Loading Transfer Server details..."},serverTransferRequest:{message:"Sending Transfer Server request..."},cancelServerTransfer:{message:"Cancelling Transfer Server request..."}},cluster:{appCreds:{message:"Getting App Credentials ..."},updateMysqlPassword:{message:"Updating MySQL password..."},launchDBManager:{message:"Launching Database Manager in a new tab ..."},createNewAppCreds:{message:"Creating New Application credentials ..."},updateACUser:{message:"Update App Credentials Username..."},updateACPassword:{message:"Update App Credentials Password..."},addKey:{message:"Adding SSH Key ..."},editKey:{message:"Updating SSH Key ..."},deleteKey:{message:"Deleting SSH Key ..."},getBackupFrequencies:{message:"Getting Backup Frequencies ..."},saveChanges:{message:"Saving Backup settings ..."},saveSnapshotChanges:{message:"Saving Snapshot Frequency ..."},takeBackup:{message:"Taking Backup of your Server ..."},removeBackup:{message:"Deleting Local backups. Please wait..."},getMonitorGraph:{message:"Loading Monitoring Graph. Please wait."},launchAppManager:{message:"Launching Application Manager window ..."},saveWhites:{message:"Saving White-Listed IP Addresses"},checkIsBlack:{message:"Checking IP Black List ..."},getClusterSecurityData:{message:"Loading security settings for your Server ..."},serviceStatus:{message:"Updating your service ..."},unbindClusterAddon:{message:"Disabling SMTP service on your Cluster …"},bindClusterAddon:{message:"Configuring SMTP service on your Cluster …"},saveSetting:{message:"Updating cluster settings …"}},monitoring:{traffic:{message:"Loading stats. Please wait..."},php:{message:"Loading stats. Please wait..."},cron:{message:"Loading stats. Please wait..."},serverUsage:{message:"Loading stats. Please wait..."},mysql:{message:"Loading stats. Please wait..."},accessLog:{message:"Loading stats. Please wait..."},errorLog:{message:"Loading stats. Please wait..."}}},root.excludeOperations=["disk_usage","app_cors_header","app_enforce_https"],root.noOperationLoader=["app_from_address","app_disk_usage","app_cors_header","app_enforce_https"],root.getOperationLessMessage=function(type,state,title){var message=root.operationLess[type][state].message;return title&&(message=message.replace("|=|TITLE|=|",title)),message},root.getSuccessMessage=function(operationType){return root.operations[operationType.type]?"function"==typeof root.operations[operationType.type].success_message?root.operations[operationType.type].success_message.call(operationType,operationType):root.operations[operationType.type].success_message:"This is a placeholder."},root.redirectToServerPage=function(server_id,operation_type,controller,isAllowed){var consoleApiSvc=$injector.get("consoleApiSvc"),platformPollingSvc=$injector.get("platformPollingSvc"),toastrSvc=($injector.get("stagingSvc"),$injector.get("toastrSvc")),stagingOperations=["sync_app","staging_sync_create","staging_app_htaccess","app_disk_usage","disk_usage","app_from_address","app_cors_header","app_enforce_https"];if("disaster_recovery"!==consoleApiSvc.current.name){var server=consoleApiSvc.server.serverData[server_id];return"disaster_recovery"===consoleApiSvc.current.name||""===server.operation_type||-1!==stagingOperations.indexOf(server.operation_type)||platformPollingSvc.operation.stateTracking?"running"!==server.status&&"disaster_recovery"!==consoleApiSvc.current.name?(toastrSvc.warning("The server is not in running state"),void $state.go("server")):void(-1==root.largeCases.indexOf(operation_type)||-1!==stagingOperations.indexOf(server.operation_type)||platformPollingSvc.operation.stateTracking||(toastrSvc.warning("There is an operation in progress on this Server"),$state.go("server"))):(toastrSvc.warning("There is an operation in progress on this Server"),void $state.go("server"))}},root.redirectToClusterPage=function(cluster_id,operation_type,controller,isAllowed){var consoleApiSvc=$injector.get("consoleApiSvc"),clusterSvc=$injector.get("clusterSvc"),toastrSvc=$injector.get("toastrSvc");if("disaster_recovery"!==consoleApiSvc.current.name){var cluster=clusterSvc.clusters.list[cluster_id];return"running"!==cluster.status&&"disaster_recovery"!==consoleApiSvc.current.name?(toastrSvc.warning("The cluster is not in running state"),void $state.go("clusters")):void(-1!=root.largeCases.indexOf(operation_type)&&(toastrSvc.warning("There is an operation in progress on this Cluster"),$state.go("clusters")))}},root.getOperationMessageHeading=function(operation){return angular.isDefined(root.operations[operation])?root.operations[operation].operation_message.heading:void 0},root.getOperationMessageDesc=function(operation,time){if(angular.isDefined(root.operations[operation])){var commonSvc=$injector.get("commonSvc");time=time&&void 0!==typeof time?time+" "+commonSvc.strPlural("minute",time):"in few minutes",time="0 minute"===time?"1 minute":time;var message=root.operations[operation].operation_message.description;return message=message.replace("|=|DURATION|=|","<small>"+time+"</small>")}},root.getOperationSteps=function(operation){return angular.isDefined(root.operations[operation])?root.operations[operation].steps:void 0},root.isOperationOnApp=function(operation_type,app_id,server_id){var consoleApiSvc=$injector.get("consoleApiSvc"),server=consoleApiSvc.server.serverData[server_id];return!(!angular.isDefined(server.operations)||parseInt(server.operations[0].app_id)!==parseInt(app_id))},root.excludeOperation=function(server){return angular.isDefined(server.operations)&&-1!==root.excludeOperations.indexOf(server.operations[0].type)?(delete server.operations,server):server},root.getNoLoaderOperation=function(operation){return-1===root.noOperationLoader.indexOf(operation)},root}angular.module("cgConsole").factory("operationSvc",["$state","$injector","$rootScope",operationSvc])}(),function(){"use strict";function paginationSvc(){var root={itemId:null};return root.setConfig=function(config){angular.isDefined(config.offset)&&null!=config.offset?config.currentPage=root.getPagefromOffset(config.offset,config.itemsPerPage):config.currentPage=0,root.itemsPerPage=config.itemsPerPage,root.items=config.items,root.currentPage=config.currentPage},root.getItemsCount=function(){return angular.isArray(root.items)?root.items.length:Object.keys(root.items).length},root.pageCount=function(){return Math.ceil(root.getItemsCount()/root.itemsPerPage)},root.getPagefromOffset=function(offset,itemsPerPage){var remainder=offset%itemsPerPage;return(offset-remainder)/itemsPerPage+(remainder>0?1:0)-1},root.setPage=function(page){root.currentPage=page},root.prevPageDisabled=function(){return 0===root.currentPage?"pagination-disabled":""},root.prevPage=function(){root.currentPage>0&&root.currentPage--},root.getFromNumber=function(){return root.currentPage*root.itemsPerPage+1},root.getToNumber=function(){return root.currentPage===root.pageCount()-1?root.getItemsCount():(root.currentPage+1)*root.itemsPerPage},root.nextPageDisabled=function(){return root.currentPage===root.pageCount()-1?"pagination-disabled":""},root.nextPage=function(){root.currentPage<root.pageCount()-1&&root.currentPage++},root.setItemId=function(itemId){root.itemId=itemId},root.getItemId=function(){return root.itemId},root}angular.module("cgConsole").factory("paginationSvc",[paginationSvc])}(),function(){"use strict";function parsingSvc(consoleApiSvc,$http,$q,appAnalyticsSvc){function checkMaterials(scope,materials,item,type,log_type,resource){var log=[];return angular.forEach(materials,function(material){var expression=new RegExp(scope.regex[log_type][resource+"_"+type].replace(type,material.replace(/[|&;$%@"<>()+,\\]/g,"")),"gim");expression=expression.test(item),expression&&(log=item)}),log}var root={regex:{access:{apache_methods:'^(\\S+) (\\S+) (\\S+) \\[[\\w:/]+\\s[+\\-]\\d{4}\\] "(methods) (\\S+)\\s*(\\S+)?\\s*" (\\d{3}) (\\S+) "([\\w\\S://]*)" "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,-:+;/\\s]*)?"',apache_codes:'^(\\S+) (\\S+) (\\S+) \\[([\\w:/]+\\s[+\\-]\\d{4})\\] "(\\S+) (\\S+)\\s*(\\S+)?\\s*" (codes) (\\S+) "([\\w\\S://]*)" "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,-:+;/\\s]*)?"',nginx_methods:'^(\\s*)?(\\S+) (\\S+) (\\S+) \\[([\\w:/]+\\s[+\\-]\\d{4})\\] "((methods)\\s*(\\S+)\\s*(\\S+))" (\\d{3}) (\\d{0,}) "([\\w\\S://]*)" "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,@:+;/\\s]*)?"',nginx_codes:'^(\\s*)?(\\S+) (\\S+) (\\S+) \\[([\\w:/]+\\s[+\\-]\\d{4})\\] "((\\S+)\\s*(\\S+)\\s*(\\S+))" (codes) (\\d{0,}) "([\\w\\S://]*)" "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,@:+;/\\s]*)?"',php_methods:'^(\\S+)[,]?\\s*(\\S+) (\\S+) \\[([\\w:/]+\\s[+\\-]\\d{4})] "(methods) (\\S+)\\s*(\\S+)?\\s*" (\\d{3}) (\\S+) (\\S+) [a-zA-Z0-9,.%\\s]* "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,:+;/\\s]*)?"',php_codes:'^(\\S+)[,]?\\s*(\\S+) (\\S+) \\[([\\w:/]+\\s[+\\-]\\d{4})] "(\\S+) (\\S+)\\s*(\\S+)?\\s*" (codes) (\\S+) (\\S+) [a-zA-Z0-9,.%\\s]* "([\\w\\S]*\\s*[(a-zA-Z0-9)_+|~=`{}.,:+;/\\s]*)?"'},error:{apache_errors:"\\b(errors)\\b"}},counter:{access:{methods:!1,codes:!1}},filteredItems:{apache:[]}};return root.search=function(keyword,items,copyItems){if(keyword){var newItems=[],keyword=keyword.toLowerCase();for(var i in items)items[i].toLowerCase().indexOf(keyword)>-1&&newItems.push(items[i]);return newItems}if(items===copyItems)return items;if(null==items||null==copyItems)return items;if(items.length!=copyItems.length)return copyItems;for(var i=0;i<items.length;++i)if(items[i]!==copyItems[i])return copyItems;return items},root.filteredSelectedSearch=function(keywords,items,log_type,resource){if(angular.isDefined(keywords)&&keywords){var filterItem=[],mergeFilterItems=[],subItems=[];return angular.forEach(keywords,function(value,index){return value.data.length?(subItems=mergeFilterItems.length?mergeFilterItems:items,filterItem=subItems.length?[]:items,filterItem=subItems.map(function(log,key){return checkMaterials(root,value.data,log,index,log_type,resource)}).filter(function(element){return element.length}),void(mergeFilterItems=angular.copy(filterItem))):items}),mergeFilterItems}return items},root.arrayDiff=function(arr1,arr2){for(var ret=[],i=0;i<arr1.length;i+=1)arr2.indexOf(arr1[i].toLowerCase().replace(/[|&;:$%@"<>()+,\\]/g,""))>-1&&ret.push(arr1[i]);return ret},root.toLowerLetterCase=function(array){for(var toLowerCase=[],i=0;i<array.length;i++)toLowerCase.push(array[i].toLowerCase());return toLowerCase},root}angular.module("cgConsole").factory("parsingSvc",["consoleApiSvc","$http","$q","appAnalyticsSvc",parsingSvc]);
}(),function(){"use strict";function platformPollingSvc(apiEndPoint,$q,$timeout,$injector,$rootScope,consoleApiSvc,polingDelay,$interval){function handleOperationProgress(response){0!==parseInt(response.operation.server_id)&&(consoleApiSvc.server.serverData[response.operation.server_id].serverState=!1,consoleApiSvc.server.serverData[response.operation.server_id].operations=[],consoleApiSvc.server.serverData[response.operation.server_id].operations.push(response.operation),consoleApiSvc.server.serverData[response.operation.server_id].operation_type=response.operation.type,consoleApiSvc.server.serverData[response.operation.server_id].operationBasedAppId=response.operation.app_id)}function handleServerOperationCompletion(response,isLongLoader){var responseData=($injector.get("commonSvc"),angular.isDefined(response.operation.parameters)&&""!=response.operation.parameters?JSON.parse(response.operation.parameters):"");null!=responseData&&angular.isDefined(responseData.disk)&&Object.keys(responseData.disk).length&&root.reStructureOperationObject(responseData,response.operation.server_id),root.verifyingDiskUsageAndSettingValues(responseData,response.operation.server_id),root.operation.stateTracking=!1,root.operation.parameters[response.operation.server_id]=responseData,consoleApiSvc.server.serverData[response.operation.server_id].serverState=!1,isLongLoader||(consoleApiSvc.server.serverData[response.operation.server_id].operation_type="",consoleApiSvc.server.serverData[response.operation.server_id].operationBasedAppId=0),delete consoleApiSvc.server.serverData[response.operation.server_id].operations;var operationId=response.operation.id;$rootScope.publish("platform_operation-"+operationId,1==response.operation.is_completed)}function cancelPollingRequest(response){root.operation.stateTracking=!1,root.operation.cancelPolling=!1,consoleApiSvc.server.serverData[response.operation.server_id].serverState=!1,consoleApiSvc.server.serverData[response.operation.server_id].operation_type="",consoleApiSvc.server.serverData[response.operation.server_id].operationBasedAppId=0,delete consoleApiSvc.server.serverData[response.operation.server_id].operations}var root={operation:{operation:{},data:{},delay:polingDelay,stateTracking:!1,cancelPolling:!1,delayCounter:3,parameters:{}},server:{serverData:{},operation:{},diskUsage:{},fallbackData:{}},stateOperation:["app_cors_header","app_level_backup","app_enforce_https"]};return root.startPlatformPolling=function(item_id,operation_id,delay,source,isLongLoader,isCancelable){var pollingDelay,consoleApiSvc=$injector.get("consoleApiSvc"),deferred=$q.defer();if(operation_id="undefined"==typeof operation_id?!1:operation_id,delay="undefined"==typeof delay||null===delay?root.operation.delay:delay,source="undefined"==typeof source||null===source?"middleware":source,isLongLoader="undefined"==typeof isLongLoader?!1:isLongLoader,isCancelable="undefined"==typeof isCancelable?!1:isCancelable,consoleApiSvc.user.isUserLoggedIn||consoleApiSvc.redirectToLogin(),!operation_id)return!1;var data={id:operation_id,source:source},result=consoleApiSvc.callAPI("POST","api/v1/platform/polling",data,"polling_"+operation_id);return result.then(function(data){if(data.operation){if(-1==root.stateOperation.indexOf(data.operation.type)&&(root.operation.stateTracking=!0),0===parseInt(data.operation.is_completed)){handleOperationProgress(data);var item_id=0!==parseInt(data.operation.server_id)?data.operation.server_id:data.operation.cluster_id,source=angular.isDefined(data.operation.task_id)&&null!==data.operation.task_id?"ansible":"middleware",polTimeout=$timeout(function(){return root.operation.cancelPolling&&isCancelable?($timeout.cancel(polTimeout),void cancelPollingRequest(data)):((angular.isDefined(data.operation.task_id)||null!==data.operation.task_id)&&root.operation.delayCounter<6&&("undefined"==typeof pollingDelay||15e3>pollingDelay)&&(pollingDelay=delay+52.65*delay/100),root.startPlatformPolling(item_id,operation_id,pollingDelay,source,isLongLoader),void root.operation.delayCounter++)},delay)}else $timeout.cancel(polTimeout),root.operation.stateTracking=!1,0!==parseInt(data.operation.server_id)&&handleServerOperationCompletion(data,isLongLoader),window.setTimeout(function(){$rootScope.unsubscribe("platform_operation-"+data.operation.id)},2e3),deferred.reject(data);deferred.resolve(data)}else $timeout(function(){root.startPlatformPolling(item_id,operation_id)},delay),deferred.resolve(data)}),deferred.promise},root.reStructureOperationObject=function(response,server_id){root.server.fallbackData=response,angular.isDefined(response.disk.disk_usage)&&Object.keys(response.disk.disk_usage).length&&(root.server.diskUsage[server_id]=response.disk)},root.verifyingDiskUsageAndSettingValues=function(response,server_id){(angular.isDefined(response.app)&&angular.isDefined(response.app.home)&&Object.keys(response.app).length||angular.isDefined(response["disk.directories.home"])||angular.isDefined(response.free_disk)&&Object.keys(response.free_disk).length)&&(root.server.diskUsage[server_id]={disk_usage:response})},root}angular.module("cgConsole").factory("platformPollingSvc",["apiEndPoint","$q","$timeout","$injector","$rootScope","consoleApiSvc","polingDelay","$interval",platformPollingSvc])}(),function(){"use strict";function restrictedFeaturesSvc(consoleApiSvc,sortingSvc){var root={restrictedStates:["server_create","server_clone","disaster_recovery"]};return root.getRestrictedProviders=function(){var blocked_providers=[];return angular.forEach(consoleApiSvc.restricted_features,function(value,key){angular.isDefined(value.provider)&&blocked_providers.push(key)}),blocked_providers},root.getBlockedRegions=function(provider){var blocked_regions=null;return angular.forEach(consoleApiSvc.restricted_features,function(value,key){key==provider&&angular.isDefined(value.region)&&(blocked_regions=value.region)}),blocked_regions},root.setBlockedRegions=function(provider,regions){var blocked_regions=root.getBlockedRegions(provider.label_api_server);return regions&&blocked_regions&&(angular.forEach(regions,function(region){angular.forEach(blocked_regions,function(blockedRegion){parseInt(region.id)===parseInt(blockedRegion.region_id)&&(region.isBlocked="blocked",region.blockMessage=blockedRegion.message)})}),regions=sortingSvc.sortRegionsByIsBlocked(regions,"isBlocked")),regions},root.BlockRegion=function(provider,regions,regionToBlock){return provider&&regions&&regionToBlock&&angular.forEach(regions,function(region){region.label_api_server==blockedRegion.key&&(region.isBlocked="blocked",region.blockMessage=blockedRegion.message)}),regions},root.getBlockedRegionsSizes=function(provider){var blocked_regions_sizes=null;return angular.forEach(consoleApiSvc.restricted_features,function(value,key){key==provider&&angular.isDefined(value.region_size)&&(blocked_regions_sizes=value.region_size)}),blocked_regions_sizes},root.isCoreServiceDisabled=function(){var core_service={};return angular.isDefined(consoleApiSvc.restricted_features.core_services)&&(core_service=consoleApiSvc.restricted_features.core_services[0]),core_service},root.getRestrictedRegionSizeMessage=function(provider,server_size_id,region){var message="",blocked_regions_sizes=root.getBlockedRegionsSizes(provider);return angular.forEach(blocked_regions_sizes,function(region_sizes){parseInt(region_sizes.region_id)===parseInt(region.id)&&parseInt(region_sizes.size_id)===parseInt(server_size_id)&&(message=region_sizes.message)}),message},root.getRestrictedRegionSizes=function(provider,server_size_id,regions){var blocked_regions_sizes=root.getBlockedRegionsSizes(provider);return angular.forEach(regions,function(region){region.isNotAvailable="",angular.forEach(blocked_regions_sizes,function(region_sizes){parseInt(region_sizes.region_id)===parseInt(region.id)&&parseInt(region_sizes.size_id)===parseInt(server_size_id)&&(region.isNotAvailable="Yes",region.availablityMessage=region_sizes.message)})}),regions},root.checkRestrictCoreFeatures=function(){var core_service=root.isCoreServiceDisabled(),isCoreServiceDisabled=!1;return angular.equals(core_service,{})||-1===root.restrictedStates.indexOf(consoleApiSvc.current.name)||(isCoreServiceDisabled=!0),isCoreServiceDisabled},root}angular.module("cgConsole").factory("restrictedFeaturesSvc",["consoleApiSvc","sortingSvc",restrictedFeaturesSvc])}(),function(){"use strict";function serverActionsSvc($injector,$rootScope,$mdDialog,$state,serverMessages,toastrSvc,$q,memberSvc,cdnSvc,commonSvc,$translate,$translatePartialLoader,$sce,consoleApiSvc,analyticsSvc){var root={consoleApiSvc:{},toastrSvc:{},disasterRecovery:!1};return root.consoleApiSvc=$injector.get("consoleApiSvc"),root.toastrSvc=$injector.get("toastrSvc"),root.changeState=function(server_id,serverState){var url,deferred=$q.defer(),status=(root.consoleApiSvc.server.serverData[server_id],"");switch(serverState){case!0:url=root.consoleApiSvc.API.URL.stop,status="stopping_server";break;case!1:url=root.consoleApiSvc.API.URL.start,status="starting_server"}var result=root.consoleApiSvc.callAPI("POST",url,{server_id:server_id},"server_start_stop_"+server_id);return result.then(function(data){data.operation_id&&(root.consoleApiSvc.server.serverData[server_id].operation_type=status,root.consoleApiSvc.startPolling(server_id,data.operation_id),deferred.resolve(data))},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root.restart=function(server_id,$event){var deferred=$q.defer(),result=(root.consoleApiSvc.server.serverData[server_id],root.consoleApiSvc.callAPI("POST",root.consoleApiSvc.API.URL.restart,{server_id:server_id},"restarting_server_"+server_id));return result.then(function(data){data.operation_id&&(root.consoleApiSvc.startPolling(server_id,data.operation_id),deferred.resolve(data))},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root["delete"]=function(server_id,reason){var deferred=$q.defer(),data=null,server=root.consoleApiSvc.server.serverData[server_id];"full"===root.consoleApiSvc.user.userDetails.customer_type&&(data={reason:reason});var result=root.consoleApiSvc.callAPI("DELETE",root.consoleApiSvc.API.URL.server+"/"+server_id,data,"deleting_server_"+server_id);return result.then(function(response){if(response.operation_id){var serverLabel=server.label;1===$("#server-list-"+server_id).length?$("#server-list-"+server_id).fadeOut(1e3,function(){delete root.consoleApiSvc.server.serverData[server_id]}):delete root.consoleApiSvc.server.serverData[server_id],0===Object.keys(root.consoleApiSvc.server.serverData).length&&(memberSvc.teamMemberNotification=!1),root.toastrSvc.success(serverMessages.server_deleted,{placeholders:[{label:serverLabel,status:"successfully"}]}),deferred.resolve(response),"trial"===root.consoleApiSvc.user.userDetails.customer_type&&window.location.reload(),cdnSvc.removeCDN(server_id,null),$state.go("server")}},function(response){deferred.reject(response),toastrSvc.error(response.data.message)}),deferred.promise},root.clone_server=function(server_id,$event){var server_label=root.consoleApiSvc.server.serverData[server_id].label;$rootScope.preventNavigation();var confirm=$mdDialog.confirm().title("Server Cloning").textContent("Are you sure you want to clone "+server_label+" server?").ariaLabel("Server Cloning").targetEvent($event).ok("Yes").cancel("No");$mdDialog.show(confirm).then(function(){$rootScope.allowNavigation(),$state.go("server_clone",{id:server_id})},function(){$rootScope.allowNavigation()})},root.deleteServerDialog=function($event,server_id){function deleteServerDialogController($mdDialog,$sce,server_id,userDetail,$translatePartialLoader,$translate,$timeout,serverViewPath){function scheduleEventOnCloseIO(action,reason){vm.eventScheduleheading=action,$timeout(function(){$.datetimepicker.setLocale("en"),$("#datetimepicker").datetimepicker({dayOfWeekStart:1,lang:"en",minDate:0,minTime:0,step:5,format:"Y-m-d H:i:s",formatDate:"Y-m-d H:i:s"})},200);var offsetMepping={15:".25",30:".5",45:".75"};vm.setTimeZoneOffset=function(){var sign=vm.contact.timezone.substr(4,1);sign="-"==sign?"-":"";var hour=vm.contact.timezone.substr(5,2),minute=vm.contact.timezone.substr(8,2);vm.contact.timezoneOffset="00"!==hour?sign+hour.replace(/^0+/,""):null,null!==vm.contact.timezoneOffset&&"00"!==minute&&(vm.contact.timezoneOffset=sign+hour+offsetMepping[minute])},vm.contact.time=null,vm.submitForm=function(){if(vm.eventScheduleError=!1,!vm.contactForm.$valid)return angular.forEach(vm.contactForm.$error,function(field){angular.forEach(field,function(errorField){errorField.$setTouched()})}),!1;vm.preloader=!0,vm.message="Submitting your request …",vm.contact.action=action,vm.contact.reason=reason,vm.contact.server_id=server_id,vm.contact.server_size=server.instance_type;var result=consoleApiSvc.callAPI("POST","api/v1/server/scheduleEvent/",vm.contact,"scheduleEvent"+server_id);result.then(function(response){vm.preloader=!1,vm.message="",vm.eventScheduleForm=!1,toastrSvc.success("Sit back. Relax. And wait for your phone to ring. We will get back to you shortly."),$mdDialog.hide()},function(response){vm.preloader=!1,vm.message="",vm.eventScheduleError="Due to some reason, the form could not be submitted. Please try again."})}}function createZendeskTicket(key){if(memberSvc.isUserLevelAllowed("support")){var data=ctaMappings[key];data.server_id=server_id,data.server_size=server.instance_type,vm.preloader=!0,vm.message="Creating a high priority ticket for you ...";var result=root.consoleApiSvc.callAPI("POST","api/v1/server/createZendeskTicket",data,"creatingZendeskTicket_"+server_id);result.then(function(response){vm.preloader=!1,vm.message="",toastrSvc.success(response.message),$mdDialog.hide()},function(response){vm.preloader=!1,vm.message="";var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!==errors_msg&&toastrSvc.error(errors_msg)})}}function submitSurveyFeedback(){if(vm.customerFeedback=vm.customerFeedback.trim(),vm.customerFeedback.length>3&&angular.isDefined(vm.customerFeedback)){var feedback={custom_value:specs,feedback:vm.customerFeedback};feedback.action=ctaMappings.surveyFeedback.action,feedback.reason=ctaMappings.surveyFeedback.reason,feedback.server_id=server_id,feedback.server_size=server.instance_type;var result=consoleApiSvc.callAPI("POST","api/v1/server/surveyFeedback/",feedback,"surveyFeedback"+server_id);result.then(function(response){$mdDialog.hide()})}}function redirectPricingPage(){analyticsSvc.addAnalytics({event_name:"automate_server_delete",reason:ctaMappings.pricing.reason,server_id:server_id,instance_type:server.instance_type,action:ctaMappings.pricing.action})}var vm=this;vm.defaultTab=!1,vm.eventScheduleForm=!1,vm.admin_loggedin=!1,vm.eventScheduleError=!1,vm.delete_confirm="",vm.customerFeedback="",vm.eventScheduleheading="Schedule a Call",vm.contactForm="contactForm",vm.reason="Performance Issues",vm.deleteConfirmation="deleteConfirmation",vm.isRemoveFormEnabled=!1,vm.errors={},vm.contact={},vm.regex={email:consoleApiSvc.getRegex("email"),phone:consoleApiSvc.getRegex("phone_num"),"delete":consoleApiSvc.getRegex("delete")};var server=root.consoleApiSvc.server.serverData[server_id],specs="Cloud:"+server.cloud+", Email:"+userDetail.email;vm.timeZone=consoleApiSvc.server.settings_cms_data.settings_tab.timezone,vm.serverLabel=server.label,$translatePartialLoader.addPart("deleteServerDialog"),$translate.refresh(),vm.getPartial=function(partial){return serverViewPath+"partials/"+partial+".html"},angular.isDefined(userDetail.admin_loggedin)&&(vm.admin_loggedin=userDetail.admin_loggedin),vm.toggleOption=function(tab,reason){vm.eventScheduleForm=!1,vm.eventScheduleError=!1,vm.defaultTab=tab,vm.reason=reason,vm.isRemoveFormEnabled="noNeed"===tab||"somethingElse"===tab},vm.goBack=function(){vm.eventScheduleForm=!1};var ctaMappings={surveyFeedback:{key:"surveyFeedback",action:"Survey Feedback",reason:"Something Else"},scheduleACall:{key:"scheduleACall",action:"Schedule a Call",reason:"Cost"},scheduleADemo:{key:"scheduleADemo",action:"Schedule a Demo",reason:"Difficult to Use"},performance:{key:"performance",action:"Open a High Priority Ticket",reason:"Performance Issues"},pricing:{key:"pricing",action:"Pricing Page",reason:"Cost"},quality:{key:"quality",action:"Open a High Priority Ticket",reason:"Support Quality"}};vm.validateDeleteConfirmation=function(){if(!vm.deleteConfirmation.$valid)return angular.forEach(vm.deleteConfirmation.$error,function(field){angular.forEach(field,function(errorField){errorField.$setTouched()})}),!1;if(vm.admin_loggedin){var error=!0;if((angular.isUndefined(vm.delete_confirm)||""===vm.delete_confirm)&&(vm.deleteConfirmation.delete_confirm.$setValidity("delete_confirm",!1),error=!1),(angular.isUndefined(vm.admin_delete_confirm)||""===vm.admin_delete_confirm)&&(vm.deleteConfirmation.admin_delete_confirm.$setValidity("admin_delete_confirm",!1),error=!1),error===!1)return error}var data={delete_confirm:vm.delete_confirm};vm.admin_loggedin&&(data.admin_delete_confirm=vm.admin_delete_confirm);var confirmation=commonSvc.checkDeleteConfirmation(data);return angular.isDefined(confirmation)&&""!=confirmation.key&&""!=confirmation.msg?(vm.deleteConfirmation[confirmation.key].$setValidity(confirmation.key,!1),vm.errors[confirmation.key]=confirmation.msg,!1):!0},vm.onChangeEmail=function(){vm.admin_loggedin&&angular.isDefined(vm.admin_delete_confirm)&&vm.admin_delete_confirm.length>3?(vm.deleteConfirmation.$valid=!0,vm.deleteConfirmation.admin_delete_confirm.$setValidity("admin_delete_confirm",!0)):vm.errors={}},vm.checkDeleteConfirmation=function(){return vm.validateDeleteConfirmation()?($(".hdr-loader").show(),root["delete"](server_id,vm.reason).then(function(data){"somethingElse"===vm.defaultTab&&submitSurveyFeedback(),$(".hdr-loader").hide()},function(){$(".hdr-loader").hide(),"somethingElse"===vm.defaultTab&&submitSurveyFeedback()}),void $mdDialog.hide()):!1},vm.onClickedCTA=function(event){switch(event){case ctaMappings.performance.key:createZendeskTicket(ctaMappings.performance.key);break;case ctaMappings.quality.key:createZendeskTicket(ctaMappings.quality.key);break;case ctaMappings.pricing.key:redirectPricingPage();break;case ctaMappings.scheduleACall.key:case ctaMappings.scheduleADemo.key:vm.eventScheduleForm=!0;var action=event===ctaMappings.scheduleACall.key?ctaMappings.scheduleACall.action:ctaMappings.scheduleADemo.action,reason=event===ctaMappings.scheduleACall.key?ctaMappings.scheduleACall.reason:ctaMappings.scheduleADemo.reason;scheduleEventOnCloseIO(action,reason)}},vm.cancel=function(){$mdDialog.cancel()}}$mdDialog.show({controller:deleteServerDialogController,controllerAs:"vm",templateUrl:"js/app/views/delete-server-modal.html",parent:angular.element(document.body),targetEvent:$event,clickOutsideToClose:!1,locals:{server_id:server_id,userDetail:consoleApiSvc.user.userDetails}})},root}angular.module("cgConsole").factory("serverActionsSvc",["$injector","$rootScope","$mdDialog","$state","serverMessages","toastrSvc","$q","memberSvc","cdnSvc","commonSvc","$translate","$translatePartialLoader","$sce","consoleApiSvc","analyticsSvc",serverActionsSvc])}(),function(){"use strict";function serverApiSvc(consoleApiSvc,$translatePartialLoader,toastrSvc,$q,$translate,$state,$filter,$injector){var root={serverList:[{}],maintenanceWinSettings:{},days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],utcTimeRange:{0:{range:"00:00 to 01:00"},1:{range:"01:00 to 02:00"},2:{range:"02:00 to 03:00"},3:{range:"03:00 to 04:00"},4:{range:"04:00 to 05:00"},5:{range:"05:00 to 06:00"},6:{range:"06:00 to 07:00"},7:{range:"07:00 to 08:00"},8:{range:"08:00 to 09:00"},9:{range:"09:00 to 10:00"},10:{range:"10:00 to 11:00"},11:{range:"11:00 to 12:00"},12:{range:"12:00 to 13:00"},13:{range:"13:00 to 14:00"},14:{range:"14:00 to 15:00"},15:{range:"15:00 to 16:00"},16:{range:"16:00 to 17:00"},17:{range:"17:00 to 18:00"},18:{range:"18:00 to 19:00"},19:{range:"19:00 to 20:00"},20:{range:"20:00 to 21:00"},21:{range:"21:00 to 22:00"},22:{range:"22:00 to 23:00"},23:{range:"23:00 to 00:00"}}};return root.callServerDetail=function(serverId){var deferred=$q.defer();return root.serverList[serverId]?deferred.resolve(root.serverList):consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.serverDetail+"?server_id="+serverId,null,"server_detail"+serverId).then(function(data){angular.isDefined(data.server)?(deferred.resolve(),root.serverList[serverId]=data.server):deferred.reject(data)},function(data){deferred.reject(data)}),deferred.promise},root.getServerDetail=function(){return root.serverList},root}angular.module("cgConsole").factory("serverApiSvc",["consoleApiSvc","$translatePartialLoader","toastrSvc","$q","$translate","$state","$filter","$injector",serverApiSvc])}(),function(){"use strict";function serverConfigsSvc(consoleApiSvc,$q){function filterDisabled(regions,server_sizes){var serverRegions={},serverSizes={};try{angular.forEach(regions,function(val){1===parseInt(val.status)&&(serverRegions[val.label_api_server]=val)}),angular.forEach(server_sizes,function(val){1===parseInt(val.status)&&(serverSizes[val.label_api_server]=val)})}catch(err){}return{regions:serverRegions,server_sizes:serverSizes}}var root={awsSeriesMapping:{hvm_x5:5,hvm:4,paravirtual:3},excludeAWSSizes:{hvm_x5:["t2.small","t2.medium"],hvm:["t3.small","t3.medium"]},serverPackages:{},packagesConfig:["mysql_5.5","mariadb_5.5","mariadb_10.0"],packageVersionValidated:!1};return root.showPHPVersion=function(php_version){var ver_regex=/^[7](\.[0-9]{1,1})?$/;return ver_regex.test(php_version)},root.getServerpackages=function(server_id){var deferred=$q.defer(),requestId="getServerPackage_"+server_id,queryString="?server_id="+server_id;if($.isEmptyObject(root.serverPackages)){var result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.getServerPackages+queryString,null,requestId);result.then(function(response){deferred.resolve(response),root.serverPackages=response},function(response){deferred.reject(response)})}else deferred.resolve(root.serverPackages);return deferred.promise},root.packageExist=function(serverPackages){var object={status:!1,name:null},names=[],versions=[];return angular.forEach(root.packagesConfig,function(name){var array=name.split("_");names.push(array[0]),versions.push(array[1])}),angular.isDefined(serverPackages)&&Object.keys(serverPackages).length&&angular.forEach(names,function(name){angular.isDefined(serverPackages[name])&&-1!==versions.indexOf(serverPackages[name])&&(object.status=!0,object.name=name)}),object},root.getServerPrice=function(sid){try{if(sid&&-1!=["string","number"].indexOf(typeof sid))return{price:root.getPrice(consoleApiSvc.server.serverData[sid]),sid:sid};var serverCount=Object.keys(consoleApiSvc.server.serverData).length;if(sid=Object.keys(consoleApiSvc.server.serverData),1===serverCount&&angular.isDefined(sid[0]))return{price:root.getPrice(consoleApiSvc.server.serverData[sid]),sid:sid}}catch(err){}},root.getPrice=function(server){try{var regionPrice,cmsData=root.getServerCmsData(server),serverRegion=cmsData.region[server.region],serverSizePrice=cmsData.server_sizes[server.cloud_plan_id].pricing;for(var i in serverSizePrice)parseInt(serverSizePrice[i].region_id)===parseInt(serverRegion.id)&&(regionPrice=serverSizePrice[i]);return parseFloat(regionPrice.manage)+parseFloat(regionPrice.server)}catch(err){}},root.getServerCmsData=function(server){var region,server_sizes,server_storage,cloudProvider=angular.copy(consoleApiSvc.server.providers);try{for(var i in cloudProvider){var provider=cloudProvider[i];if(provider.label_api_server===server.cloud){var cmsData=filterDisabled(provider.regions,provider.server_sizes);region=cmsData.regions||{},server_sizes=cmsData.server_sizes||{},server_storage=provider.server_storage}}}catch(err){}return{region:region,server_sizes:server_sizes,server_storage:server_storage}},root}angular.module("cgConsole").factory("serverConfigsSvc",["consoleApiSvc","$q",serverConfigsSvc])}(),function(){"use strict";function serverFabMenuSvc($rootScope,$mdDialog,$state,toastrSvc,$q,consoleApiSvc,operationSvc,serverViewPath){function serverTransferPopupController($mdDialog,server_id,mappedRemoteStaging,mappedRemoteProduction){var vm=this;vm.preloader=!1,vm.message="",vm.server=consoleApiSvc.server.serverData[server_id],vm.transfer=!1,vm.share=!1,vm.email="",vm.errors_msg="",vm.toast_msg="",vm.param={},vm.mappedRemoteStaging=mappedRemoteStaging,vm.mappedRemoteProduction=mappedRemoteProduction,vm.regex={email:consoleApiSvc.getRegex("email")},vm.hide=function(){$mdDialog.hide()},vm.cancel=function(){vm.preloader=!1,vm.message="",$mdDialog.cancel()},vm.resetErrors=function(){vm.errors_msg=""},vm.fetchTransferStatus=function(){$rootScope.preventNavigation(),vm.preloader=!0,vm.message=operationSvc.getOperationLessMessage("serverTransfer","getStatus"),vm.param={server_id:server_id},consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.serverTransferStatus,vm.param,"getStatus").then(function(response){response&&angular.isObject(response)?(vm.preloader=!1,vm.message="",vm.transfer=response.transfer):vm.cancel()},function(){vm.cancel()})},vm.transferServer=function(){vm.transfer||vm.preloader||!vm.email||""===vm.email||($rootScope.preventNavigation(),vm.preloader=!0,vm.message=operationSvc.getOperationLessMessage("serverTransfer","serverTransferRequest"),vm.param={server_id:server_id,email:vm.email},consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.serverTransferRequest,vm.param,"serverTransferRequest").then(function(response){response&&response.status===!0?toastrSvc.success("Congratulations! Transfer Server request successfully sent."):toastrSvc.error("Unexpected error occurred while Transferring Server."),vm.cancel()},function(response){response&&response.data&&angular.isObject(response.data)?(vm.errors_msg="",vm.preloader=!1,vm.transfer=!1,vm.message="",$rootScope.allowNavigation(),angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?vm.errors_msg+=error.message+"<br/>":vm.errors_msg=response.data.message})})):(toastrSvc.error("Unexpected error occurred while transferring server."),vm.cancel())}))},vm.cancelTransfer=function(){vm.transfer&&!vm.preloader&&($rootScope.preventNavigation(),vm.preloader=!0,vm.message=operationSvc.getOperationLessMessage("serverTransfer","cancelServerTransfer"),vm.param={server_id:server_id},consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.cancelServerTransfer,vm.param,"cancelServerTransfer").then(function(response){response&&response.status===!0?(vm.message="",vm.preloader=!1,vm.transfer=!1,toastrSvc.success("Transfer Server request successfully cancelled.")):(toastrSvc.error("Unexpected error occurred while cancelling Transfer Server request."),vm.cancel())},function(){toastrSvc.error("Unexpected error occurred while cancelling Transfer Server request."),vm.cancel()}))},vm.fetchTransferStatus(),vm.isStagingMapped=function(){return vm.mappedRemoteStaging.length>0||vm.mappedRemoteProduction.length>0}}var root={};return root.serverTransferInit=function(server_id,event){if(angular.isDefined(server_id)&&server_id){var ServerApps=[],mappedRemoteStaging=[],mappedRemoteProduction=[],server=angular.copy(consoleApiSvc.server.serverData[server_id]);angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)ServerApps.push(server.apps[objectKey])}),angular.forEach(server.apps,function(app){parseInt(app.source_server_id)!==parseInt(server_id)&&parseInt(app.is_staging)&&mappedRemoteStaging.push(app)}),angular.forEach(server.apps,function(app){angular.forEach(ServerApps,function(mappedApp){if(parseInt(app.id)===parseInt(mappedApp.source_app_id)&&parseInt(mappedApp.server_id)!==parseInt(server_id)&&0===parseInt(app.is_staging)&&app.is_production)if(mappedRemoteProduction.length>0)for(var i=0;i<mappedRemoteProduction.length;i++)angular.isDefined(mappedRemoteProduction[i].id)&&-1===mappedRemoteProduction[i].id.indexOf(app.id)&&mappedRemoteProduction.push(app);else mappedRemoteProduction.push(app)})})}$mdDialog.show({controller:serverTransferPopupController,controllerAs:"vm",templateUrl:serverViewPath+"partials/server-transfer.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!1,locals:{server_id:server_id,mappedRemoteStaging:mappedRemoteStaging,mappedRemoteProduction:mappedRemoteProduction}}).then(function(){$rootScope.allowNavigation()},function(){$rootScope.allowNavigation()})},root}angular.module("cgConsole").factory("serverFabMenuSvc",["$rootScope","$mdDialog","$state","toastrSvc","$q","consoleApiSvc","operationSvc","serverViewPath",serverFabMenuSvc])}(),function(){"use strict";function serverSettingsSvc(){var root={xDebugAllowedPhpVersion:["7.3","7.4"],ionCubephpVersionCompatibleMessage:'<p class="ionCube-msg">IonCube is not avaliable for PHP 7.4 on temporary basis. Your app using <br class="hide-xs" /> IonCube encryption won\'t work properly. Read more<a href="https://support.cloudways.com/php7-and-its-compatibility/" class="glb-link-blue" target="_blank">here</a>for further details</p>',phpVersionCompatibleMessage:'Please ensure all your applications on this server are compatible with PHP PACKAGE_VERSION_KEY ,<br class="hide-xs" />  as otherwise they may not function properly.<br class="hide-xs" />  Read more <a href="https://support.cloudways.com/php7-and-its-compatibility/" class="glb-link2" target="_blank">here</a> about PHP 7 version compatibility.<br/><br/>Do you wish to continue?'};return root.isXdebugCompatiblePhpVersion=function(version){var result=!0;return angular.isDefined(version)&&-1!==root.xDebugAllowedPhpVersion.indexOf(version)&&(result=!1),result},root.getVersionCompatibilityMessages=function(serverPackage,version){var result="",warning=root.phpVersionCompatibleMessage.replace("PACKAGE_VERSION_KEY",version);switch(serverPackage){case"php":result=7.4==version?root.ionCubephpVersionCompatibleMessage+warning:warning;break;default:result=warning}return result},root}angular.module("cgConsole").factory("serverSettingsSvc",[serverSettingsSvc])}(),function(){"use strict";function sortingSvc(consoleApiSvc){var root={};return root.sortRegionsByIsBlocked=function(input,attribute){if(!angular.isObject(input))return input;var arrayRegion=[],arrayBlockedRegion=[];angular.forEach(input,function(region,objectKey){"blocked"==region.isBlocked?arrayBlockedRegion.push(input[objectKey]):arrayRegion.push(input[objectKey])});var sortedRegion=consoleApiSvc.sortByColumn(arrayRegion,"sort_order"),sortedBlockRegion=consoleApiSvc.sortByColumn(arrayBlockedRegion,"sort_order");return sortedRegion.concat(sortedBlockRegion)},root}angular.module("cgConsole").factory("sortingSvc",["consoleApiSvc",sortingSvc])}(),function(){"use strict";function stagingSvc($q,consoleApiSvc,commonSvc,toastrSvc){var root={app:{auth_credentials:{},srefStagingBlock:[],list:{},mappedApps:{},allApps:[],disableOperationalLoader:!1,checkStagingMapped:!1,isStagingOrphan:!1,isLoaderOperation:!1,loaderKeyExists:[]},members:{},API:{URL:{stagingSeletion:"api/v1/staging/app/selection",fetchTables:"api/v1/staging/app/tables"}}};return root.showStagingSyncMessage=function(server){return!(!angular.isDefined(server.operations)||"sync_app"!==server.operations[0].type||consoleApiSvc.operationPubSub[server.operations[0].type+"_"+server.operations[0].id])},root.getAuthCredential=function(app_id){return root.app.auth_credentials[app_id]},root.fetchAuthCredential=function(server_id,app_id){angular.isArray(root.app.auth_credentials[app_id])||(root.app.auth_credentials[app_id]=[]);var deferred=$q.defer();return consoleApiSvc.callAPI("GET","api/v1/staging/authCreds?server_id="+server_id+"&app_id="+app_id).then(function(response){angular.isDefined(response.app)?root.app.auth_credentials[app_id]=response.app:root.app.auth_credentials[app_id]=[],
deferred.resolve(root.app.auth_credentials[app_id])},function(response){deferred.reject(response)}),deferred.promise},root.updateAuthCredential=function(app_id,server_id,credentials){var deferred=$q.defer(),requestId="updateStagingAuthCreds_"+app_id,data={app_id:app_id,server_id:server_id,username:credentials.auth_username,password:credentials.auth_password},result=consoleApiSvc.callAPI("POST","api/v1/staging/htaccessUpdate",data,requestId);return result.then(function(response){root.app.auth_credentials[app_id].ht_pass=credentials.auth_password,root.app.auth_credentials[app_id].ht_user=credentials.auth_username,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.getAppDetail=function(appId){appId||$state.go("server");var servers=angular.copy(consoleApiSvc.server.serverData),appDetails={};return angular.forEach(servers,function(server){angular.forEach(server.apps,function(stagingApp){parseInt(appId)===parseInt(stagingApp.id)&&parseInt(stagingApp.is_staging)&&(appDetails.server=server,appDetails.app=stagingApp)})}),appDetails},root.isCheckStaging=function(is_staging){return!!parseInt(is_staging)},root.isCheckStagingMapped=function(server_id,app_id){var ServerApps=[],mappedStaging=[],userDetails=consoleApiSvc.user.userDetails,server=angular.copy(consoleApiSvc.server.serverData[server_id]);if("secondary"!==userDetails.type){if(angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)ServerApps.push(server.apps[objectKey])}),angular.forEach(server.apps,function(stagingApp){angular.forEach(ServerApps,function(mappedApp){parseInt(app_id)===parseInt(stagingApp.id)&&parseInt(stagingApp.id)===parseInt(mappedApp.source_app_id)&&parseInt(mappedApp.is_staging)&&mappedStaging.push(mappedApp)})}),angular.isDefined(mappedStaging)&&mappedStaging.length>0)return!0}else if("secondary"===userDetails.type){var secondaryApp=[];if(angular.forEach(server.apps,function(stagingApp){parseInt(app_id)===parseInt(stagingApp.id)&&null===stagingApp.source_app_id&&"0"===stagingApp.is_staging&&stagingApp.is_production!==!1&&(secondaryApp.push(stagingApp),stagingApp.checkStagingMapped=!0)}),consoleApiSvc.server.serverData[server_id]=server,angular.isDefined(secondaryApp)&&secondaryApp.length>0)return!0}return!1},root.isCheckProductionMapped=function(server_id,app_id,sref){var servers=angular.copy(consoleApiSvc.server.serverData),userDetails=consoleApiSvc.user.userDetails;if("secondary"!==userDetails.type){if(!angular.isDefined(sref)||"staging_app_detail.staging"!==sref)return!0;var mappedStaging=!1;if(angular.forEach(servers,function(server){angular.forEach(server.apps,function(app){parseInt(app_id)===parseInt(app.id)&&(mappedStaging=!0)})}),mappedStaging)return!0}else if("secondary"===userDetails.type){var secondaryApp=[];if(angular.isDefined(server_id)&&angular.isDefined(app_id)&&(angular.forEach(servers[server_id].apps,function(stagingApp){null!==stagingApp.source_app_id&&"1"===stagingApp.is_staging&&secondaryApp.push(stagingApp)}),angular.isDefined(secondaryApp)&&secondaryApp.length>0))return!0}},root.mappedStagingWithApp=function(){var allServerApps=[];angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)allServerApps.push(server.apps[objectKey])}),root.app.allApps=allServerApps,angular.forEach(consoleApiSvc.server.serverData,function(server){angular.forEach(server.apps,function(stagingApp){stagingApp.mappedStaging=[],angular.forEach(allServerApps,function(mappedApp){parseInt(stagingApp.id)===parseInt(mappedApp.source_app_id)&&parseInt(mappedApp.is_staging)&&stagingApp.mappedStaging.push(mappedApp)})})})},root.sortStagingApps=function(input,attribute){var array=[];for(var objectKey in input)array.push(input[objectKey]);return array.sort(function(a,b){return+!parseInt(a[attribute])||-!parseInt(b[attribute])||parseInt(a[attribute])-parseInt(b[attribute])}),array},root.isDisableCloneItem=function(is_staging){return!parseInt(is_staging)},root.isStagingOrphan=function(serverId,appId){var ServerApps=[],mappedRemoteStaging=[],userDetails=consoleApiSvc.user.userDetails,server=angular.copy(consoleApiSvc.server.serverData[serverId]);return"secondary"!==userDetails.type&&(angular.forEach(consoleApiSvc.server.serverData,function(server){for(var objectKey in server.apps)ServerApps.push(server.apps[objectKey])}),angular.forEach(server.apps,function(isAppMapped,key){angular.forEach(ServerApps,function(mappedApp){parseInt(isAppMapped.id)===parseInt(appId)&&parseInt(isAppMapped.source_app_id)===parseInt(mappedApp.id)&&parseInt(isAppMapped.is_staging)&&mappedRemoteStaging.push(mappedApp)})})),mappedRemoteStaging},root.deleteStagingOrphanData=function(server_id,app_id){var key="cwStagingOrphan",queryString="?key="+key+"&value="+app_id,result=consoleApiSvc.callAPI("DELETE","api/v1/staging/orphan"+queryString);result.then(function(response){root.app.isStagingOrphan=!0})},root.postLoaderData=function(code,value){var data={code:code,value:value},result=consoleApiSvc.callAPI("POST","api/v1/staging/syncLoader",data);result.then(function(response){root.getSyncLoader(),root.app.disableOperationalLoader=!0},function(response){root.app.disableOperationalLoader=!1})},root.isShowSyncLoader=function(operation_type,state){var operations=["staging_sync_create","sync_app"],url=["app_detail_staging","staging_app_detail.staging"];return!(!angular.isDefined(operation_type)||""===operation_type||-1===operations.indexOf(operation_type)||!angular.isDefined(operation_type)||"cwStagingLoader"!==root.app.loaderKeyExists||-1!==url.indexOf(state))},root.getSyncLoader=function(){var key="cwStagingLoader",queryString="?key="+key,result=consoleApiSvc.callAPI("GET","api/v1/staging/syncLoader"+queryString);result.then(function(response){root.app.loaderKeyExists=response})},root.deleteSyncLoaderData=function(){var result=consoleApiSvc.callAPI("DELETE","api/v1/staging/syncLoader");result.then(function(response){response.status&&(root.app.loaderKeyExists=[])})},root.getApplicationSelection=function(application_id,server_id){var deferred=$q.defer(),queryString="?server_id="+server_id+"&app_id="+application_id;return consoleApiSvc.callAPI("GET",root.API.URL.stagingSeletion+queryString).then(function(data){deferred.resolve(data)},function(data){deferred.resolve("error"),deferred.reject(data)}),deferred.promise},root.getApplicationTables=function(application_id,server_id){var deferred=$q.defer(),queryString="?server_id="+server_id+"&app_id="+application_id;return consoleApiSvc.callAPI("GET",root.API.URL.fetchTables+queryString).then(function(data){deferred.resolve(data)},function(data){deferred.reject(data)}),deferred.promise},root}angular.module("cgConsole").factory("stagingSvc",["$q","consoleApiSvc","commonSvc","toastrSvc",stagingSvc])}(),function(){"use strict";function stringValidatorSvc(){var root={policies:{platform:[{text:"Length between 8 and 60 characters",regex:"^.{8,60}$"},{text:"At least one lowercase character",regex:"[a-z]"},{text:"At least one uppercase character",regex:"[A-Z]"},{text:"At least one number",regex:"[0-9]"},{text:"No unicode characters allowed",regex:"[^\x00-]",offender:!0},{text:"No spaces allowed",regex:"[ ]",offender:!0}],ansible:[{text:"Length between 8 and 50 characters",regex:"^.{8,50}$"},{text:"At least one lowercase character",regex:"[a-z]"},{text:"At least one uppercase character",regex:"[A-Z]"},{text:"No unicode characters allowed",regex:"[^\x00-]",offender:!0},{text:"At least one number",regex:"[0-9]"},{text:"No spaces allowed",regex:" ",offender:!0},{text:"Scripts are not allowed",regex:"(<?xml)|(<script)",offender:!0}]}};return root.getPolicy=function(policy){return root.policies[policy]},root.validatePolicy=function(input,policy){var results={passed:!0,results:[]};return policy.forEach(function(rule,index){var pattern=new RegExp(rule.regex),match=pattern.test(input);if(angular.isDefined(rule.offender)&&rule.offender===!0)var valid=!match;else var valid=match;valid||(results.passed=!1),results.results.push({match:match,valid:valid})}),results.failed=!results.passed,results},root}angular.module("cgConsole").factory("stringValidatorSvc",[stringValidatorSvc])}(),function(){"use strict";function supervisorSvc(serverMessages,consoleApiSvc,$state,toastrSvc,$http,$q,commonSvc,$rootScope,$mdDialog,clusterSvc){var root={supervisor_setting:{}};return root.getAppSupervisorSetting=function(app_id){return root.supervisor_setting[app_id]},root.fetchAppSupervisorSetting=function(app_id,server_id,sys_user){var deferred=$q.defer(),requestId="getAppSupervisorSetting_"+app_id,queryString="?server_id="+server_id+"&app_id="+app_id,result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.get_appSupervisorSetting+queryString,null,requestId);return result.then(function(response){root.supervisor_setting[app_id]=response,deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},root.postAppSupervisorSetting=function(app_id,server_id,queue_list){var deferred=$q.defer(),requestId="postAppSupervisorSetting_"+app_id,data={app_id:app_id,server_id:server_id,queues_list:queue_list?queue_list:{}},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.post_appSupervisorSetting,data,requestId);return result.then(function(response){root.supervisor_setting[app_id].queues_list=response.queues_list,deferred.resolve(root.supervisor_setting[app_id].queues_list)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg?toastrSvc.error(errors_msg):toastrSvc.error("Unexpected error has occurred ")}),deferred.promise},root.deleteAppSupervisorSetting=function(app_id,server_id,queue_id){var deferred=$q.defer(),data={app_id:app_id,server_id:server_id},result=consoleApiSvc.callAPI("DELETE","api/v1/app/supervisor/"+queue_id,data);return result.then(function(response){root.supervisor_setting[app_id].queues_list=response,deferred.resolve(root.supervisor_setting[app_id].queues_list)},function(response){deferred.reject(response);var errors_msg="";angular.forEach(response.data,function(errors){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),""!=errors_msg?toastrSvc.error(errors_msg):toastrSvc.error("Unexpected error has occurred ")}),deferred.promise},root}angular.module("cgConsole").factory("supervisorSvc",["serverMessages","consoleApiSvc","$state","toastrSvc","$http","$q","commonSvc","$rootScope","$mdDialog","clusterSvc",supervisorSvc])}(),function(){"use strict";function toastrSvc(dataSvc,toastr,$translate,$translatePartialLoader,$rootScope,$state,$filter,toastrConfig){function getTranslatedString(translation_key,options,error_type){var server,app_id,varReaplace={};switch(angular.isDefined(options.placeholders)&&options.placeholders.length>0&&angular.forEach(options.placeholders,function(value){angular.isDefined(options.server_id)?(server=dataSvc.getServerById(options.server_id),"label"===value?varReaplace[value]="<a href='"+$state.href("server_detail_access",{id:server.id})+"'>"+dataSvc.getServerById(options.server_id)[value]+"</a>":varReaplace[value]=dataSvc.getServerById(options.server_id)[value],angular.isObject(value)&&angular.forEach(value,function(val,key){varReaplace[key]=val})):angular.isDefined(options.app_id)?angular.forEach(dataSvc.getServers(),function(server){angular.forEach(server.apps,function(app){parseInt(app.id)===parseInt(options.app_id)&&(app_id=parseInt(options.app_id),"label"===value&&(varReaplace[value]="<a href='"+$state.href("app_detail_access",{id:app_id})+"'>"+app[value]+"</a>"),angular.isObject(value)&&angular.forEach(value,function(val,key){varReaplace[key]=val}))})}):angular.forEach(value,function(val,key){varReaplace[key]=val})}),error_type){case"success":toastr.success(dataSvc.translateMessage(translation_key,varReaplace),"Success");break;case"error":toastr.error(dataSvc.translateMessage(translation_key,varReaplace),"Error");break;case"info":toastr.info(dataSvc.translateMessage(translation_key,varReaplace),"Info");break;case"warning":toastr.warning(dataSvc.translateMessage(translation_key,varReaplace),"Warning")}}var root={toaster:{},translatedString:"",translation_key:"",varReaplace:""};(function(){function load(fileName){$translatePartialLoader.addPart(fileName),$translate.refresh()}var instance=!1;return{getInstance:function(fileName){return instance||(instance=!0,load(fileName)),instance}}})();return root.setToasterTimeout=function(message){angular.isDefined(message)&&(message.length>500?toastrConfig.timeOut=35e3:message.length>350&&message.length<=500?toastrConfig.timeOut=3e4:message.length>200&&message.length<=350&&(toastrConfig.timeOut=2e4),message.length>200&&(toastrConfig.extendedTimeOut=1e4))},root.success=function(message,options){root.setToasterTimeout(message),angular.isDefined(options)?0!=options.length&&getTranslatedString(message,options,"success"):toastr.success(message,"Success")},root.error=function(message,options){message?root.setToasterTimeout(message):message="Unfortunately, operation failed due to unexpected error.",angular.isDefined(options)?0!=options.length&&getTranslatedString(message,options,"error"):toastr.error(message,"Error")},root.info=function(message,options){root.setToasterTimeout(message),angular.isDefined(options)?0!=options.length&&getTranslatedString(message,options,"info"):toastr.info(message,"Info")},root.warning=function(message,options){root.setToasterTimeout(message),angular.isDefined(options)?0!=options.length&&getTranslatedString(message,options,"warning"):toastr.warning(message,"Warning")},root}angular.module("cgConsole").factory("toastrSvc",["dataSvc","toastr","$translate","$translatePartialLoader","$rootScope","$state","$filter","toastrConfig",toastrSvc])}(),function(){"use strict";function userActivitySvc(consoleApiSvc,$mdDialog,$state,$timeout,serverViewPath,commonSvc,gdprConsentSvc,analyticsSvc,$sce){function leadScoringCtrl($mdDialog,$sce,user){var vm=this;vm.preloader=!0;var userDetails=consoleApiSvc.user.userDetails;vm.message="Please wait while the form is loading...",vm.formUrl="https://calendly.com/"+user+"/15min?utm_source="+userDetails.email+"&utm_medium="+userDetails.type,vm.formHtml='<iframe class="md-black" id="clendlyTemplate" flex="100" frameborder="0" height="450" allowtransparency="true" src="'+vm.formUrl+'"></iframe>',vm.formHtml=$sce.trustAsHtml(vm.formHtml),$timeout(function(){vm.preloader=!1},2500),vm.remove=function(){$mdDialog.hide()}}function personaController($mdDialog){var vmc=this;vmc.personaError=!1,vmc.params={personaId:null},vmc.personasList=[{id:12,label:"Digital <br hide-xs> Agency"},{id:13,label:"Ecommerce"},{id:14,label:"Other <br hide-xs> Businesses"},{id:15,label:"Blogger"},{id:16,label:"Freelance <br hide-xs> Developer <br hide-xs> /Designer"}],vmc.cancel=function(){vmc.params.action="cancel",vmc.params.personaId=null,$mdDialog.cancel(vmc.params)},vmc.selectPersona=function(id){vmc.params.personaId=id,vmc.personaError=!1},vmc.submit=function(){return vmc.params.action="submit",null===vmc.params.personaId?(vmc.personaError=!0,!1):void $mdDialog.hide(vmc.params)}}function migrationController($mdDialog){var vmc=this;vmc.params={},vmc.cancel=function(){vmc.params.action="cancel",$mdDialog.cancel(vmc.params)},vmc.billingDetails=function(){vmc.params.action="submit",$state.go("account_credit_card",{auth:"yes"}),$mdDialog.hide(vmc.params)}}var root={isLeadScoringEnabled:!1,leadScoringCountryList:["uk","united kingdom","argentina","brazil","cambodia","canada","colombia","costa rica","dominican republic","ecuador","chile","jamaica","martinique","mexico","venezuela","panama","peru","puerto rico","united states"],managerMapping:["shahzad-cloudways","emmad-cloudways"],managerTemplate:{"shahzad-cloudways":{account:"shahzad-cloudways",name:"Shahzad Hasan",title:"I AM SHAHZAD, YOUR DEDICATED ACCOUNT MANAGER",descScheduled:"I am here to help you with any kind of queries you might have. Feel free to schedule a call so that I can help you with understanding how you can make the most out of Cloudways. It'll be a nice way to get to know about your hosting requirements.",descScheduleLater:'No worries! You can always schedule a call at a more convenient time from the<a href="account/call_schedule" class="glb-link"> Account</a>section.'},"emmad-cloudways":{account:"emmad-cloudways",name:"Emmad Abbasi",title:"I AM EMMAD, YOUR DEDICATED ACCOUNT MANAGER",descScheduled:"I am here to help you with any kind of queries you might have. Feel free to schedule a call so that I can help you with understanding how you can make the most out of Cloudways. It'll be a nice way to get to know about your hosting requirements.",descScheduleLater:'No worries! You can always schedule a call at a more convenient time from the<a href="account/call_schedule" class="glb-link"> Account</a>section.'}}};return root.getUserTag=function(tag){var user_tag;return user_tag||angular.forEach(consoleApiSvc.user.userDetails.user_tags_name,function(item){var regex=new RegExp(tag,"ig");regex.test(item)&&!user_tag&&(user_tag=item)}),user_tag},root.checkUserPersona=function($event){var persona_tag=root.getUserTag("personas");root.userPersonaUiData=angular.copy(commonSvc.getUserUiData("cwAfterLoginPersonaPopup"));var userUICount=null!==root.userPersonaUiData?parseInt(root.userPersonaUiData.count):0,currentDate=moment(new Date),signupDate=moment(consoleApiSvc.user.userDetails.date),days=currentDate.diff(signupDate,"days"),data={};if(days>30&&angular.isUndefined(persona_tag)&&3>userUICount&&consoleApiSvc.server.serverData&&Object.keys(consoleApiSvc.server.serverData).length>0&&(null===root.userPersonaUiData||"0"===root.userPersonaUiData.value))switch(userUICount){case 0:case 2:root.showPersonaModal();break;case 1:root.submitSignupPersona(data)}},root.submitSignupPersona=function(data){var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateUserPersona,data,"updateUserPersona");result.then(function(response){$mdDialog.hide()},function(response){$mdDialog.hide()})},root.showPersonaModal=function(){$mdDialog.show({controller:personaController,controllerAs:"vmc",templateUrl:serverViewPath+"partials/signup-persona.html",parent:angular.element(document.body),clickOutsideToClose:!1}).then(function(data){root.submitSignupPersona(data)},function(data){root.submitSignupPersona(data)})},root.checkUserMigration=function(){root.userMigrationUiData=angular.copy(commonSvc.getUserUiData("cwAfterLoginMigrationPopup"));var userUICount=null!==root.userMigrationUiData?parseInt(root.userMigrationUiData.count):0,data={};2>userUICount&&consoleApiSvc.server.serverData&&Object.keys(consoleApiSvc.server.serverData).length>0&&(null===root.userMigrationUiData||0===parseInt(root.userMigrationUiData.value))&&(userUICount?root.showMigrationModal(data):root.submitMigration(data))},root.showMigrationModal=function(){var config={controller:migrationController,controllerAs:"vmc",templateUrl:serverViewPath+"partials/migration-modal.html",parent:angular.element(document.body),clickOutsideToClose:!1};$timeout(function(ev){$mdDialog.show(config).then(function(data){root.submitMigration(data)},function(data){root.submitMigration(data)})},1e3)},root.submitMigration=function(data){var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.updateUserMigration,data,"updateUserMigration");result.then(function(response){$mdDialog.hide()},function(response){$mdDialog.hide()})},root.mpEventAgencyPlatformKbLinks=function(persona,action,link){var data={action:action};"agency"==persona&&(data.event_name="agency_platform_kblinks"),"eComm"==persona&&(data.event_name="ecommerce_platform_kblinks","openLiveChat"==link&&cookieConsent.isServiceEnabled("functional")&&parent.LC_API.open_chat_window()),analyticsSvc.addAnalytics(data)},root.getLeadScoringManager=function(){var $result=!1,userDetails=consoleApiSvc.user.userDetails,signupCountry=userDetails.country_signup,isSignupCountryExist=!1;return angular.isDefined(signupCountry)&&null!==signupCountry&&(signupCountry=signupCountry.toLowerCase(),isSignupCountryExist=-1!==root.leadScoringCountryList.indexOf(signupCountry)),userDetails.is_verified&&userDetails.lead_scoring&&angular.isUndefined(userDetails.is_account_console_disabled)&&(root.getUserTag("signup-pricing-c")||root.getUserTag("signup-pricing-d")||root.getUserTag("signup-pricing-e"))&&($result=isSignupCountryExist?root.managerMapping[0]:root.managerMapping[1],root.isLeadScoringEnabled=!0),$result},root.scheduleCall=function(event,user){$mdDialog.show({controller:leadScoringCtrl,controllerAs:"vm",templateUrl:serverViewPath+"partials/lead-scoring-modal.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{user:user}})},window.PubSub.subscribe("appBootCompleted",function(msg,data){gdprConsentSvc.isGdprModalShown||(commonSvc.isMasterUser()?root.checkUserPersona():"primary"!==consoleApiSvc.user.userDetails.type||consoleApiSvc.isTrialUserExpired||root.checkUserMigration())}),root}angular.module("cgConsole").factory("userActivitySvc",["consoleApiSvc","$mdDialog","$state","$timeout","serverViewPath","commonSvc","gdprConsentSvc","analyticsSvc","$sce",userActivitySvc])}(),function(){"use strict";function userVerificationSvc(consoleApiSvc,$state,$injector,$timeout,memberSvc){var root={code:"",data:"",email:"",userCountry:"",phoneCodes:{},verifyData:{},emailExist:null,isChameleonModalShown:1,nonRestrictedStates:["server_create","verifying_phone","verifying_code","verifying_email","account_detail","account_credit_card","account_billing","account_invoice","account_fund","account_referral","server","apps","team","projects","team_create","create_project","integration_add","alert_list","integration_list","addons"]};return root.setUserCode=function(code){root.code=code},root.getUserCode=function(){return root.code},root.setUserData=function(data){return""===data||angular.isUndefined(data)?root.data=void 0:root.data=data,root.data},root.getUserData=function(){return root.data},root.setUserEmail=function(data){return""===data||angular.isUndefined(data)?root.data=void 0:root.email=data,root.email},root.getUserEmail=function(){return root.email},root.emailExistSetter=function(value){return angular.isDefined(value)&&(root.emailExist=value),root.emailExist},root.emailExistGetter=function(){return root.emailExist},root.getUserVerificationDetail=function(){return root.verifyData},root.redirectToVerificationPage=function(state){return!consoleApiSvc.user.userDetails.is_verified&&consoleApiSvc.user.userDetails.is_email_verify_pending&&consoleApiSvc.user.userDetails.is_sms_verify_pending&&"verifying_code"!=state?void $state.go("verifying_phone"):consoleApiSvc.user.userDetails.is_verified||consoleApiSvc.user.userDetails.is_email_verify_pending||!consoleApiSvc.user.userDetails.is_sms_verify_pending||"verifying_code"==state?consoleApiSvc.user.userDetails.is_verified||!consoleApiSvc.user.userDetails.is_email_verify_pending||consoleApiSvc.user.userDetails.is_sms_verify_pending?void 0:void $state.go("verifying_email"):void $state.go("verifying_phone")},root.isDisableAccountPages=function(){return!(!angular.isDefined(consoleApiSvc.user.userDetails.is_verified)||consoleApiSvc.user.userDetails.is_verified||!consoleApiSvc.user.userDetails.is_sms_verify_pending&&!consoleApiSvc.user.userDetails.is_email_verify_pending)},root.showSignupVerificationBar=function(){return!memberSvc.isMemberLoggedIn()&&angular.isDefined(consoleApiSvc.user.userDetails.is_verified)&&!consoleApiSvc.user.userDetails.is_verified&&!consoleApiSvc.user.account_console_disabled&&-1===consoleApiSvc.current.url.indexOf("/verifying/")},root.restrictPagesForUnVerifiedUsers=function(){return!(!angular.isDefined(consoleApiSvc.user.userDetails.is_verified)||consoleApiSvc.user.userDetails.is_verified||-1!==root.nonRestrictedStates.indexOf(consoleApiSvc.current.name))},root.loadMouseFlow=function(user){if(angular.isDefined(user.is_verified)&&!user.is_verified){var head=document.getElementsByTagName("head")[0],host="https:"==document.location.protocol?"https://":"http://",mouseFlow=document.createElement("script");$timeout(function(){mouseFlow.setAttribute("async","true"),mouseFlow.setAttribute("type","text/javascript"),mouseFlow.setAttribute("src",host+"cdn.mouseflow.com/projects/48e356c4-6829-4aff-8960-0078131f40b6.js"),head.appendChild(mouseFlow)},2e3)}},root.isBtnDisable=function(){return!(!angular.isDefined(consoleApiSvc.user.userDetails.is_verified)||consoleApiSvc.user.userDetails.is_verified||!consoleApiSvc.user.userDetails.is_sms_verify_pending&&!consoleApiSvc.user.userDetails.is_email_verify_pending)},window.PubSub.subscribe("appBootCompleted",function(msg,data){root.loadMouseFlow(consoleApiSvc.user.userDetails)}),root}angular.module("cgConsole").factory("userVerificationSvc",["consoleApiSvc","$state","$injector","$timeout","memberSvc",userVerificationSvc])}(),function(){"use strict";function viralloopsSvc(consoleApiSvc,commonSvc,analyticsSvc,$q,$mdDialog,serverViewPath,$timeout,$interval,$rootScope,$location,userActivitySvc){function viralLoopController($mdDialog){var vmc=this;vmc.cancel=function(){$mdDialog.hide()}}var root={},showVLHeartIcon=!1,segmentUser="",responseAPI=!1;root.viralLoopOpen=function(fromPlace){if(root.isCohartBEcommUser(fromPlace))return!1;var vlMappings={A:{first_login:4,nps:3,header:1,invoice:2,funds:1,server:5},B:{first_login:4,nps:3,header:1,invoice:2,funds:1,server:5},R:{first_login:4,nps:3,header:1,invoice:2,funds:1,server:5}};root.showContent(vlMappings[segmentUser][fromPlace]),$("#viral_loop").show(),$("html").css("overflow-y","scroll"),$("body").addClass("remove-body-scroll");var mp_data={event_name:"vl_opened",location:fromPlace};analyticsSvc.addAnalytics(mp_data)},root.isCohartBEcommUser=function(page){var result=!1,userDetails=consoleApiSvc.user.userDetails,cohartB=parseInt(userDetails.id)%2,personaEcommerce=userActivitySvc.getUserTag("personas-smb-ecommerce");return"trial"===userDetails.customer_type&&cohartB&&angular.isDefined(personaEcommerce)&&personaEcommerce&&"server"===page&&(result=!0),result},root.showContent=function(id){1==id?($("#forfilteredHeader").show(),$("#forfilteredInvoice").hide(),$("#forfilteredNps").hide(),$("#forfilteredLogin").hide(),$("#forfilteredServer").hide()):2==id?($("#forfilteredHeader").hide(),$("#forfilteredInvoice").show(),$("#forfilteredNps").hide(),$("#forfilteredLogin").hide(),$("#forfilteredServer").hide()):3==id?($("#forfilteredHeader").hide(),$("#forfilteredInvoice").hide(),$("#forfilteredNps").show(),$("#forfilteredLogin").hide(),$("#forfilteredServer").hide()):4==id?($("#forfilteredHeader").hide(),$("#forfilteredInvoice").hide(),$("#forfilteredNps").hide(),$("#forfilteredLogin").show(),$("#forfilteredServer").hide()):5==id&&($("#forfilteredHeader").hide(),$("#forfilteredInvoice").hide(),$("#forfilteredNps").hide(),$("#forfilteredLogin").hide(),$("#forfilteredServer").show())},root.registerUser=function(){$timeout(function(){void 0==campaign.user&&"primary"==consoleApiSvc.user.userDetails.type?(campaign.identify({email:consoleApiSvc.user.userDetails.email,firstname:consoleApiSvc.user.userDetails.name},function(){}),root.checkIfUserCreated()):campaign.user.email!=consoleApiSvc.user.userDetails.email?campaign.logout():root.setViralLoopsVariables()},5e3)};var initUserCheck=0;root.checkIfUserCreated=function(){angular.isDefined(campaign.user)&&angular.isDefined(campaign.user.email)?root.setViralLoopsVariables():(10>=initUserCheck&&$timeout(function(){root.checkIfUserCreated()},1e3),initUserCheck--)},root.setViralLoopsVariables=function(){showVLHeartIcon=!0,$rootScope.publish("showVLHeartIcon"),$timeout(function(){root.checkVLShown()},1e3)},root.getSegmentUser=function(){var deferred=$q.defer();return angular.isDefined(consoleApiSvc.user.userDetails.is_verified)&&!consoleApiSvc.user.userDetails.is_verified?(deferred.resolve(),deferred.promise):("primary"==consoleApiSvc.user.userDetails.type&&consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.viralLoopsSegmentCheck,null).then(function(response){segmentUser=response.segment,responseAPI=response,deferred.resolve()},function(response){deferred.reject()}),deferred.promise)};var initialPolling=0,waitForSegmentGet=0;root.viralLoopSegmentCheck=function(){""==segmentUser&&5>waitForSegmentGet&&($timeout(function(){root.viralLoopSegmentCheck()},4e3),waitForSegmentGet++),"A"!=segmentUser&&"B"!=segmentUser||root.registerUser(),"R"==segmentUser&&(responseAPI.wait?$timeout(function(){5>initialPolling&&root.getSegmentUser().then(function(){root.viralLoopSegmentCheck()}),initialPolling++},15e3):root.registerUser(),root.showCustomModel())},root.isSegmentededUser=function(){return showVLHeartIcon},root.checkVLShown=function(){var urlNow=$location.absUrl().split("?")[0];if(angular.isDefined(consoleApiSvc.user.userDetails)&&angular.isDefined(consoleApiSvc.users_ui_data)){if(urlNow.indexOf("account/credit_card")>=0)consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.viralLoopsMakeVisible,null);else if(!consoleApiSvc.user.userDetails.is_nps_visible&&"A"==segmentUser){var showVL=!0;0==consoleApiSvc.users_ui_data.length?(root.viralLoopOpen("first_login"),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.viralLoopsMakeVisible,null)):angular.forEach(consoleApiSvc.users_ui_data,function(value,key){"cwViralLoops"==value.key&&(showVL=!1),consoleApiSvc.users_ui_data.length-1==key&&showVL&&(root.viralLoopOpen("first_login"),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.viralLoopsMakeVisible,null))})}}else $timeout(function(){root.checkVLShown()},1e3)};var callShowCustomModel=0;return root.showCustomModel=function(){if(0==callShowCustomModel){if(angular.isDefined(consoleApiSvc.users_ui_data)){var showVLCustom=!0;0==consoleApiSvc.users_ui_data.length?(root.showViralLoopModal(),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.viralLoopsMakeVisible,null)):angular.forEach(consoleApiSvc.users_ui_data,function(value,key){"cwVLCustomModel"==value.key&&(showVLCustom=!1),consoleApiSvc.users_ui_data.length-1==key&&showVLCustom&&(root.showViralLoopModal(),consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.viralLoopsMakeVisible,null))})}else $timeout(function(){root.showCustomModel()},1e3);callShowCustomModel=1}},root.showForSegment=function(){return!!showVLHeartIcon},root.checkIfDifferetUser=function(){if(angular.isDefined(campaign)&&angular.isDefined(campaign.user)&&angular.isDefined(campaign.user.email)){var emailCheck="";if("secondary"==consoleApiSvc.user.userDetails.type){var memberId=consoleApiSvc.user.userDetails.mapping_id;angular.forEach(consoleApiSvc.user.userDetails.memberAccounts,function(value,key){memberId==value.id&&(emailCheck=value.email)})}else emailCheck=consoleApiSvc.user.userDetails.email;campaign.user.email!=emailCheck&&(campaign.logout(),$(".heart-vl").hide())}},root.getUserChameleonShow=function(){var returnObj={loginAfter:!0,firstServer:!0};return"B"==segmentUser&&(returnObj.firstServer=!1),"R"==segmentUser&&(returnObj.loginAfter=!1,returnObj.firstServer=!1),returnObj},root.changePageVL=function(page){0==page?($("#vlRewards").removeClass("active"),$("#vlInvite").addClass("active"),$("#firstPage").fadeIn(800),$("#secondPage").hide()):($("#vlInvite").removeClass("active"),$("#vlRewards").addClass("active"),$("#firstPage").hide(),$("#secondPage").fadeIn(800))},root.hideVL=function(){$("#viral_loop").hide(),$("html").removeAttr("style"),$("body").removeClass("remove-body-scroll")},root.showViralLoopModal=function(ev){$mdDialog.show({controller:viralLoopController,templateUrl:serverViewPath+"partials/viral-loop-modal.html",controllerAs:"vmc",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0})},window.PubSub.subscribe("appBootCompleted",function(msg,data){$timeout(function(){if(cookieConsent.isServiceEnabled("functional")){
var campaignInterval=!1;!function(){var n=window.VL=window.VL||{};n.instances=n.instances||{},n.invoked?window.console&&console.error&&console.error("VL snippet loaded twice."):(n.invoked=!0,n.load=function(e,o,t){var i={};i.publicToken=e,i.config=o||{};var c=document.createElement("script");c.type="text/javascript",c.id="vrlps-js",c.defer=!0,c.src="https://app.viral-loops.com/client/vl/vl.min.js";var s=document.getElementsByTagName("script")[0];return s.parentNode.insertBefore(c,s),c.onload=function(){n.setup(i),n.instances[e]=i},i.identify=i.identify||function(n,e){i.afterLoad={identify:{userData:n,cb:e}}},i.pendingEvents=[],i.track=i.track||function(n,e){i.pendingEvents.push({event:n,cb:e})},i.pendingHooks=[],i.addHook=i.addHook||function(n,e){i.pendingHooks.push({name:n,cb:e})},i.$=i.$||function(n){i.pendingHooks.push({name:"ready",cb:n})},i})}(),window.campaign=VL.load(window.viralLoopsKey,{autoLoadWidgets:!0}),campaignInterval=$interval(function(){angular.isDefined(campaign)&&campaign&&(root.viralLoopSegmentCheck(),$interval.cancel(campaignInterval))},1e3)}},500)}),root}angular.module("cgConsole").factory("viralloopsSvc",["consoleApiSvc","commonSvc","analyticsSvc","$q","$mdDialog","serverViewPath","$timeout","$interval","$rootScope","$location","userActivitySvc",viralloopsSvc])}(),function(){"use strict";function wirecardSvc(consoleApiSvc,accountSvc,serverViewPath,$q,$state,toastrSvc,$interval,$timeout,$mdDialog){function ccAuthPopUpController($mdDialog,$scope,consoleApiSvc,data,deferred){var vmc=this;vmc.data=data,vmc.state="init",vmc.preloader=!0,vmc.message="Please wait for while... loading assets",vmc.isClose=!1,vmc.headingText=data.headingText||"Credit Card Authorization",vmc.closePopup=function(){vmc.isClose=!0,vmc.state="cancel",$mdDialog.hide()},$scope.$watch("vmc.state",function(){switch(vmc.state){case!1:case"failed":deferred.reject(),vmc.isClose||$mdDialog.hide();break;case"success":deferred.resolve(),$mdDialog.hide()}})}var root={pooling:{storage:!1,payment:!1}};return root.resetCCAuthProcess=function(){$("#wirecard_storage_script").remove(),$interval.cancel(root.pooling.storage),$timeout.cancel(root.pooling.payment),root.pooling.storage=!1,root.pooling.payment=!1},root.ccAuthPopUp=function(data,ev){var deferred=$q.defer();return $mdDialog.show({controller:ccAuthPopUpController,templateUrl:serverViewPath+"partials/wirecard-cc_auth-popup.html",controllerAs:"vmc",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0,escapeToClose:!0,locals:{data:data,deferred:deferred}}).then(function(){root.resetCCAuthProcess()},function(){deferred.reject(),root.resetCCAuthProcess()}),deferred.promise},root}angular.module("cgConsole").factory("wirecardSvc",["consoleApiSvc","accountSvc","serverViewPath","$q","$state","toastrSvc","$interval","$timeout","$mdDialog",wirecardSvc])}(),function(){"use strict";angular.module("guest").constant("userViewPath","js/app/modules/guest/views/").constant("allowedUsers",[""])}(),function(){"use strict";function changePasswordController(consoleApiSvc,$stateParams,userViewPath,toastrSvc,$state,translation,$rootScope){var vm=this;$rootScope.publish("cwNotUserLoggedIn"),vm.activateMemberAccount=!1,"activateAccount"===$state.current.name&&(vm.showPasswordResetTemplate=!0,vm.activateMemberAccount=!0),vm.showSuccessMessage=!1,vm.changepasswordForm="changepasswordForm",vm.errors={},vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.changePassword=function(){var data={password:vm.user.password,gdpr:vm.user.gdpr===!0?1:0},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.user_password,data,"changepassword_"+vm.user.email);result.then(function(data){data.status&&(vm.showSuccessMessage=!0)},function(response){angular.isDefined(response.data.error)&&toastrSvc.error(response.data.error)})}}angular.module("guest").controller("guest.changePasswordController",["consoleApiSvc","$stateParams","userViewPath","toastrSvc","$state","translation","$rootScope",changePasswordController])}(),function(){"use strict";function errorController(userViewPath,commonSvc,guestSvc,translation,$rootScope){function addFacebookPixelCode(){return cookieConsent.isServiceEnabled("marketing")&&"live"===window.APP_ENV?void(guestSvc.fbReferenceUserTrack&&(vm.fbReferenceUserTrack=guestSvc.fbReferenceUserTrack,guestSvc.fbReferenceUserTrack=!1,!function(f,b,e,v,n,t,s){f.fbq||(n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},f._fbq||(f._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],t=b.createElement(e),t.async=!0,t.src=v,s=b.getElementsByTagName(e)[0],s.parentNode.insertBefore(t,s))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","1470772573229317"),fbq("track","PageView"),fbq("track","Lead"))):!1}var vm=this;addFacebookPixelCode(),$rootScope.publish("cwNotUserLoggedIn"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Signup","Blocked from (Currently not available)"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"signUpError"),guestSvc.getUserData(""),vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"}}angular.module("guest").controller("guest.errorController",["userViewPath","commonSvc","guestSvc","translation","$rootScope",errorController])}(),function(){"use strict";function forgotPasswordController(consoleApiSvc,$window,toastrSvc,$state,$stateParams,userViewPath,guestSvc,translation,$rootScope){var vm=this;vm.showSuccessMessage=!1,vm.forgotpassword="forgotpassword",vm.errors={},vm.user={},vm.user.email="",vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.resetPassword=function(){if(vm.showSuccessMessage)return void(vm.errors.already_sent="We have already sent Reset Instructions on ["+vm.user.email+"]");var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.forgot_password,vm.user,"resetPassword_"+vm.user.email);result.then(function(response){vm.showSuccessMessage=!0},function(response){vm.forgotError=void 0;var error;angular.isDefined(response.data.error)&&angular.isDefined(response.data.error.message)?error=response.data.error.message:angular.isDefined(response.data.email)&&(error=response.data.email[0].message),"user_inactive"===error||"cancelled_account"===error?vm.forgotError=error:"child_disabled"===error?vm.forgotError=error:angular.isDefined(error)&&(vm.forgotpassword.email.$setValidity("email",!1),vm.errors.email=error)})}}angular.module("guest").controller("guest.forgotPasswordController",["consoleApiSvc","$window","toastrSvc","$state","$stateParams","userViewPath","guestSvc","translation","$rootScope",forgotPasswordController])}(),function(){"use strict";function signupController(consoleApiSvc,$state,userViewPath,guestSvc,$stateParams,commonSvc,$rootScope,toastrSvc,$q,translation,accountSvc){function validatePromoCode(promoCode){vm.isPromoCodeExpired=!1,vm.isValidPromo=!1,clearTimeout(vm.promoCodeTimer),angular.isDefined(promoCode)&&promoCode&&promoCode.length>3&&(vm.promoCodeTimer=setTimeout(function(){var url=consoleApiSvc.API.URL.validatePromoCode+"?promo="+promoCode,result=consoleApiSvc.callAPI("GET",url,"promoCode_"+promoCode);result.then(function(response){vm.isValidPromo=!0,vm.isPromoCodeExpired=!1},function(response){vm.isValidPromo=!1,vm.isPromoCodeExpired=!0,vm.isPromoCode_message=response.data.message})},400))}function addFacebookPixelCode(){return cookieConsent.isServiceEnabled("marketing")&&"live"===window.APP_ENV?(vm.isLiveEnv=!0,!function(f,b,e,v,n,t,s){f.fbq||(n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},f._fbq||(f._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],t=b.createElement(e),t.async=!0,t.src=v,s=b.getElementsByTagName(e)[0],s.parentNode.insertBefore(t,s))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","1470772573229317"),void fbq("track","PageView")):!1}var vm=this;vm.isLiveEnv=!1,addFacebookPixelCode(),"get-started"===$state.current.name&&($(window).width()>600?$("html").css("background-color","#184a63"):$("html").css("background-color","#1f6b93")),guestSvc.emailExistGetter()&&(guestSvc.emailExistSetter(null),toastrSvc.error("The email has already been taken.")),vm.data={},vm.passwordChanged=!1,vm.signupForm="signupForm",vm.errors={},vm.processing=!1,vm.data.email=commonSvc.getParameterByName("om_email"),vm.alpha_spaces=consoleApiSvc.getRegex("alpha_spaces"),vm.signup_vip=!1,vm.current_pageName=$state.current.name,vm.isPerformanceCookie=!0,vm.nameError={},vm.personas=[{id:12,label:"Digital Agency"},{id:13,label:"Ecommerce"},{id:14,label:"Other Businesses"},{id:16,label:"Blogger"},{id:15,label:"Freelance Developer/Designer"}],vm.signup_prices=[{id:"a",label:"$0 - $50"},{id:"b",label:"$50 - $250"},{id:"c",label:"$250 - $1000"},{id:"d",label:"$1000 - $5000"},{id:"e",label:"$5000 above"}],cookieConsent.isServiceEnabled("performance")||(vm.isPerformanceCookie=!1),vm.promo=!1,$stateParams.coupon?(vm.promo=!1,vm.data.promo=$stateParams.coupon,$(".promocode-focus").focus(),validatePromoCode($stateParams.coupon)):vm.promo=!0,vm.showPromoCode=!0;var checkVLCookie=commonSvc.getCookie("virlLoopCookie");checkVLCookie&&""!=checkVLCookie&&(vm.showPromoCode=!1),angular.isDefined(consoleApiSvc.isHelloBarActive)&&angular.isDefined(consoleApiSvc.isHelloBarActive.guest)&&consoleApiSvc.isHelloBarActive.guest&&$("body").addClass("mandrill-helloBar-enable"),""!=commonSvc.getCookie("social_error")&&(toastrSvc.error(commonSvc.getCookie("social_error")),commonSvc.removeCookie("social_error")),vm.updateName=function(name){return vm.nameError={},angular.isUndefined(vm.data.name)||angular.isUndefined(vm.data.last_name)?!1:"fname"===name&&vm.data.name===vm.data.last_name?(vm.nameError[name]=!0,void(vm.nameError.message="First name should not be same as last name.")):void("lname"===name&&vm.data.name===vm.data.last_name&&(vm.nameError[name]=!0,vm.nameError.message="Last name should not be same as first name."))},vm.togglePromo=function(){vm.promo=!vm.promo},vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.signup=function(){if(!vm.processing){if(!vm.signupForm.$valid){angular.forEach(vm.signupForm.$error,function(field){angular.forEach(field,function(errorField){errorField.$setTouched()})});var top=$("div.signup-form").position().top;return void $("html,body").animate({scrollTop:top},500,"swing")}if(angular.equals({},vm.nameError)&&vm.isPromoCodeExpired!==!0&&vm.isValidPromo!==!1&&!vm.signupForm.$invalid){vm.processing=!0;var data={email:vm.data.email,first_name:vm.data.name,last_name:vm.data.last_name,password:vm.data.password,gdpr_consent:vm.data.gdpr};angular.isDefined(vm.data.promo)&&(data.promo_code=vm.data.promo),angular.isDefined(vm.data.persona)&&""!==vm.data.persona&&(data.persona_tag_id=vm.data.persona),angular.isDefined(vm.data.signup_price)&&""!==vm.data.signup_price&&(data.signup_price_id=vm.data.signup_price),data.tag_id="get-started"===$state.current.name?34:33,data.signup_vip=vm.signup_vip,data.http_referrer=document.referrer;var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.signup+window.location.search,data,"signup_"+vm.data.email);result.then(function(response){vm.processing=!1,guestSvc.setUserData(response.data.data);var segment=response.data.signup_segment,note=angular.isDefined(response.data.sms_verified)&&!response.data.sms_verified?"Got verified by phone and email address - Signup segment "+segment:"Got verified email address - Signup segment "+segment,noteTag=angular.isDefined(response.data.sms_verified)&&!response.data.sms_verified?angular.isDefined(segment)&&"C"===segment?"signupGotCSVerification":"signUpGotEmailAndPhone":"signUpGotEmail";if(commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Signup",note),commonSvc.gtmEventTrack(guestSvc.getUserData(),noteTag),commonSvc.gtmEventTrack(guestSvc.getUserData(),"signUpSuccess"),accountSvc.setSASPixelCode(response.data),"live"===window.APP_ENV&&(guestSvc.fbReferenceUserTrack=!0,cookieConsent.isServiceEnabled("performance")&&response&&angular.isDefined(response.data)&&angular.isDefined(response.data.user)&&angular.isDefined(response.data.user.id_users)))try{angular.isDefined(__adroll_loaded)&&__adroll_loaded&&(window.adroll_custom_data={USER_ID:response.data.user.id_users},__adroll.record_user({adroll_segments:"4085fb27"})),angular.isDefined(_mktz)&&(console.log("mktz"),_mktz.push(["_Goal","signup",response.data.user.id_users]))}catch(err){}angular.isDefined(segment)?signupSegments["signupSegment"+segment](response):""},function(response){vm.processing=!1,angular.isDefined(response.data.message)?toastrSvc.error(response.data.message):(angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)&&(vm.signupForm[key].$setValidity(key,!1),vm.errors[key]=error.message)})}),angular.isDefined(vm.errors.promo_code)&&(vm.errors.promo_code="Wrong Promo code ( if you don't have Promo code, please leave it blank )"))})}}},vm.change_case=function(){vm.data.email&&vm.data.email.toLowerCase&&(vm.data.email=vm.data.email.toLowerCase())},vm.validatePromoCode=function(promoCode){vm.isPromoCodeExpired=!1,vm.isValidPromo=!1,clearTimeout(vm.promoCodeTimer),angular.isDefined(promoCode)&&promoCode&&promoCode.length>3?vm.promoCodeTimer=setTimeout(function(){var url=consoleApiSvc.API.URL.validatePromoCode+"?promo="+promoCode,result=consoleApiSvc.callAPI("GET",url,"promoCode_"+promoCode);result.then(function(response){vm.isValidPromo=!0,vm.isPromoCodeExpired=!1},function(response){vm.isValidPromo=!1,vm.isPromoCodeExpired=!0,vm.isPromoCode_message=response.data.message})},400):(vm.isPromoCodeExpired=!1,vm.isValidPromo=void 0,vm.signupForm.promo_code.$setValidity("promo_code",!0))};var signupSegments={signupSegmentA:function(response){consoleApiSvc.user.loaderMessage=!0,consoleApiSvc.user.is_verified_pending=!0,commonSvc.createCookie("cwLoaderMessage",!0,1),$("body #livechat-eye-catcher").hide(),$("body #chat-widget-container").hide(),$("#cw-app_loader").show(),$("#angular-app").hide(),$("#cw-app_container").empty(),$("body").css("background","#f2f2f2"),$state.go("server_create")},signupSegmentB:function(response){if(response.status)$state.go("signup_success");else switch(response.error_code){case"-1":angular.isDefined(response.data.code)&&guestSvc.setUserCode(response.data.code),$state.go("verify_phone");break;case"-3":$state.go("almost_there")}},signupSegmentC:function(response){angular.isDefined(response)&&$state.go("signup_verification")}}}angular.module("guest").controller("guest.signupController",["consoleApiSvc","$state","userViewPath","guestSvc","$stateParams","commonSvc","$rootScope","toastrSvc","$q","translation","accountSvc",signupController])}(),function(){"use strict";function socialSignupController(consoleApiSvc,$state,userViewPath,guestSvc,$stateParams,commonSvc,translation,accountSvc,$window){var vm=this;vm.data={password:"",code:$stateParams.code},vm.socialSignupForm="socialSignupForm",vm.errors={},vm.processing=!1,vm.personas=[{id:12,label:"Digital Agency"},{id:13,label:"Ecommerce"},{id:14,label:"Other Businesses"},{id:16,label:"Blogger"},{id:15,label:"Freelance Developer/Designer"}],vm.signup_prices=[{id:"a",label:"$0 - $50"},{id:"b",label:"$50 - $250"},{id:"c",label:"$250 - $1000"},{id:"d",label:"$1000 - $5000"},{id:"e",label:"$5000 above"}],vm.isTosChecked=!1,vm.hideShowMessage=function(){vm.isTosChecked=!vm.isTosChecked},vm.promo=!0,vm.togglePromo=function(){vm.promo=!vm.promo},vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.createPassword=function(){if(!vm.processing){angular.isDefined(vm.persona)&&""!==vm.persona&&(vm.data.persona_tag_id=vm.persona),angular.isDefined(vm.signup_price)&&""!==vm.signup_price&&(vm.data.signup_price_id=vm.signup_price),vm.processing=!0;var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.socialPassword,vm.data,"socialPassword_"+vm.data.code);result.then(function(response){vm.processing=!1,guestSvc.setUserData(response.data.data);var segment=response.data.signup_segment,note=angular.isDefined(response.data.sms_verified)&&!response.data.sms_verified?"Got verified by phone and email address - Signup segment "+segment:"Got verified email address - Signup segment "+segment,noteTag=angular.isDefined(response.data.sms_verified)&&!response.data.sms_verified?angular.isDefined(response.data.spam_user)&&response.data.spam_user?"signupGotCSVerification":"signUpGotEmailAndPhone":"signUpGotEmail";if(commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Signup",note),commonSvc.gtmEventTrack(guestSvc.getUserData(),noteTag),commonSvc.gtmEventTrack(guestSvc.getUserData(),"signUpSuccess"),accountSvc.setSASPixelCode(response.data),"live"===window.APP_ENV&&(guestSvc.fbReferenceUserTrack=!0,cookieConsent.isServiceEnabled("performance")&&response&&angular.isDefined(response.data)&&angular.isDefined(response.data.user)&&angular.isDefined(response.data.user.id_users)))try{angular.isDefined(__adroll_loaded)&&__adroll_loaded&&(window.adroll_custom_data={USER_ID:response.data.user.id_users},__adroll.record_user({adroll_segments:"4085fb27"})),angular.isDefined(_mktz)&&(console.log("mktz"),_mktz.push(["_Goal","signup",response.data.user.id_users]))}catch(err){}angular.isDefined(segment)?signupSegments["signupSegment"+segment](response):""},function(response){vm.processing=!1,angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){return angular.isDefined(error.message)&&"unique"==error.code?(guestSvc.emailExistSetter(!0),$state.go("signup")):void 0})})})}},vm.validatePromoCode=function(promoCode){vm.isPromoCodeExpired=!1,vm.isValidPromo=!1,clearTimeout(vm.promoCodeTimer),angular.isDefined(promoCode)&&promoCode&&promoCode.length>3&&(vm.promoCodeTimer=setTimeout(function(){var url=consoleApiSvc.API.URL.validatePromoCode+"?promo="+promoCode,result=consoleApiSvc.callAPI("GET",url,"promoCode_"+promoCode);result.then(function(response){vm.isValidPromo=!0,vm.isPromoCodeExpired=!1},function(response){vm.isValidPromo=!1,vm.isPromoCodeExpired=!0})},400))};var signupSegments={signupSegmentA:function(response){consoleApiSvc.user.loaderMessage=!0,consoleApiSvc.user.is_verified_pending=!0,commonSvc.createCookie("cwLoaderMessage",!0,1),$("body #livechat-eye-catcher").hide(),$("body #chat-widget-container").hide(),$("#cw-app_loader").show(),$("#angular-app").hide(),$("#cw-app_container").empty(),$("body").css("background","#f2f2f2"),$state.go("server_create")},signupSegmentB:function(response){if(response.status)$("#cw-app_loader").show(),$("#angular-app").hide(),$("#cw-app_container").empty(),$("body").css("background","#f2f2f2"),$window.location.href="/";else switch(response.error_code){case"-1":$state.go("verify_phone"),angular.isDefined(response.data.code)&&guestSvc.setUserCode(response.data.code);break;case"-3":$state.go("almost_there")}},signupSegmentC:function(response){angular.isDefined(response)&&$state.go("signup_verification")}}}angular.module("guest").controller("guest.socialSignupController",["consoleApiSvc","$state","userViewPath","guestSvc","$stateParams","commonSvc","translation","accountSvc","$window",socialSignupController])}(),function(){"use strict";function successController(userViewPath,commonSvc,guestSvc,translation,$rootScope){function addFacebookPixelCode(){return cookieConsent.isServiceEnabled("marketing")&&"live"===window.APP_ENV?void(guestSvc.fbReferenceUserTrack&&(vm.fbReferenceUserTrack=guestSvc.fbReferenceUserTrack,guestSvc.fbReferenceUserTrack=!1,!function(f,b,e,v,n,t,s){f.fbq||(n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},f._fbq||(f._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],t=b.createElement(e),t.async=!0,t.src=v,s=b.getElementsByTagName(e)[0],s.parentNode.insertBefore(t,s))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","1470772573229317"),fbq("track","PageView"),fbq("track","Lead"))):!1}var vm=this;$rootScope.publish("cwNotUserLoggedIn"),addFacebookPixelCode(),commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Signup","Currently Not Available."),guestSvc.getUserData(""),vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"}}angular.module("guest").controller("guest.successController",["userViewPath","commonSvc","guestSvc","translation","$rootScope",successController])}(),function(){"use strict";function suspiciousLoginController(consoleApiSvc,toastrSvc,$state,userViewPath,guestSvc,translation,$window,$stateParams){if(angular.isDefined($stateParams.email)){var email=$stateParams.email.split("email=");angular.isDefined(email[1])&&guestSvc.setSuspiciousEmail(email[1])}""===guestSvc.getSuspiciousEmail()&&($window.location.href="");var vm=this;vm.suspiciousLoginForm="suspiciousLoginForm",vm.processing=!1,vm.message="",vm.resendCodeProcessing=!1,vm.buttonLoader=!1,vm.noPhoneExist=!1,vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"};var preferences=guestSvc.getSuspiciousData();if(1==preferences.preference){var email=guestSvc.getSuspiciousEmail(),name=email.substring(0,email.lastIndexOf("@")),domain=email.substring(email.lastIndexOf("@")),first2Char=name.slice(0,2),last2Char=name.slice(-2),mergedEmail=first2Char+"****"+last2Char+domain;vm.email="The code has been sent to your email "+mergedEmail,vm.code_type="phone number",angular.isUndefined(preferences.phone)&&(vm.noPhoneExist=!0)}else if(2==preferences.preference){var phone=preferences.phone,last2Char=phone.slice(-2),mergedPhone="*** ******"+last2Char;vm.email="The code has been sent to your registered phone number "+mergedPhone,vm.code_type="email"}vm.retryCount=1,vm.verify=function(){vm.processing=!0,vm.buttonLoader=!0,vm.resendCodeProcessing=!0,vm.message="Please wait while we verify the code.",consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.suspiciousLoginCode,{code:vm.securityCode,retry:vm.retryCount},"suspiciousLogin_"+vm.email).then(function(response){guestSvc.setSuspiciousEmail(""),guestSvc.setSuspiciousData({}),$("#angular-app").hide(),$("#cw-app_container").empty(),window.location.href="/server"},function(response){vm.processing=!1,vm.resendCodeProcessing=!1,vm.buttonLoader=!1,vm.message="",toastrSvc.error(response.data.data)})},vm.resendCode=function(){return vm.retryCount>=4?(vm.retryCount++,setTimeout(function(){vm.retryCount=1},6e5),void toastrSvc.error("Too many attempts. Please wait 10 minutes and re-attempt")):(vm.resendCodeProcessing=!0,consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.resendSuspiciousCode,{code:vm.securityCode,retry:vm.retryCount},"suspiciousLogin_"+vm.email).then(function(response){toastrSvc.success(response.data),vm.resendCodeProcessing=!1},function(response){vm.processing=!1,vm.resendCodeProcessing=!1,vm.message="",toastrSvc.error(response.data.data)}),void vm.retryCount++)},vm.alternateRetryCount=1,vm.codeByMode=function(){return vm.alternateRetryCount>=4?(vm.alternateRetryCount++,setTimeout(function(){vm.alternateRetryCount=1},6e5),void toastrSvc.error("Too many attempts. Please wait 10 minutes and re-attempt")):(vm.codeByModeProcessing=!0,consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.resendSuspiciousCode,{code:vm.securityCode,retry:vm.alternateRetryCount,mode:1==preferences.preference?"phone":"email"},"suspiciousLogin_"+vm.email).then(function(response){toastrSvc.success(response.data),vm.codeByModeProcessing=!1},function(response){vm.processing=!1,vm.codeByModeProcessing=!1,vm.message="",toastrSvc.error(response.data.data)}),void vm.alternateRetryCount++)}}angular.module("guest").controller("guest.suspiciousLoginController",["consoleApiSvc","toastrSvc","$state","userViewPath","guestSvc","translation","$window","$stateParams",suspiciousLoginController])}(),function(){"use strict";function twoFactorAuthController(consoleApiSvc,$state,userViewPath,guestSvc,commonSvc,$stateParams,allowedUsers,$timeout,$rootScope,analyticsSvc){function twilioPhoneValidation(){vm.validForSMS=0,guestSvc.setIsValidPhone(0),validatePhoneForTFA()}function validatePhoneForTFA(){var data={email:guestSvc.getUserEmail()},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.validatePhoneForTFA,data,"validateUserPhoneForTFA_"+guestSvc.getUserPhone());result.then(function(){vm.validForSMS=1,guestSvc.setIsValidPhone(1),$state.go("tfaSMS")},function(response){429==response.status?(vm.validForSMS=-3,guestSvc.setIsValidPhone(-3)):(vm.validForSMS=-2,guestSvc.setIsValidPhone(-2))})}$rootScope.publish("cwNotUserLoggedIn");var Tfa=$stateParams.error.split("error=");-1!==Tfa.indexOf("verify_tfa")&&guestSvc.setTFA(Tfa[1]),""===guestSvc.getTFA()&&$state.go("login");var vm=this;vm.userPhone=guestSvc.getUserPhone(),vm.backupCode=guestSvc.getBackupCode(),vm.validPhoneNo=!isNaN(parseInt(guestSvc.getUserPhone())),vm.validForSMS=guestSvc.getIsValidPhone(),vm.data={key:"",remember:!1},vm.tfaVerify="tfaVerify",vm.errors={},vm.tfaButtonLoader=!1,vm.tfaVerifing=!1,vm.twilioPhoneValidation=twilioPhoneValidation,vm.onchangeTfaCode=function(){angular.isDefined(vm.tfaVerify.tfa_code)&&null!=vm.tfaVerify.tfa_code&&vm.tfaVerify.tfa_code.$setValidity("tfa_code",!0)},$timeout(function(){document.getElementById("tfaCode").focus()},0),vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.verifyTfa=function(){var email=guestSvc.getUserEmail(),data={key:vm.data.tfa_code,remember:vm.data.remember,email:email},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.verifyTfa,data,"verifyTfa_"+vm.data.tfa_code);vm.tfaVerifing=!0,result.then(function(response){if(response.status)commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Login","console via TFA"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"login",!1,"console via TFA"),guestSvc.setTFA(""),guestSvc.getUserData(""),$("#angular-app").hide(),$("#cw-app_container").empty(),window.location.href="/server";else switch(response.error){case"sso":document.body.innerHTML=guestSvc.getFormHtml(response.form),document.getElementById("formData").submit()}},function(response){vm.tfaVerifing=!1,vm.tfaVerify.tfa_code.$setValidity("tfa_code",!1),vm.errors.tfa_code=response.data.message,429==response.status&&(vm.errors.tfa_code="Too many attempts. Please wait 10 minutes and re-attempt")})},vm.verifyBackupCode=function(){var email=guestSvc.getUserEmail(),data={key:vm.data.tfa_code,remember:vm.data.remember,email:email},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.verifyBackupCode,data,"verifyBackupCode_"+vm.data.tfa_code);vm.tfaVerifing=!0,result.then(function(response){if(response.status)commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Login","console via TFA"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"login",!1,"console via TFA"),guestSvc.setTFA(""),guestSvc.getUserData(""),$("#angular-app").hide(),$("#cw-app_container").empty(),window.location.href="/server";else switch(response.error){case"sso":document.body.innerHTML=guestSvc.getFormHtml(response.form),document.getElementById("formData").submit()}},function(response){vm.tfaVerifing=!1,vm.tfaVerify.tfa_code.$setValidity("tfa_code",!1),vm.errors.tfa_code=response.data.message,429==response.status&&(vm.errors.tfa_code="Too many attempts. Please wait 10 minutes and re-attempt")})},vm.verifySMSCode=function(){var email=guestSvc.getUserEmail(),data={key:vm.data.tfa_code,remember:vm.data.remember,email:email},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.verifySMSCode,data,"verifyBackupCode_"+vm.data.tfa_code);vm.tfaVerifing=!0,result.then(function(response){if(response.status)commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Login","console via TFA"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"login",!1,"console via TFA"),guestSvc.setTFA(""),guestSvc.getUserData(""),$("#angular-app").hide(),$("#cw-app_container").empty(),window.location.href="/server";else switch(response.error){case"sso":document.body.innerHTML=guestSvc.getFormHtml(response.form),document.getElementById("formData").submit()}},function(response){vm.tfaVerifing=!1,vm.tfaVerify.tfa_code.$setValidity("tfa_code",!1),vm.errors.tfa_code=response.data.message,429==response.status&&(vm.errors.tfa_code="Too many attempts. Please wait 10 minutes and re-attempt")})},vm.isInternalUser=function(){var email=guestSvc.getUserEmail().split("@");return!!(angular.isDefined(email)&&angular.isDefined(email[1])&&-1!==["cloudways.com","gaditek.com"].indexOf(email[1])||-1!==allowedUsers.indexOf(guestSvc.getUserEmail()))},vm.regex={tfaRegex:consoleApiSvc.getRegex("number")}}angular.module("guest").controller("guest.twoFactorAuthController",["consoleApiSvc","$state","userViewPath","guestSvc","commonSvc","$stateParams","allowedUsers","$timeout","$rootScope","analyticsSvc",twoFactorAuthController])}(),function(){"use strict";function userController(consoleApiSvc,$window,toastrSvc,$rootScope,$state,$stateParams,userViewPath,member_url,guestSvc,commonSvc,memberSvc,translation,ocLazyloadSvc,$http,apiEndPoint){function getCookie(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return decodeURIComponent(c.substring(name.length,c.length).replace(/\+/g," "))}return""}function removeCookie(name){var date=new Date;date.setTime(date.getTime()+-864e5);var expires="; expires="+date.toGMTString();document.cookie=name+"="+expires+"; path=/"}var vm=this;this.init=function(){var vm=this;switch(vm.user={promo:!1},vm.passwordChanged=!1,vm.processing=!1,vm.loginError,vm.member_url=member_url,vm.promo=!1,vm.privacyConsent=0,vm.campaignDesign=!1,vm.range=function(n){return new Array(n)},vm.isTosChecked=!1,vm.hideShowMessage=function(){vm.isTosChecked=!vm.isTosChecked},$state.current.name){case"login":case"welcome_back":"welcome_back"===$state.current.name&&(vm.user.promo=""),vm.loginForm="loginForm",vm.errors={},""!=getCookie("social_error")&&(toastrSvc.error(getCookie("social_error")),removeCookie("social_error")),vm.activationFailed=!1,"failed"===$stateParams.activation&&(vm.activationFailed=!0,vm.activationFailed="Your account has already been activated. Please log into the Platform.");break;case"forgotPassword":vm.user="",vm.forgotpassword="forgotpassword",vm.errors={};break;case"changePassword":vm.passwordChanged=!1}},this.init(),vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.login=function(){if(!vm.loginForm.$valid)return void angular.forEach(vm.loginForm.$error,function(field){angular.forEach(field,function(errorField){errorField.$setTouched()})});if(vm.loginError=!1,!vm.processing){vm.processing=!0,vm.buttonLoader=!0,guestSvc.setUserEmail(vm.user.email);var chatSupport=commonSvc.getParameterByName("chat_support");null!=chatSupport&&1==chatSupport&&(vm.user.chat_support="yes");var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.login,vm.user,"login_"+vm.user.email);result.then(function(response){if(vm.processing=!1,vm.buttonLoader=!1,commonSvc.createCookie("cwlogin",!0,1),response.status)response.is_user_unverified?(commonSvc.createCookie("cwLoaderMessage",!0,1),consoleApiSvc.user.loaderMessage=!0):(commonSvc.removeCookie("cwLoaderMessage"),consoleApiSvc.user.loaderMessage=!1),$("#cw-app_container").hide(),$("header").hide(),$("#angular-app").hide(),$("body #livechat-eye-catcher").hide(),$("body #chat-widget-container").hide(),commonSvc.gtmEventTrack(response.id,"userTracking","Login","console"),commonSvc.gtmEventTrack(response.id,"login",!1,"console"),$http.get(apiEndPoint+consoleApiSvc.API.URL.user).then(function(response){
200===response.status&&(0===parseInt(response.data.totalServers)?"trial"===response.data.customer_type&&response.data.expired?$window.location.href="/server":response.data.is_account_console_disabled?$window.location.href="/account/detail":memberSvc.isSectionPermitted(null,"server-add")?memberSvc.isAffiliateProfileRequired()?$window.location.href="/account/referral":$window.location.href="/server/create":$window.location.href="/server":$window.location.href="/server")},function(response){});else if(!response.status&&response.error)switch(guestSvc.setTFA(response.error),response.error){case"verify_tfa":guestSvc.setUserPhone(response.phoneno),guestSvc.setBackupCode(response.backupCode>0),$state.go("tfa");break;case"suspicious_login":guestSvc.setSuspiciousEmail(response.email),guestSvc.setSuspiciousData(response),$state.go("suspicious_login");break;case"sso":document.body.innerHTML=guestSvc.getFormHtml(response.form),document.getElementById("formData").submit();break;default:vm.loginError=response.error}else toastrSvc.error(response.error)},function(response){vm.processing=!1,vm.buttonLoader=!1,429===response.status?vm.loginError="Too Many Attempts. Please try again later.":angular.isDefined(response.data.error)?vm.loginError=response.data.error:angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)&&("welcome_back"===$state.current.name&&"promo"===key?vm.errorsPromo=error.message:vm.loginError=error.message)})})})}},vm.resetPassword=function(){vm.showSuccessMessage=!1;var result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.forgot_password,vm.user,"resetPassword_"+vm.user.email);result.then(function(data){data.status&&(vm.showSuccessMessage=!0,vm.code=data.response.code)},function(response){vm.forgotpassword.email.$setValidity("email",!1),vm.errors.email=response.data.error.message})},vm.changePassword=function(){vm.passwordChanged=!0,vm.showSuccessMessage=!1;var data={code:$stateParams.code,password:vm.user.password},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.user_password,data,"resetPassword_"+vm.user.email);result.then(function(data){data.status&&(vm.showSuccessMessage=!0)})},vm.signup=function(){var data={name:vm.user.name,email:vm.user.email,password:vm.user.password},result=consoleApiSvc.callAPI("POST",consoleApiSvc.API.URL.user,data,"signup_"+vm.user.email);result.then(function(data){data.status})},vm.submitPrivacyPolicy=function(){var postPayload={consentStatus:vm.privacyConsent,code:$stateParams._key},result=consoleApiSvc.callAPI("POST","guest/privacy-policy-reminder",postPayload,"privacyConsent");result.then(function(data){},function(response){})}}angular.module("guest").controller("guest.userController",["consoleApiSvc","$window","toastrSvc","$rootScope","$state","$stateParams","userViewPath","member_url","guestSvc","commonSvc","memberSvc","translation","ocLazyloadSvc","$http","apiEndPoint",userController])}(),function(){"use strict";function verifyCodeController(consoleApiSvc,$window,$state,userViewPath,guestSvc,commonSvc,toastrSvc,translation,$rootScope){""===guestSvc.getUserCode()&&($window.location.href="");var vm=this;$rootScope.publish("cwNotUserLoggedIn"),vm.data={sms_code:"",code:guestSvc.getUserCode(),countryCode:guestSvc.verifyData.countryCode,phone_number:guestSvc.verifyData.phone_number},vm.code_retry=0,vm.verifyCodeForm="verifyCodeForm",vm.errors={};var verifyCount=0;vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.verifyCode=function(){var result=({email:vm.data.email,password:vm.data.password},consoleApiSvc.callAPI("POST","guest/user/code/verification",vm.data,"verifyCode_"+vm.data.code));result.then(function(response){response.status?(guestSvc.setUserCode(""),commonSvc.gtmEventTrack(guestSvc.getUserData(),"userTracking","Signup","Got verified phone number"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"signUpGotPhone"),commonSvc.gtmEventTrack(guestSvc.getUserData(),"signUpSuccessViaPhone"),angular.isDefined(response.social_signup)?$state.go("login"):$state.go("signup_success")):vm.code_retry<3?(vm.verifyCodeForm.sms_code.$setValidity("sms_code",!1),vm.errors.sms_code="Wrong SMS Code Please Try Again..",vm.code_retry++):(guestSvc.setUserCode(""),$state.go("almost_there"))},function(response){if(response.data.message)return void toastrSvc.error(response.data.message);var errors_msg="";angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),toastrSvc.error(errors_msg)})},vm.resendCode=function(){vm.preloader=!0,vm.message="Please Wait, Resending verification code...";var userData=guestSvc.verifyData;userData.verify_count=++verifyCount;var result=consoleApiSvc.callAPI("POST","guest/user/phone/verification",userData,"verifyPhone_"+userData.code);result.then(function(response){vm.preloader=!1,response.error?(guestSvc.setUserCode(""),$state.go("almost_there")):$state.go("verify_code")},function(response){if(vm.preloader=!1,response.data.message)return void toastrSvc.error(response.data.message);var errors_msg="";angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),toastrSvc.error(errors_msg)})}}angular.module("guest").controller("guest.verifyCodeController",["consoleApiSvc","$window","$state","userViewPath","guestSvc","commonSvc","toastrSvc","translation","$rootScope",verifyCodeController])}(),function(){"use strict";function verifyPhoneController(consoleApiSvc,$window,$state,userViewPath,guestSvc,toastrSvc,$timeout,translation,$rootScope){function getCountryPhoneCode(){vm.preloader=!0,vm.message="Please Wait, Loading Dialing Codes...";var result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.countryPhoneCode+"/"+vm.data.code,null,"countryPhoneCode_"+vm.data.code);result.then(function(response){vm.preloader=!1,vm.message="",vm.phonecode=response.phonecode,guestSvc.phoneCodes=response.phonecode,response.user_country?(vm.data.user_country=response.user_country,angular.forEach(response.phonecode,function(v,r){response.user_country==v.nicename&&(vm.data.user_country_iso=v.iso,vm.data.user_phone_code=v.phonecode,$app.selected.html("+"+vm.data.user_phone_code).attr("class","padding-left-20 pg_inr_flag_small pg_inr_flag_"+vm.data.user_country_iso))})):(vm.data.user_country="UNITED STATES",vm.data.user_country_iso="US",vm.data.user_phone_code="1",$app.selected.html("+"+vm.data.user_phone_code).attr("class","padding-left-20 pg_inr_flag_small pg_inr_flag_US"))},function(response){vm.preloader=!1,vm.message=""})}""===guestSvc.getUserCode()&&($window.location.href=""),$rootScope.publish("cwNotUserLoggedIn");var vm=this;vm.data={code:guestSvc.getUserCode(),country_code:0,phone_number:""},vm.phonecode=[];var verifyCount=0,$app={selected:!1};$timeout(function(){$("#app_list_dd md-select md-select-value span.md-select-icon").before($("#app_dd_detail").html());var appElement=angular.element(document).find("#app_dd_detail");appElement.remove(),$app.selected=angular.element(document).find("#app_selected")},0),getCountryPhoneCode(),vm.range=function(n){return new Array(n)},vm.getPartial=function(partial){return userViewPath+"partials/"+partial+".html"},vm.verifyPhone=function(prefix){var data={phone_number:vm.data.country_code.split("_")[0]+vm.data.phone_number,code:vm.data.code,iso:angular.isDefined(vm.data.iso)?vm.data.iso:vm.data.user_country_iso,countryCode:vm.data.country_code.split("_")[0],verify_count:++verifyCount,type:prefix};guestSvc.verifyData=angular.copy(data),guestSvc.verifyData.iso=angular.isDefined(vm.data.iso)?vm.data.iso:vm.data.user_country_iso,guestSvc.verifyData.countryCode=vm.data.country_code.split("_")[0],guestSvc.verifyData.phone_number=vm.data.phone_number;var result=consoleApiSvc.callAPI("POST","guest/user/phone/verification",data,"verifyPhone_"+vm.data.code);result.then(function(response){response.error?(guestSvc.setUserCode(""),$state.go("almost_there")):$state.go("verify_code")},function(response){if(response.data.message)return void toastrSvc.error(response.data.message);var errors_msg="";angular.forEach(response.data,function(errors,key){angular.forEach(errors,function(error){angular.isDefined(error.message)?errors_msg+=error.message+"<br/>":errors_msg=response.data.message})}),toastrSvc.error(errors_msg)})},vm.setPhoneCode=function(){var country_code=vm.data.country_code.split("_");vm.data.iso=country_code[1],$app.selected.html("+"+country_code[0]).attr("class","padding-left-20 pg_inr_flag_small pg_inr_flag_"+vm.data.iso)}}angular.module("guest").controller("guest.verifyPhoneController",["consoleApiSvc","$window","$state","userViewPath","guestSvc","toastrSvc","$timeout","translation","$rootScope",verifyPhoneController])}(),function(){"use strict";function userRouterConfig($stateProvider,$urlRouterProvider,$locationProvider,userViewPath){$stateProvider.state("login",{url:"/login?activation",title:"Login",templateUrl:userViewPath+"login.html",controller:"guest.userController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"main"}}).state("welcome_back",{url:"/welcome-back",title:"Welcome Back",templateUrl:userViewPath+"login.html",controller:"guest.userController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"main"}}).state("signup",{url:"/signup?coupon",title:"Signup",templateUrl:userViewPath+"signup-v1.html",controller:"guest.signupController",controllerAs:"vm",resolve:{notLoggedin:authenticatePublicPages,translation:translatedJSON},params:{json:"signupPage"}}).state("get-started",{url:"/get-started?coupon",title:"Get Started",templateUrl:userViewPath+"get-started.html",controller:"guest.signupController",controllerAs:"vm",resolve:{notLoggedin:authenticatePublicPages,translation:translatedJSON},params:{json:"signupPage"}}).state("social_signup",{url:"/signup/social/:code",title:"Social Signup",templateUrl:userViewPath+"socialSignup.html",controller:"guest.socialSignupController",controllerAs:"vm",resolve:{notLoggedin:authenticatePublicPages,translation:translatedJSON},params:{json:"socialSignupPage"}}).state("verify_phone",{url:"/verify/phone",title:"Verify Phone Number",templateUrl:userViewPath+"verify_phone.html",controller:"guest.verifyPhoneController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"verifyPhonePage"}}).state("verify_code",{url:"/verify/code",title:"Verify SMS Code",templateUrl:userViewPath+"verify_code.html",controller:"guest.verifyCodeController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"verifyCodePage"}}).state("signup_success",{url:"/signup/success",title:"Signup Success",templateUrl:userViewPath+"signup_success.html",controller:"guest.successController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"successPage"}}).state("almost_there",{url:"/signup/almost-there",title:"Signup Error",templateUrl:userViewPath+"signup_error.html",controller:"guest.errorController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"errorPage"}}).state("logout",{url:"/logout",controller:LogoutController}).state("forgotPassword",{url:"/password/forgot",title:"Forgot Password",templateUrl:userViewPath+"forgotPassword.html",controller:"guest.forgotPasswordController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"forgotPage"}}).state("changePassword",{url:"/password/reset",title:"Change Password",templateUrl:userViewPath+"changePassword.html",controller:"guest.changePasswordController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"changePassPage"}}).state("activateAccount",{url:"/activate",title:"Activate your Team Member account",templateUrl:userViewPath+"createPassword.html",controller:"guest.changePasswordController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"changePassPage"}}).state("tfa",{url:"/tfa/verify/:error?",title:"Two Factor Authentication",templateUrl:userViewPath+"twoFactorAuth.html",controller:"guest.twoFactorAuthController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"twoFactorAuthPage"}}).state("tfaBackupCode",{url:"/tfa/backupCode/:error?",title:"Backup Code Verification",templateUrl:userViewPath+"backupAuth.html",controller:"guest.twoFactorAuthController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"twoFactorAuthPage"}}).state("tfaSMS",{url:"/tfa/SMSCode/:error?",title:"SMS Verification",templateUrl:userViewPath+"SMSAuth.html",controller:"guest.twoFactorAuthController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"twoFactorAuthPage",sms:!0}}).state("tfaOther",{url:"/tfa/verifyOther/:error?",title:"Two Factor Authentication",templateUrl:userViewPath+"twoFactorAuthOther.html",controller:"guest.twoFactorAuthController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"twoFactorAuthPage"}}).state("signup_verification",{url:"/signup/signup-verification",title:"Signup Verification",templateUrl:userViewPath+"signup_verification.html",controller:"guest.errorController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"errorPage"}}).state("suspicious_login",{url:"/security/code/:email?",title:"Security Code",templateUrl:userViewPath+"suspicious-login.html",controller:"guest.suspiciousLoginController",controllerAs:"vm",resolve:{translation:translatedJSON},params:{json:"suspiciousLoginPage"}})}angular.module("guest").config(["$stateProvider","$urlRouterProvider","$locationProvider","userViewPath",userRouterConfig]);var authenticated=["consoleApiSvc","$q","$state","$rootScope","memberSvc","ocLazyloadSvc",function(consoleApiSvc,$q,$state,$rootScope,memberSvc,ocLazyloadSvc){var deferred=$q.defer();return consoleApiSvc.authCheck().then(function(response){deferred.resolve(response),$("#cw-app_container").hide(),$.isEmptyObject(consoleApiSvc.server.serverData)?"trial"===consoleApiSvc.user.userDetails.customer_type&&consoleApiSvc.isTrialUserExpired?$state.go("server"):consoleApiSvc.user.isUserLoggedIn&&consoleApiSvc.user.account_console_disabled?ocLazyloadSvc.isModuleLoaded("server").then(function(){ocLazyloadSvc.isModuleLoaded("cluster"),$("#cw-app_loader").hide(),$("#angular-app").show(),$state.go("account_detail")}):memberSvc.isSectionPermitted(null,"server-add")?memberSvc.isAffiliateProfileRequired()?$state.go("account_referral"):$state.go("server_create"):$state.go("server"):$state.go("server",{},{reload:!0})},function(response){$("#cw-app_loader").hide(),$("#angular-app").show(),deferred.resolve(response)}),deferred.promise}],LogoutController=["consoleApiSvc","$window","toastr","commonSvc",function(consoleApiSvc,$window,toastr,commonSvc){$("#cw-app_loader").hide(),$("#angular-app").hide(),$(".cal-sch-wrap").hide();var result=consoleApiSvc.callAPI("GET",consoleApiSvc.API.URL.logout);result.then(function(data){data.status&&(commonSvc.removeCookie("cwlogin"),commonSvc.removeCookie("cwredirect"),commonSvc.removeCookie("member_switched_from"),commonSvc.removeCookie("member_switched_to"),commonSvc.createCookie("cw_chat_ended",!0,1),$window.location.href="/")},function(){$("#cw-app_loader").hide(),$("#angular-app").show(),$window.location.href="/"})}],authenticatePublicPages=["$http","consoleApiSvc","$q","$state","$rootScope","$window","apiEndPoint",function($http,consoleApiSvc,$q,$state,$rootScope,$window,apiEndPoint){var deferred=$q.defer();return $http.get(apiEndPoint+consoleApiSvc.API.URL.user).then(function(response){$("#cw-app_loader").show(),$("#angular-app").hide(),deferred.reject(response),$rootScope.publish("cwUserLoggedIn"),$window.location.href="/server"},function(response){$rootScope.publish("cwNotUserLoggedIn"),deferred.resolve(response)}),deferred.promise}],translatedJSON=["$translatePartialLoader","$translate","$stateParams",function($translatePartialLoader,$translate,$stateParams){return angular.isDefined($stateParams.json_2)&&$translatePartialLoader.addPart($stateParams.json_2),$translatePartialLoader.addPart($stateParams.json),$translate.refresh()}]}(),function(){"use strict";function guestSvc(apiEndPoint,$http,$q,$timeout,$window,$location,$filter,toastr,$rootScope,consoleApiSvc,$state){var root={code:"",data:"",tfa:"",phoneno:"",isValidPhone:-1,backupCode:!1,isSuspicious:"",suspicious:{},email:"",phoneCodes:{},verifyData:{},affiliateCookie:!1,virlLoopCookie:!1,fbReferenceUserTrack:!1,emailExist:null};return root.setUserCode=function(code){root.code=code},root.getUserCode=function(){return root.code},root.setTFA=function(tfa){root.tfa=tfa},root.getTFA=function(){return root.tfa},root.setUserPhone=function(phone){root.phone=phone},root.getUserPhone=function(){return root.phone},root.setBackupCode=function(backupCode){root.backupCode=backupCode},root.getBackupCode=function(){return root.backupCode},root.setIsValidPhone=function(value){root.isValidPhone=value},root.getIsValidPhone=function(){return root.isValidPhone},root.setSuspiciousEmail=function(email){root.isSuspicious=email},root.getSuspiciousEmail=function(){return root.isSuspicious},root.setSuspiciousData=function(data){root.suspicious=data},root.getSuspiciousData=function(){return root.suspicious},root.setUserData=function(data){return""===data||angular.isUndefined(data)?root.data=void 0:root.data=data.substr(10,data.length),root.data},root.getUserData=function(){return root.data},root.getFormHtml=function(form){var html='<form method="post" action="'+form.url+'" id="formData" name="formData">';return angular.forEach(form.inputs,function(val,key){html+='<input type="hidden" name="'+key+'" value="'+val+'" />'}),html+="</form>"},root.setUserEmail=function(data){return""===data||angular.isUndefined(data)?root.data=void 0:root.email=data,root.email},root.getUserEmail=function(){return root.email},root.setAffiliateCookie=function(cookie){root.affiliateCookie=cookie},root.getAffiliateCookie=function(cookie){return root.affiliateCookie},root.setVirlLoopCookie=function(cookie){root.virlLoopCookie=cookie},root.getVirlLoopCookie=function(){return root.virlLoopCookie},root.emailExistSetter=function(value){return angular.isDefined(value)&&(root.emailExist=value),root.emailExist},root.emailExistGetter=function(){return root.emailExist},root}angular.module("guest").factory("guestSvc",["apiEndPoint","$http","$q","$timeout","$window","$location","$filter","toastr","$rootScope","consoleApiSvc","$state",guestSvc])}(),function(){"use strict";function serverRouterConfig($stateProvider,serverViewPath){$stateProvider.state("server",{url:"/server",title:"Server list",templateUrl:serverViewPath+"server/index.html",controller:"member.serverController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"main"}}).state("server_create",{url:"/server/create",title:"Add New Server",templateUrl:serverViewPath+"server/create.html",controller:"member.createController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverCreatePage"}}).state("server_manage",{url:"/server/manage/:id",title:"Server Management",templateUrl:serverViewPath+"server/manage.html",controller:"member.manageController",controllerAs:"vm",resolve:{loggedin:authenticated}}).state("server_detail_access",{url:"/server/:id/access_detail",title:"Server Access Details",templateUrl:serverViewPath+"server/server-detail-access.html",controller:"member.serverAccessDetailController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverAccessPage"}}).state("server_detail_backup",{url:"/server/:id/backup",title:"Server Backups",templateUrl:serverViewPath+"server/server-detail-backups.html",controller:"member.backupController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverBackupPage"}}).state("server_detail_monitor",{url:"/server/:id/monitor",title:"Server Detail Monitor",templateUrl:serverViewPath+"server/server-detail-monitor.html",controller:"member.monitorController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"serverMonitorPage",module:"monitoring"}}).state("server_detail_services",{url:"/server/:id/services",title:"Server Detail Services",templateUrl:serverViewPath+"server/server-detail-services.html",controller:"member.servicesController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverServicesPage"}}).state("server_detail_settings",{url:"/server/:id/settings?tab",title:"Server Detail Settings",templateUrl:serverViewPath+"server/server-detail-settings.html",controller:"member.serverSettingController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverSettingsPage"}}).state("server_detail_security",{url:"/server/:id/security",title:"Server Detail Security",templateUrl:serverViewPath+"server/server_detail_security1.html",controller:"member.serverSecurityController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverSecurityPage"}}).state("server_detail_smtp",{url:"/server/:id/smtp",title:"Server smtp",templateUrl:serverViewPath+"server/server-detail-smtp.html",controller:"member.smtpController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverAddonPage"}}).state("server_detail_scaling",{url:"/server/:id/scaling",title:"Server Detail Scaling",templateUrl:serverViewPath+"server/server_detail_scaling1.html",controller:"member.serverScalingController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverScalingPage"}}).state("server_clone",{url:"/server/:id/clone/:appId",title:"Server Cloning",templateUrl:serverViewPath+"server/server-clone-v1.html",controller:"member.serverCloneController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverClonePage"}}).state("disaster_recovery",{url:"/server/:id/disaster_recovery",title:"Disaster Recovery",templateUrl:serverViewPath+"server/server-clone-v1.html",controller:"member.serverCloneController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"serverClonePage"}}).state("server_detail_debian_migration",{url:"/server/:id/migration",title:"Server Detail Debian Migration",templateUrl:serverViewPath+"server/server-detail-debian-migration.html",controller:"member.serverMigrationController",controllerAs:"vm",child:"server",resolve:{loggedin:authenticated,authenticateACLUsers:authenticateACLUsers,translation:translatedJSON},params:{json:"main"}}).state("apps",{url:"/apps",title:"Server Applications",templateUrl:serverViewPath+"apps/apps.html",controller:"member.appController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appPage"}}).state("add_new_app",{url:"/server/:id/add/app",title:"Add New Aplication",templateUrl:serverViewPath+"apps/add_app.html",controller:"member.addAppController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appAddPage"}}).state("app_detail_access",{url:"/apps/:id/access_detail",title:"Application Access Detail",templateUrl:serverViewPath+"apps/app-detail-access.html",controller:"member.appAccessDetailController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appAccessPage",json_2:"serverAccessPage",partialName:"app-detail-access"}}).state("app_detail_staging",{url:"/apps/:id/staging",title:"Application Detail Staging",templateUrl:serverViewPath+"apps/app-detail-staging.html",controller:"member.appStagingEnvController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appStagingPage"}}).state("app_detail_setting",{url:"/apps/:id/setting",title:"Application Detail setting",templateUrl:serverViewPath+"apps/app-detail-setting.html",controller:"member.appDetailSettingController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appSettingPage",partialName:"app-detail-setting"}}).state("app_detail_domain",{url:"/apps/:id/domain",title:"Application Domain Detail",templateUrl:serverViewPath+"apps/app-detail-domain.html",controller:"member.domainController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appDomainPage",partialName:"app-detail-domain"}}).state("app_detail_malcare",{url:"/apps/:id/malcare",title:"Application Malcare Detail",templateUrl:serverViewPath+"apps/app-detail-malcare.html",controller:"member.malcareController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial,lazyLoad:lazyLoad},params:{json:"appMalcarePage",partialName:"app-detail-malcare",module:"malcare"}}).state("app_detail_cron_job",{url:"/apps/:id/cron_job",title:"Application Cron Job Detail",templateUrl:serverViewPath+"apps/app-detail-cron_job.html",controller:"member.cronJobDetailController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appCronPage",partialName:"app-detail-cron_job"}}).state("app_detail_ssl",{url:"/apps/:id/ssl",title:"Application SSL Detail",templateUrl:serverViewPath+"apps/app-detail-ssl.html",controller:"member.sslController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appSSLPage"}}).state("app_detail_restore",{url:"/apps/:id/restore",title:"Application Detail Restore",templateUrl:serverViewPath+"apps/app-detail-restore.html",controller:"member.restoreController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appRestorePage",partialName:"app-detail-restore"}}).state("app_detail_deployment",{url:"/apps/:id/deployment",title:"Git Deployment",templateUrl:serverViewPath+"apps/app-detail-deployment.html",controller:"member.gitController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:appPartial},params:{json:"appDeploymentPage",partialName:"app-detail-deployment"}}).state("app_detail_migrator",{url:"/apps/:id/migration",title:"Application Detail Migrator Tool",templateUrl:serverViewPath+"apps/app-detail-migrator_tool.html",controller:"member.appMigratorController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appMigratorToolPage"}}).state("app_detail_performance",{url:"/apps/:id/performance",title:"Application Detail Performance Tool",templateUrl:serverViewPath+"apps/app-detail-performance_tool.html",controller:"member.appPerformanceController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appPerformanceToolPage"}}).state("app_detail_cdn",{url:"/apps/:id/cdn",title:"Application Detail Cdn",templateUrl:serverViewPath+"apps/app-detail-cdn.html",controller:"member.appCdnController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"appCdnPage"}}).state("app_detail_monitor_traffic",{url:"/apps/:id/monitor/traffic",title:"Application Detail Monitor Traffic",templateUrl:serverViewPath+"apps/monitoring/app-detail-monitor-traffic.html",controller:"member.appMonitorTrafficController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-traffic"}}).state("app_detail_monitor_cron",{url:"/apps/:id/monitor/cron",title:"Application Detail Monitor Cron",templateUrl:serverViewPath+"apps/monitoring/app-detail-monitor-cron.html",controller:"member.appMonitorCronController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-cron"}}).state("app_detail_monitor_php",{url:"/apps/:id/monitor/php",title:"Application Detail Monitor PHP",templateUrl:serverViewPath+"apps/monitoring/app-detail-monitor-php.html",controller:"member.appMonitorPhpController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-php"}}).state("app_detail_monitor_mysql",{url:"/apps/:id/monitor/mysql",title:"Application Detail Monitor MySQL",templateUrl:serverViewPath+"apps/monitoring/app-detail-monitor-mysql.html",controller:"member.appMonitorMySqlController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-mysql"}}).state("app_detail_monitor_disk",{url:"/apps/:id/monitor/disk",title:"Application Detail Monitor Disk USage",templateUrl:serverViewPath+"apps/monitoring/app-detail-monitor-disk-usage.html",controller:"member.appMonitorDiskUsageController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-disk-usage",module:"monitoring"}}).state("app_detail_log_access",{url:"/apps/:id/logs/access",title:"Application Detail Access Log",templateUrl:serverViewPath+"apps/log/app-detail-monitor-access-log.html",controller:"member.appMonitorAccessLogController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-access-log"}}).state("app_detail_log_error",{url:"/apps/:id/logs/error",title:"Application Detail Error Log",templateUrl:serverViewPath+"apps/log/app-detail-monitor-error-log.html",controller:"member.appMonitorErrorLogController",controllerAs:"vm",child:"apps",resolve:{loggedin:authenticated,translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage",partialName:"app-detail-monitor-error-log"}}).state("projects",{url:"/projects",title:"Projects",templateUrl:serverViewPath+"project/projects.html",controller:"member.projectController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"main",module:"project"}}).state("create_project",{url:"/projects/create",title:"Create Project",templateUrl:serverViewPath+"project/createProject.html",controller:"member.createProjectController",controllerAs:"vm",child:"projects",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"projectPage",module:"project"}}).state("project_manage",{url:"/projects/:id/manage",title:"Project Detail Management",templateUrl:serverViewPath+"project/projectManage.html",controller:"member.createProjectController",controllerAs:"vm",child:"projects_details",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"projectPage",module:"project"}}).state("alert_list",{url:"/notifications",title:"Cloudbot Notifications",templateUrl:serverViewPath+"cloudbot/alertList.html",controller:"member.alertController",controllerAs:"vm",resolve:{loggedin:authenticated}}).state("integration_list",{url:"/channels",title:"Cloudbot Channels",templateUrl:serverViewPath+"cloudbot/list.html",controller:"member.integrationCtrl",controllerAs:"vm",child:"cloudbot",resolve:{
loggedin:authenticated}}).state("integration_add",{url:"/channels/add",title:"Add Cloudbot Channels",templateUrl:serverViewPath+"cloudbot/form.html",controller:"member.integrationCtrl",controllerAs:"vm",child:"cloudbot",resolve:{loggedin:authenticated}}).state("integration_manage",{url:"/channels/:id/manage",title:"Add Cloudbot Channels",templateUrl:serverViewPath+"cloudbot/form.html",controller:"member.integrationCtrl",controllerAs:"vm",child:"cloudbot",resolve:{loggedin:authenticated}}).state("addons",{url:"/addons",title:"Addons",templateUrl:serverViewPath+"addons.html",controller:"member.addonController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"addonPage"}}).state("team",{url:"/team",title:"Team Members list",templateUrl:serverViewPath+"team/list.html",controller:"member.teamCtrl",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"main",module:"team"}}).state("team_create",{url:"/team/create",title:"Add New Team Member",templateUrl:serverViewPath+"team/form.html",controller:"member.memberCtrl",controllerAs:"vm",child:"team",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"memberPage",module:"team"}}).state("team_manage",{url:"/team/:id/manage",title:"Manage Team Member",templateUrl:serverViewPath+"team/form.html",controller:"member.memberCtrl",controllerAs:"vm",child:"team_details",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"memberPage",module:"team"}}).state("api",{url:"/api",title:"Manage API",templateUrl:serverViewPath+"api/form.html",controller:"member.apiController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"main"}}),$stateProvider.state("account_detail",{url:"/account/detail",title:"Account Details",templateUrl:serverViewPath+"account/accountDetail.html",controller:"member.accountDetailController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"accountDetailPage",module:"account"}}).state("account_member_profile",{url:"/account/member_profile",title:"Member Profile",templateUrl:serverViewPath+"account/memberProfile.html",controller:"member.memberProfileController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:gdprIsDataDeleted,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"memberProfilePage",module:"account"}}).state("account_credit_card",{url:"/account/credit_card?auth",title:"Credit Card Details",templateUrl:serverViewPath+"account/creditCard.html",controller:"member.creditCardController",controllerAs:"vm",resolve:{loggedin:authenticated,gdprIsDataDeleted:gdprIsDataDeleted,isAllowed:bankTransfer,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"creditCardPage",module:"account"}}).state("account_billing",{url:"/account/billing",title:"Real Time Billing",templateUrl:serverViewPath+"account/billing.html",controller:"member.billingController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:gdprIsDataDeleted,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"billingPage",module:"account"}}).state("account_invoice",{url:"/account/invoice",title:"My Invoices",templateUrl:serverViewPath+"account/invoice.html",controller:"member.invoiceController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:gdprIsDataDeleted,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"invoicePage",module:"account"}}).state("account_fund",{url:"/account/fund",title:"My Funds",templateUrl:serverViewPath+"account/fund.html",controller:"member.fundController",controllerAs:"vm",resolve:{loggedin:authenticated,gdprIsDataDeleted:gdprIsDataDeleted,isAllowed:bankTransfer,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"fundPage",module:"account"}}).state("account_referral",{url:"/account/referral",title:"Refer And Earn",templateUrl:serverViewPath+"account/referral.html",controller:"member.referralController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:gdprIsDataDeleted,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"referralPage",module:"account"}}).state("updgrade_account",{url:"/account/upgrade",resolve:{loggedin:authenticated,lazyLoad:lazyLoad},params:{module:"account"},controller:function(accountSvc){accountSvc.upgradeAccount()}}).state("account_call_schedule",{url:"/account/call_schedule",title:"call schedule",templateUrl:serverViewPath+"account/schedule-a-call.html",controller:"member.callScheduleController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:gdprIsDataDeleted,translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"callSchedulePage",module:"account"}}),$stateProvider.state("cluster_create",{url:"/cluster/create",title:"Add New Cluster",templateUrl:serverViewPath+"cluster/create.html",controller:"member.clusterCreateController",controllerAs:"vm",cluster:!0,resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"clusterCreatePage"}}).state("clusters",{url:"/clusters",title:"Cluster listing",templateUrl:serverViewPath+"cluster/index.html",controller:"member.clusterController",controllerAs:"vm",cluster:!0,resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"clusterCreatePage",json_2:"main"}}).state("cluster_detail",{"abstract":!0,url:"/cluster/:id",title:"Cluster Detail",templateUrl:serverViewPath+"cluster/cluster/cluster-detail.html",controller:"member.clusterDetailController",controllerAs:"parentCtrl",cluster:!0,resolve:{loggedin:authenticated}}).state("cluster_detail.access",{url:"/access",title:"Cluster Access Detail",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-access.html",controller:"member.clusterAccessController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverAccessPage"}}).state("cluster_detail.monitor",{url:"/monitor",title:"Cluster Detail Monitor",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-monitor-v3.html",controller:"member.clusterMonitorController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverMonitorPage"}}).state("cluster_detail.backup",{url:"/backup",title:"Cluster Backup Detail",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-backups-v1.html",controller:"member.clusterBackupController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverBackupPage"}}).state("cluster_detail.settings",{url:"/settings",title:"Cluster Detail Settings",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-settings-v1.html",controller:"member.clusterSettingController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverSettingsPage"}}).state("cluster_detail.services",{url:"/services",title:"Cluster Detail Services",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-services.html",controller:"member.clusterServicesController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverServicesPage"}}).state("cluster_detail.whitelist",{url:"/whitelist",title:"Cluster Detail IP Whitelist",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-whitelist.html",controller:"member.clusterWhitelistController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverSecurityPage"}}).state("cluster_detail.smtp",{url:"/smtp",title:"Cluster smtp",templateUrl:serverViewPath+"cluster/cluster/cluster-detail-smtp.html",controller:"member.clusterSmtpController",controllerAs:"vm",child:"cluster",cluster:!0,resolve:{translation:translatedJSON},params:{json:"serverAddonPage"}}).state("cluster_app_detail",{"abstract":!0,url:"/cluster/app/:id",title:"Cluster Application Detail",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail.html",controller:"member.clusterAppDetailController",controllerAs:"parentCtrl",cluster:!0,resolve:{loggedin:authenticated}}).state("cluster_app_detail.access",{url:"/access",title:"Cluster Application Access Detail",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-access-v2.html",controller:"member.clusterAppAccessController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appAccessPage",json_2:"serverAccessPage"}}).state("cluster_app_detail.cron_job",{url:"/cron_job",title:"Cluster Application Cron Job Detail",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-cron_job.html",controller:"member.clusterAppCronjobController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appCronPage"}}).state("cluster_app_detail.deployment",{url:"/deployment",title:"Cluster Application Git Deployment",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-deployment.html",controller:"member.clusterAppDeploymentController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appDeploymentPage"}}).state("cluster_app_detail.domain",{url:"/domain",title:"Cluster Application Domain Detail",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-domain.html",controller:"member.clusterAppDomainController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appDomainPage"}}).state("cluster_app_detail.migrator",{url:"/migrator",title:"Cluster Application Detail Migrator Tool",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-migrator_tool.html",controller:"member.clusterAppMigratorController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appMigratorToolPage"}}).state("cluster_app_detail.settings",{url:"/settings",title:"Cluster Application Detail settings",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-setting.html",controller:"member.clusterAppSettingsController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appSettingPage"}}).state("cluster_app_detail.ssl",{url:"/ssl",title:"Cluster Application SSL Detail",templateUrl:serverViewPath+"cluster/apps/clusterApp-detail-ssl.html",controller:"member.clusterAppSslController",controllerAs:"vm",child:"cluster_apps",cluster:!0,resolve:{translation:translatedJSON},params:{json:"appSSLPage"}}).state("cluster_faqs",{url:"/cluster/faqs",title:"Cluster FAQs",templateUrl:serverViewPath+"cluster/FAQs/cluster-faqs.html",controller:"member.clusterFAQsController",controllerAs:"vm",cluster:!0,resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"cluster-faqPage"}}),$stateProvider.state("verifying_email",{url:"/verifying/email",title:"Verify Email Address",templateUrl:serverViewPath+"verify/verify_email.html",controller:"member.verifyEmailController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:authenticateVerificationPages,translation:translatedJSON},params:{json:"verifyEmailPage"}}).state("verifying_complete",{url:"/verifying/complete",title:"Complete Verification Process",templateUrl:serverViewPath+"verify/verify_complete.html",controller:"member.verifyCompleteController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{json:"verifyCompletePage"}}).state("verifying_phone",{url:"/verifying/phone",title:"Verify Phone Number",templateUrl:serverViewPath+"verify/verify_phone.html",controller:"member.verifyPhoneController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:authenticateVerificationPages,translation:translatedJSON},params:{json:"verifyPhonePage",phone_number:null}}).state("verifying_code",{url:"/verifying/code",title:"Verify SMS Code",templateUrl:serverViewPath+"verify/verify_code.html",controller:"member.verifyCodeController",controllerAs:"vm",resolve:{loggedin:authenticated,isAllowed:authenticateVerificationPages,translation:translatedJSON},params:{json:"verifyCodePage"}}),$stateProvider.state("staging_app_detail",{"abstract":!0,url:"/app/:id",title:"Staging Application Detail",templateUrl:serverViewPath+"staging/applications/stagingApp-detail.html",controller:"member.stagingAppDetailController",controllerAs:"stageParentCtrl",staging:!0,resolve:{loggedin:authenticated}}).state("staging_app_detail.access",{url:"/access",title:"Staging Application Access Detail",templateUrl:serverViewPath+"partials/app/app-detail-access.html",controller:"member.stagingAccessDetailController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appAccessPage",json_2:"serverAccessPage",partialName:"app-detail-deployment"}}).state("staging_app_detail.staging",{url:"/manage",title:"Application Detail Staging",templateUrl:serverViewPath+"staging/applications/stagingApp-detail-staging.html",controller:"member.stagingAppController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appStagingPage"}}).state("staging_app_detail.cron_job",{url:"/cron_job",title:"Staging Application Cron Job",templateUrl:serverViewPath+"partials/app/app-detail-cron_job.html",controller:"member.cronJobDetailController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appCronPage",partialName:"app-detail-cron_job"}}).state("staging_app_detail.deployment",{url:"/deployment",title:"Staging Git Deployment",templateUrl:serverViewPath+"partials/app/app-detail-deployment.html",controller:"member.gitController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appDeploymentPage",partialName:"app-detail-deployment"}}).state("staging_app_detail.setting",{url:"/settings",title:"Staging Application Settings",templateUrl:serverViewPath+"partials/app/app-detail-setting.html",controller:"member.appDetailSettingController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appSettingPage",partialName:"app-detail-setting"}}).state("staging_app_detail.domain",{url:"/domain",title:"Staging Application Domain Detail",templateUrl:serverViewPath+"partials/app/app-detail-domain.html",controller:"member.domainController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appDomainPage",partialName:"app-detail-domain"}}).state("staging_app_detail.malcare",{url:"/malcare",title:"Staging Application Detail Malcare",templateUrl:serverViewPath+"partials/app/app-detail-malcare.html",controller:"member.malcareController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial,lazyLoad:lazyLoad},params:{json:"appMalcarePage",partialName:"app-detail-malcare",module:"malcare"}}).state("staging_app_detail.ssl",{url:"/ssl",title:"Application SSL Detail",templateUrl:serverViewPath+"staging/applications/stagingApp-detail-ssl.html",controller:"member.sslController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appSSLPage"}}).state("staging_app_detail.restore",{url:"/restore",title:"Application Detail Restore",templateUrl:serverViewPath+"partials/app/app-detail-restore.html",controller:"member.restoreController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:appPartial},params:{json:"appRestorePage",partialName:"app-detail-restore"}}).state("staging_app_detail.monitor_traffic",{url:"/monitor/traffic",title:"Staging Application Traffic Monitoring",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-traffic.html",controller:"member.stagingAppMonitorTrafficController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appMonitorPage"}}).state("staging_app_detail.monitor_php",{url:"/monitor/php",title:"Staging Application PHP Monitoring",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-php.html",controller:"member.stagingAppMonitorPhpController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appMonitorPage"}}).state("staging_app_detail.monitor_mysql",{url:"/monitor/mysql",title:"Staging Application MySql Monitoring",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-mysql.html",controller:"member.stagingAppMonitorMySqlController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appMonitorPage"}}).state("staging_app_detail.monitor_cron",{url:"/monitor/cron",title:"Staging Application MySql Monitoring",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-cron.html",controller:"member.stagingAppMonitorCronController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON},params:{json:"appMonitorPage"}}).state("staging_app_detail.log_access",{url:"/logs/access",title:"Application Detail Access Log",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-access-log.html",controller:"member.appMonitorAccessLogController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage"}}).state("staging_app_detail.log_error",{url:"/logs/error",title:"Application Detail Access Log",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-error-log.html",controller:"member.appMonitorErrorLogController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,partials:monPartial},params:{json:"appMonitorPage"}}).state("staging_app_detail.monitor_disk",{url:"/monitor/disk",title:"Staging Application Disk Usage Monitoring",templateUrl:serverViewPath+"partials/appMonitoring/app-detail-monitor-disk-usage.html",controller:"member.stagingAppMonitorDiskUsageController",controllerAs:"vm",child:"apps",staging:!0,resolve:{translation:translatedJSON,lazyLoad:lazyLoad},params:{json:"appMonitorPage",module:"monitoring"}}).state("server_clone_staging",{url:"/server/:id/clone/:appId/",title:"Server Cloning Staging",templateUrl:serverViewPath+"server/server-clone-v1.html",controller:"member.serverCloneController",controllerAs:"vm",resolve:{loggedin:authenticated,translation:translatedJSON},params:{staging:"true",json:"serverClonePage"}})}angular.module("member").config(["$stateProvider","serverViewPath",serverRouterConfig]);var bankTransfer=["accountSvc","$q","$window",function(accountSvc,$q,$window){var deferred=$q.defer();window.PubSub.subscribe("authCheckDone",function(){return accountSvc.isBankTransfer()?(deferred.reject(),$window.location.href="/account/detail"):deferred.resolve(),deferred.promise})}],gdprIsDataDeleted=["consoleApiSvc","$q","$window",function(consoleApiSvc,$q,$window){var deferred=$q.defer();window.PubSub.subscribe("authCheckDone",function(){var isDataDeleted=-1!==consoleApiSvc.user.userDetails.user_tags_name.indexOf("gdpr-delete-data");return isDataDeleted?(deferred.reject(),$window.location.href="/account/detail"):deferred.resolve(),deferred.promise})}],authenticated=["consoleApiSvc","$q","commonSvc","$window","clusterSvc","restrictedFeaturesSvc","$rootScope","userVerificationSvc",function(consoleApiSvc,$q,commonSvc,$window,clusterSvc,restrictedFeaturesSvc,$rootScope,userVerificationSvc){var deferred=$q.defer();return consoleApiSvc.authCheck().then(function(){if($rootScope.publish("authCheckDone"),userVerificationSvc.restrictPagesForUnVerifiedUsers())return deferred.reject(),$window.location.href="/server/create",deferred.promise;if(restrictedFeaturesSvc.checkRestrictCoreFeatures())return deferred.reject(),""==consoleApiSvc.from.name&&($window.location.href="/server"),deferred.promise;if(angular.isDefined(consoleApiSvc.current.cluster)&&consoleApiSvc.current.cluster){if(!commonSvc.isMasterUser())return deferred.reject(),$window.location.href="/server",deferred.promise;deferred.resolve()}-1!==consoleApiSvc.current.url.indexOf("/account/")&&angular.isDefined(consoleApiSvc.user.userDetails.is_account_console_disabled)&&($("#cw-app_loader").hide(),$("#angular-app").show()),deferred.resolve()},function(){deferred.reject()}),deferred.promise}],authenticateVerificationPages=["consoleApiSvc","$q","$window","memberSvc",function(consoleApiSvc,$q,$window,memberSvc){var deferred=$q.defer();window.PubSub.subscribe("authCheckDone",function(){return angular.isDefined(consoleApiSvc.user.userDetails.is_verified)&&consoleApiSvc.user.userDetails.is_verified?(deferred.reject(),$window.location.href="/server/create",deferred.promise):(deferred.resolve(),deferred.promise)})}],translatedJSON=["$translatePartialLoader","$translate","$stateParams",function($translatePartialLoader,$translate,$stateParams){return angular.isDefined($stateParams.json_2)&&$translatePartialLoader.addPart($stateParams.json_2),$translatePartialLoader.addPart($stateParams.json),$translate.refresh()}],monPartial=["serverViewPath","$stateParams",function(serverViewPath,$stateParams){return serverViewPath+"partials/appMonitoring/"+$stateParams.partialName+".html"}],appPartial=["serverViewPath","$stateParams",function(serverViewPath,$stateParams){return serverViewPath+"partials/app/"+$stateParams.partialName+".html"}],authenticateACLUsers=["consoleApiSvc","$q","$window","$stateParams",function(consoleApiSvc,$q,$window,$stateParams){var deferred=$q.defer();return window.PubSub.subscribe("authCheckDone",function(){consoleApiSvc.user.ACLUsers;return consoleApiSvc.user.ACLUsersBool=!0,angular.isDefined(consoleApiSvc.user.ACLUsers)&&angular.isDefined(consoleApiSvc.user.userDetails.admin_id)&&-1===consoleApiSvc.user.ACLUsers.indexOf(parseInt(consoleApiSvc.user.userDetails.admin_id))?(consoleApiSvc.user.ACLUsersBool=!1,deferred.reject(),$window.location.href="/server",deferred.promise):1===["debian9","debian7"].indexOf(consoleApiSvc.server.serverData[$stateParams.id].platform)?(consoleApiSvc.user.ACLUsersBool=!1,deferred.reject(),$window.location.href="/server",deferred.promise):void deferred.resolve()}),deferred.promise}],lazyLoad=["ocLazyloadSvc","$state","$stateParams","$q",function(ocLazyloadSvc,$state,$stateParams,$q){var deferred=$q.defer();return ocLazyloadSvc.isModuleLoaded($stateParams.module).then(function(){deferred.resolve()},function(){deferred.reject()}),deferred.promise}]}(),$(document).ready(function(){$("#cookies-bot").hide(),window.isEuUser&&""===cookieConsent.customerRecordedConsent&&setTimeout(function(){$("#cookies-bot").show(),$(window).width()<767?$("#cookies-bot").animate({height:"130px"},400,"linear"):$("#cookies-bot").animate({height:"104px"},400,"linear")},2e3),$("#continue-settings").click(function(){cookieConsent.recordCustomerConsent(),$("#cookies-bot").animate({height:"0"},400,"linear"),$("#cookies-bot").hide(),$("#cw-content").css("padding","0")})});